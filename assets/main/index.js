System.register("bundle://main/_virtual/AudioHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var e,n,t,r,i,s,u,c;return{setters:[function(o){e=o.inheritsLoose},function(o){n=o.cclegacy,t=o._decorator,r=o.director,i=o.AudioSource,s=o.resources,u=o.AudioClip,c=o.Component}],execute:function(){var l,a;n._RF.push({},"2585c4z1GBJD67FFVHpfHq5","AudioHelper",void 0);var d=t.ccclass;t.property,o("AudioHelper",d("AudioHelper")(((a=function(o){function n(){for(var e,n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return(e=o.call.apply(o,[this].concat(t))||this)._bgm=void 0,e._sfx=void 0,e}e(n,o);var t=n.prototype;return t.onLoad=function(){n.instance=this,r.addPersistRootNode(this.node),this._bgm=this.node.addComponent(i),this._bgm.volume=.5,this._sfx=this.node.addComponent(i),this._sfx.volume=1},t.playBGM=function(){var o=this;s.load("Sounds/bgm",u,(function(e,n){if(e)return console.error(e);o._bgm.clip=n,o._bgm.loop=!0,o._bgm.play()}))},t.playSFX=function(o){var e=this;s.load("Sounds/"+o,u,(function(o,n){if(o)return console.error(o);e._sfx.playOneShot(n)}))},n}(c)).instance=void 0,l=a))||l);n._RF.pop()}}}));

System.register("bundle://main/_virtual/CompassAnimation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioHelper.ts","./IdleAnimations.ts","./EffectsHelper.ts"],(function(n){var t,e,i,r,o,a,s,c,l,u,p,f,m,d,y;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,r=n.assertThisInitialized,o=n.asyncToGenerator,a=n.regeneratorRuntime},function(n){s=n.cclegacy,c=n._decorator,l=n.Node,u=n.ParticleSystem2D,p=n.tween,f=n.Component},function(n){m=n.AudioHelper},function(n){d=n.IdelAnimations},function(n){y=n.EffectsHelper}],execute:function(){var g,v,b,h,w,A,S;s._RF.push({},"c1543ts8bNFvbOQsJSx0vum","CompassAnimation",void 0);var E=c.ccclass,C=c.property;n("CompassAnimation",(g=E("CompassAnimation"),v=C(l),b=C(l),g((A=t((w=function(n){function t(){for(var t,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return t=n.call.apply(n,[this].concat(o))||this,i(t,"pointer",A,r(t)),i(t,"windEffect",S,r(t)),t.angleMap={N:0,NE:315,E:270,SE:225,S:180,SW:135,W:90,NW:45},t.rotationOffset=0,t}e(t,n);var s=t.prototype;return s.blow=function(n){var t,e=this.windEffect.getComponent(u),i=null!=(t=this.angleMap[n])?t:0;e.angle=i+180,e.resetSystem()},s.pointAnimate=function(n){var t=this;return new Promise((function(e){var i;m.instance.playSFX("spin");var r=(null!=(i=t.angleMap[n])?i:0)+720+t.rotationOffset;t.rotationOffset+=720,d.instance.stopIdle(t.pointer),p(t.pointer).to(3,{angle:r},{easing:"cubicOut"}).call((function(){m.instance.playSFX("blowing"),d.instance.idleCompass(),e()})).start()}))},s.patchAnimate=function(){var n=o(a().mark((function n(t){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y.bounceScale(t);case 2:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),t}(f)).prototype,"pointer",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(w.prototype,"windEffect",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=w))||h));s._RF.pop()}}}));

System.register("bundle://main/_virtual/CompassController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CompassAnimation.ts"],(function(e){var t,r,n,i,o,s,a,c,u,l,p,f,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose,s=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){c=e.cclegacy,u=e._decorator,l=e.Sprite,p=e.Component,f=e.director},function(e){h=e.CompassAnimation}],execute:function(){var m,v,d,C,S,b,y;c._RF.push({},"ed321HgZiBLGKDTC9/hdyVu","CompassController",void 0);var A=u.ccclass,D=u.property,W=function(e){return e[e.N=0]="N",e[e.NE=1]="NE",e[e.E=2]="E",e[e.SE=3]="SE",e[e.S=4]="S",e[e.SW=5]="SW",e[e.W=6]="W",e[e.NW=7]="NW",e}(W||{});e("CompassController",(m=A("CompassController"),v=D(h),d=D([l]),m((b=t((S=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,n(t,"compassAnimation",b,i(t)),n(t,"coverSprites",y,i(t)),t.allDirections=[W.N,W.NE,W.E,W.SE,W.S,W.SW,W.W,W.NW],t.usedDirections=[],t}r(t,e);var c=t.prototype;return c.start=function(){},c.hideAllCovers=function(){for(var e,t=o(this.coverSprites);!(e=t()).done;){e.value.node.active=!1}},c.showCover=function(){var e=s(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=(r=this.coverSprites[t].node).active){e.next=5;break}return r.active=!0,e.next=5,this.compassAnimation.patchAnimate(r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),c.autoBlowWind=function(){var e=s(a().mark((function e(){var t,r,n,i,s,c=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=o(this.usedDirections);case 1:if((r=t()).done){e.next=7;break}return n=r.value,e.next=5,this.showCover(n);case 5:e.next=1;break;case 7:if(0!==(i=this.allDirections.filter((function(e){return!c.usedDirections.includes(e)}))).length){e.next=10;break}return e.abrupt("return");case 10:return s=i[Math.floor(Math.random()*i.length)],this.usedDirections.push(s),e.next=14,this.compassAnimation.pointAnimate(W[s]);case 14:this.compassAnimation.blow(W[s]),f.emit("WIND_BLOW",W[s]);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.reset=function(){this.usedDirections=[],this.hideAllCovers()},t}(p)).prototype,"compassAnimation",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(S.prototype,"coverSprites",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=S))||C));c._RF.pop()}}}));

System.register("bundle://main/_virtual/EffectsHelper.ts",["cc"],(function(e){var n,t,c;return{setters:[function(e){n=e.cclegacy,t=e.Vec3,c=e.tween}],execute:function(){n._RF.push({},"07256waQwhMU6vjhrECp4MJ","EffectsHelper",void 0);e("EffectsHelper",function(){function e(){}return e.bounceScale=function(e,n){return void 0===n&&(n={}),new Promise((function(r){var u,i,a=null!=(u=n.duration)?u:.25,s=null!=(i=n.scale)?i:1.2;e.setScale(new t(.5,.5,1)),e.active=!0,c(e).to(a,{scale:new t(s,s,1)},{easing:"backOut"}).to(.1,{scale:new t(1,1,1)},{easing:"sineIn"}).call((function(){return r()})).start()}))},e}());n._RF.pop()}}}));

System.register("bundle://main/_virtual/FlowerAnimation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioHelper.ts"],(function(e){var o,t,n,r,i,l,a,c,p,s,u;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,l=e._decorator,a=e.Node,c=e.tween,p=e.UITransform,s=e.Component},function(e){u=e.AudioHelper}],execute:function(){var f,y,d,w,F;i._RF.push({},"53b63mRvBJHhIQccMJUmJaX","FlowerAnimation",void 0);var m=l.ccclass,v=l.property;e("FlowerAnimation",(f=m("FlowerAnimation"),y=v(a),f((F=o((w=function(e){function o(){for(var o,t=arguments.length,i=new Array(t),l=0;l<t;l++)i[l]=arguments[l];return o=e.call.apply(e,[this].concat(i))||this,n(o,"flyFlower",F,r(o)),o}return t(o,e),o.prototype.plant=function(e,o){var t=this;return new Promise((function(n){u.instance.playSFX("bubble-pop");var r=e.getWorldPosition(),i=o.getWorldPosition();t.flyFlower.active=!0,t.flyFlower.setWorldPosition(r);var l=r.clone();l.y+=10,l.x+=10,c(t.flyFlower).to(.2,{position:t.flyFlower.parent.getComponent(p).convertToNodeSpaceAR(l)},{easing:"quadOut"}).to(.5,{position:t.flyFlower.parent.getComponent(p).convertToNodeSpaceAR(i)},{easing:"quadInOut"}).call((function(){t.flyFlower.active=!1,n()})).start()}))},o}(s)).prototype,"flyFlower",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=w))||d));i._RF.pop()}}}));

System.register("bundle://main/_virtual/FlowerController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FlowerAnimation.ts","./TileController.ts","./IdleAnimations.ts"],(function(n){var e,t,o,r,i,l,a,s,c,u,f,p,w;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,o=n.initializerDefineProperty,r=n.assertThisInitialized,i=n.asyncToGenerator,l=n.regeneratorRuntime},function(n){a=n.cclegacy,s=n._decorator,c=n.Node,u=n.Component},function(n){f=n.FlowerAnimation},function(n){p=n.TileController},function(n){w=n.IdelAnimations}],execute:function(){var h,d,I,m,v,y,C;a._RF.push({},"cf16aSCRT1PuJqI4iQAmW4b","FlowerController",void 0);var F=s.ccclass,b=s.property;n("FlowerController",(h=F("FlowerController"),d=b(c),I=b(f),h((y=e((v=function(n){function e(){for(var e,t=arguments.length,i=new Array(t),l=0;l<t;l++)i[l]=arguments[l];return e=n.call.apply(n,[this].concat(i))||this,o(e,"flowerContainer",y,r(e)),o(e,"flowerAnimation",C,r(e)),e.flowerIcons=void 0,e._lastFlowerIndex=9,e}t(e,n);var a=e.prototype;return a.onLoad=function(){this.flowerIcons=this.flowerContainer.children},a.init=function(n){this._lastFlowerIndex=n-1;for(var e=0;e<this.flowerIcons.length;e++)this.flowerIcons[e].active=e<n,e<=n-1&&this.flowerIcons[e].active?w.instance.idleIndicator(this.flowerIcons[e]):w.instance.stopIdle(this.flowerIcons[e])},a.plant=function(){var n=i(l().mark((function n(e){var t,o;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=this.flowerIcons[this._lastFlowerIndex--],n.next=3,this.flowerAnimation.plant(o,e);case 3:o.active=!1,w.instance.stopIdle(o),null==(t=e.getComponent(p))||t.setFlower();case 6:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),e}(u)).prototype,"flowerContainer",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(v.prototype,"flowerAnimation",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=v))||m));a._RF.pop()}}}));

System.register("bundle://main/_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PlantController.ts","./ResultPopup.ts","./LevelManager.ts","./CompassController.ts","./AudioHelper.ts"],(function(t){var e,n,r,i,o,a,s,l,u,c,h,p,f,m,g,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized,o=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){s=t.cclegacy,l=t._decorator,u=t.Label,c=t.director,h=t.Component},function(t){p=t.PlantController},function(t){f=t.ResultPopup},function(t){m=t.getLevelConfig},function(t){g=t.CompassController},function(t){d=t.AudioHelper}],execute:function(){var v,w,b,C,P,R,y,k,L,x,G,B;s._RF.push({},"a0000YzmrZNq6jS+N1zVPFc","GameManager",void 0);var I=l.ccclass,M=l.property,z=function(t){return t[t.Planting=0]="Planting",t[t.Blowing=1]="Blowing",t[t.GameOver=2]="GameOver",t}(z||{});t("GameManager",(v=I("GameManager"),w=M(p),b=M(u),C=M(f),P=M(g),v(((B=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this).currentRound=0,e.maxRounds=7,e.isClickable=!0,e.phase=z.Planting,r(e,"plantController",k,i(e)),r(e,"instructionLabel",L,i(e)),r(e,"resultPopup",x,i(e)),r(e,"compassController",G,i(e)),e}n(e,t);var s=e.prototype;return s.onLoad=function(){e.instance=this,d.instance.playBGM()},s.start=function(){this.initGame(),c.on("TILE_CLICKED",this.plant,this),c.on("WIND_BLOW",this.blow,this)},s.initGame=function(){var t=parseInt(localStorage.getItem("currentLevel")||"1"),e=m(t);this.maxRounds=e.windCount,this.plantController.init(e.rows,e.windCount),this.resetGame()},s.resetGame=function(){this.plantController.reset(),this.compassController.reset(),this.currentRound=0,this.enterPlantingPhase()},s.nextLevel=function(){var t=parseInt(localStorage.getItem("currentLevel")||"1");localStorage.setItem("currentLevel",(t+1).toString()),this.initGame()},s.enterPlantingPhase=function(){this.currentRound++,this.setPhase(z.Planting)},s.enterBlowingPhase=function(){this.checkMediumResult(),this.setPhase(z.Blowing),this.compassController.autoBlowWind()},s.plant=function(){var t=o(a().mark((function t(e){var n=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.phase!=z.Planting||!this.isClickable){t.next=5;break}return this.isClickable=!1,t.next=4,this.plantController.plant(e);case 4:setTimeout((function(){n.enterBlowingPhase(),n.isClickable=!0}),1e3);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),s.blow=function(){var t=o(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.phase!=z.Blowing){t.next=4;break}return t.next=3,this.plantController.blow(e);case 3:this.checkRoundResult();case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),s.setPhase=function(t){switch(this.phase=t,t){case z.Planting:this.instructionLabel.string="Click on a tile to plant a dandelion";break;case z.GameOver:this.instructionLabel.string="";break;case z.Blowing:this.instructionLabel.string="Tap a direction on the compass to blow the wind"}},s.checkRoundResult=function(){var t=o(a().mark((function t(){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.plantController.isBoardFullyCovered(),!(this.currentRound>=this.maxRounds||e)){t.next=8;break}return this.setPhase(z.GameOver),t.next=5,this.plantController.roundOver();case 5:e?this.showResult(!0):this.showResult(!1),t.next=9;break;case 8:this.enterPlantingPhase();case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.checkMediumResult=function(){this.plantController.isBoardFullyCovered()&&(this.setPhase(z.GameOver),this.showResult(!0))},s.showResult=function(){var t=o(a().mark((function t(e){var n=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:!0,this.resultPopup.showWin(!0,(function(){n.nextLevel()}));case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e}(h)).instance=void 0,k=e((y=B).prototype,"plantController",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(y.prototype,"instructionLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(y.prototype,"resultPopup",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(y.prototype,"compassController",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=y))||R));s._RF.pop()}}}));

System.register("bundle://main/_virtual/GridAnimation.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,o,r,i,a,l,c,s,d,p,u,f,y,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,l=e.Prefab,c=e.Node,s=e.instantiate,d=e.director,p=e.UITransform,u=e.UIOpacity,f=e.tween,y=e.Vec3,v=e.Component}],execute:function(){var m,b,g,h,P,w,A;i._RF.push({},"b36e8kkMb9Mla9EpFZ/lAEs","GridAnimation",void 0);var C=a.ccclass,F=a.property;e("GridAnimation",(m=C("GridAnimation"),b=F(l),g=F(c),m((w=t((P=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,o(t,"seedFlyPrefab",w,r(t)),o(t,"windEffect",A,r(t)),t}return n(t,e),t.prototype.seedFly=function(e,t){var n=this;return new Promise((function(o){if(n.seedFlyPrefab){var r=s(n.seedFlyPrefab);n.node.addChild(r);var i=d.getScene().getChildByName("Canvas");i.addChild(r);var a=e.getWorldPosition(),l=t.getWorldPosition(),c=a.clone().lerp(l,.5);c.x+=80*(Math.random()-.5),c.y+=80*(Math.random()-.5),r.setWorldPosition(a);var v=i.getComponent(p).convertToNodeSpaceAR(a),m=i.getComponent(p).convertToNodeSpaceAR(c),b=i.getComponent(p).convertToNodeSpaceAR(l);r.setPosition(v);var g={value:0},h=360+360*Math.random(),P=r.getComponent(u);P&&(P.opacity=255),f(g).to(2,{value:1},{onUpdate:function(){var e=g.value,t=1-e,n=t*t*v.x+2*t*e*m.x+e*e*b.x,o=t*t*v.y+2*t*e*m.y+e*e*b.y;r.setPosition(new y(n,o,0)),r.angle=0+(h-0)*e;var i=1+(1.2-1)*e;r.setScale(new y(i,i,1)),P&&(P.opacity=255-75*e)}}).call((function(){r.destroy(),o()})).start()}}))},t}(v)).prototype,"seedFlyPrefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(P.prototype,"windEffect",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=P))||h));i._RF.pop()}}}));

System.register("bundle://main/_virtual/GridController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TileController.ts","./GridAnimation.ts"],(function(i){var e,t,r,n,o,s,l,a,d,u,c,f,h;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,r=i.initializerDefineProperty,n=i.assertThisInitialized,o=i.createForOfIteratorHelperLoose},function(i){s=i.cclegacy,l=i._decorator,a=i.Prefab,d=i.instantiate,u=i.Vec3,c=i.Component},function(i){f=i.TileController},function(i){h=i.GridAnimation}],execute:function(){var g,p,v,S,z,m,C;s._RF.push({},"927d1nKTBBLgqY5/Ep52e2i","GridController",void 0);var y=l.ccclass,b=l.property,N={N:[-1,0],NE:[-1,1],E:[0,1],SE:[1,1],S:[1,0],SW:[1,-1],W:[0,-1],NW:[-1,-1]};i("GridController",(g=y("GridController"),p=b(a),v=b(h),g((m=e((z=function(i){function e(){for(var e,t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];return(e=i.call.apply(i,[this].concat(o))||this).tileSize=100,e.spacing=2,r(e,"tilePrefab",m,n(e)),r(e,"gridAnimation",C,n(e)),e.tileNodes=[],e.gridSize=5,e}t(e,i);var s=e.prototype;return s.init=function(i){this.node.removeAllChildren(),this.gridSize=i;for(var e=-(this.gridSize*this.tileSize+(this.gridSize-1)*this.spacing)/2+this.tileSize/2,t=(this.gridSize*this.tileSize+(this.gridSize-1)*this.spacing)/2-this.tileSize/2,r=0;r<this.gridSize;r++){this.tileNodes[r]=[];for(var n=0;n<this.gridSize;n++){var o=d(this.tilePrefab);o.setPosition(new u(e+n*(this.tileSize+this.spacing),t-r*(this.tileSize+this.spacing),0)),this.node.addChild(o),this.tileNodes[r][n]=o,o.getComponent(f).init(r,n)}}},s.reset=function(){for(var i=0;i<this.gridSize;i++)for(var e=0;e<this.gridSize;e++){this.tileNodes[i][e].getComponent(f).setEmpty()}},s.roundOver=function(){var i=this;return new Promise((function(e){for(var t=1,r=0;r<i.gridSize;r++)for(var n=function(){var e=i.tileNodes[r][o].getComponent(f);e.isSeed()&&i.scheduleOnce((function(){e.setFinalFlower()}),.3*t),t++},o=0;o<i.gridSize;o++)n();i.scheduleOnce((function(){e()}),.3*t+1)}))},s.blowSeeds=function(i){var e=this;return new Promise((function(t){for(var r=[],n=N[i],o=n[0],s=n[1],l=0;l<e.gridSize;l++)for(var a=0;a<e.gridSize;a++){var d=e.tileNodes[l][a].getComponent(f);if(d.isFlower())for(var u=l+o,c=a+s,h=function(){var i=e.tileNodes[u][c].getComponent(f);if(!i.isFlower()){var t=e.gridAnimation.seedFly(d.node,i.node).then((function(){i.setSeed()}));r.push(t)}u+=o,c+=s};e.inBounds(u,c);)h()}0===r.length?t():Promise.all(r).then((function(){t()}))}))},s.inBounds=function(i,e){return i>=0&&i<this.gridSize&&e>=0&&e<this.gridSize},s.isBoardFullyCovered=function(){for(var i,e=o(this.tileNodes);!(i=e()).done;)for(var t,r=i.value,n=o(r);!(t=n()).done;){if(t.value.getComponent(f).isEmpty())return!1}return!0},e}(c)).prototype,"tilePrefab",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(z.prototype,"gridAnimation",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=z))||S));s._RF.pop()}}}));

System.register("bundle://main/_virtual/IdleAnimations.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var e,i,t,o,s,a,r;return{setters:[function(n){e=n.inheritsLoose},function(n){i=n.cclegacy,t=n._decorator,o=n.find,s=n.tween,a=n.Vec3,r=n.Component}],execute:function(){var l,u;i._RF.push({},"cdd78pOz89KMKUEUB7o2RDu","IdleAnimations",void 0);var p=t.ccclass;t.property,n("IdelAnimations",p("IdelAnimations")(((u=function(n){function i(){return n.apply(this,arguments)||this}e(i,n);var t=i.prototype;return t.onLoad=function(){i.instance=this,this.idleCloud(),this.idleCompass()},t.idleCloud=function(){var n=o("Canvas/Center/RightPanel/Wind");n&&s(n).repeatForever(s().by(3,{position:new a(20,0,0)},{easing:"sineInOut"}).by(3,{position:new a(-20,0,0)},{easing:"sineInOut"})).start()},t.idleCompass=function(){var n=o("Canvas/Center/RightPanel/CompassPanel/Pointer");n&&s(n).repeatForever(s().by(1.2,{angle:5},{easing:"sineInOut"}).by(1.2,{angle:-5},{easing:"sineInOut"})).start()},t.stopIdle=function(n){s(n).stop()},t.idleIndicator=function(n){var e=Math.random();s(n).delay(e).repeatForever(s().by(1.4,{angle:2}).by(1.4,{angle:-2})).start()},t.idleTileFlower=function(n){s(n).repeatForever(s().by(1.4,{position:new a(0,4,0)},{easing:"sineInOut"}).by(1.4,{position:new a(0,-4,0)},{easing:"sineInOut"})).start()},t.idleTileSeed=function(n){s(n).repeatForever(s().by(2,{position:new a(0,3,0)},{easing:"sineInOut"}).by(2,{position:new a(0,-3,0)},{easing:"sineInOut"})).start()},i}(r)).instance=void 0,l=u))||l);i._RF.pop()}}}));

System.register("bundle://main/_virtual/LevelManager.ts",["cc"],(function(n){var e;return{setters:[function(n){e=n.cclegacy}],execute:function(){n("getLevelConfig",(function(n){return t[Math.min(n-1,t.length-1)]})),e._RF.push({},"0135eEnWntLcpY2ffWv6jeY","LevelManager",void 0);var t=n("LevelConfigs",[{rows:2,cols:2,windCount:2},{rows:3,cols:3,windCount:4},{rows:4,cols:4,windCount:5},{rows:5,cols:5,windCount:7}]);e._RF.pop()}}}));

System.register("bundle://main/_virtual/main",["./EffectsHelper.ts","./OneShotParticle.ts","./CompassController.ts","./FlowerController.ts","./GridController.ts","./PlantController.ts","./ResultPopup.ts","./TileController.ts","./CompassAnimation.ts","./FlowerAnimation.ts","./GridAnimation.ts","./IdleAnimations.ts","./ResultPopupAnimation.ts","./TileAnimation.ts","./GameManager.ts","./LevelManager.ts","./SceneSwitchAnimation.ts","./StartManager.ts","./AudioHelper.ts","./TimelineHelper.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("bundle://main/_virtual/OneShotParticle.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,n,o,i;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,n=t._decorator,o=t.ParticleSystem2D,i=t.Component}],execute:function(){var c;r._RF.push({},"2a606wOyVpItYUnzW74HPaB","OneShotParticle",void 0);var s=n.ccclass;n.property,t("VictoryParticle",s("VictoryParticle")(c=function(t){function r(){return t.apply(this,arguments)||this}return e(r,t),r.prototype.start=function(){var t=this,e=this.getComponent(o);e&&e.resetSystem(),setTimeout((function(){t.node.destroy()}),4e3)},r}(i))||c);r._RF.pop()}}}));

System.register("bundle://main/_virtual/PlantController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GridController.ts","./FlowerController.ts"],(function(r){var t,n,e,o,i,l,u,c,a,s,f;return{setters:[function(r){t=r.applyDecoratedDescriptor,n=r.inheritsLoose,e=r.initializerDefineProperty,o=r.assertThisInitialized,i=r.asyncToGenerator,l=r.regeneratorRuntime},function(r){u=r.cclegacy,c=r._decorator,a=r.Component},function(r){s=r.GridController},function(r){f=r.FlowerController}],execute:function(){var p,d,h,C,w,v,y;u._RF.push({},"856dcU59lJIR7+xm/FGgHiW","PlantController",void 0);var g=c.ccclass,b=c.property;r("PlantController",(p=g("PlantController"),d=b(f),h=b(s),p((v=t((w=function(r){function t(){for(var t,n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return t=r.call.apply(r,[this].concat(i))||this,e(t,"flowerController",v,o(t)),e(t,"gridController",y,o(t)),t.count=0,t.currentCount=0,t}n(t,r);var u=t.prototype;return u.init=function(r,t){this.count=t,this.flowerController.init(t),this.gridController.init(r)},u.reset=function(){this.flowerController.init(this.count),this.gridController.reset()},u.plant=function(){var r=i(l().mark((function r(t){return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.flowerController.plant(t);case 2:this.currentCount--;case 3:case"end":return r.stop()}}),r,this)})));return function(t){return r.apply(this,arguments)}}(),u.blow=function(){var r=i(l().mark((function r(t){return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.gridController.blowSeeds(t);case 2:case"end":return r.stop()}}),r,this)})));return function(t){return r.apply(this,arguments)}}(),u.roundOver=function(){var r=i(l().mark((function r(){return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.gridController.roundOver();case 2:case"end":return r.stop()}}),r,this)})));return function(){return r.apply(this,arguments)}}(),u.isBoardFullyCovered=function(){return this.gridController.isBoardFullyCovered()},t}(a)).prototype,"flowerController",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(w.prototype,"gridController",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=w))||C));u._RF.pop()}}}));

System.register("bundle://main/_virtual/ResultPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResultPopupAnimation.ts"],(function(t){var e,n,r,i,a,o,s,u,l,c,p,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized,a=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){s=t.cclegacy,u=t._decorator,l=t.Label,c=t.Button,p=t.Component},function(t){b=t.ResultPopupAnimation}],execute:function(){var f,h,L,d,g,m,y,v,R,E,w;s._RF.push({},"67522KS9wNPBaNKMCQj6MEU","ResultPopup",void 0);var P=u.ccclass,B=u.property;t("ResultPopup",(f=P("ResultPopup"),h=B(l),L=B(l),d=B(c),g=B(b),f((v=e((y=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,r(e,"titleLabel",v,i(e)),r(e,"descLabel",R,i(e)),r(e,"restartButton",E,i(e)),r(e,"animation",w,i(e)),e._onRestart=null,e}n(e,t);var s=e.prototype;return s.start=function(){var t=this;this.node.active=!1,this.restartButton.node.on(c.EventType.CLICK,(function(){t.node.active=!1,t._onRestart&&t._onRestart()}))},s.showWin=function(){var t=a(o().mark((function t(e,n){var r,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.restartButton.node.getChildByName("Label"),i=null==r?void 0:r.getComponent(l),this._onRestart=n,!e){t.next=12;break}if(this.titleLabel.string="LEVEL COMPLETED",this.descLabel.string=" 🎉 ",i.string="NEXT LEVEL",!e){t.next=10;break}return t.next=10,this.animation.showWin(this.node);case 10:t.next=15;break;case 12:this.titleLabel.string="LEVEL FAILED",this.descLabel.string=" ✖ ",i.string="RETRY";case 15:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),e}(p)).prototype,"titleLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(y.prototype,"descLabel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(y.prototype,"restartButton",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(y.prototype,"animation",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=y))||m));s._RF.pop()}}}));

System.register("bundle://main/_virtual/ResultPopupAnimation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioHelper.ts","./TimelineHelper.ts","./EffectsHelper.ts"],(function(t){var e,n,r,i,o,a,c,s,u,l,p,f,h,y,P;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized,o=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){c=t.cclegacy,s=t._decorator,u=t.Prefab,l=t.instantiate,p=t.Component,f=t.sp},function(t){h=t.AudioHelper},function(t){y=t.wait},function(t){P=t.EffectsHelper}],execute:function(){var v,d,m,b,R;c._RF.push({},"50650YKPRlHZKhjTHtXKRcC","ResultPopupAnimation",void 0);var w=s.ccclass,g=s.property;t("ResultPopupAnimation",(v=w("ResultPopupAnimation"),d=g(u),v((R=e((b=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,r(e,"victoryParticlePrefab",R,i(e)),e}n(e,t);var c=e.prototype;return c.showWin=function(){var t=o(a().mark((function t(e){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.showVictoryParticles(),h.instance.playSFX("tadaa"),t.next=4,y(2500);case 4:return e.active=!0,n=e.getChildByName("DescLabelContainer"),n.getComponent(f.Skeleton).setAnimation(0,"animation",!0),t.next=10,this.popupResultPanel(e);case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),c.showVictoryParticles=function(){var t=l(this.victoryParticlePrefab);t.setPosition(0,0),this.node.addChild(t)},c.popupResultPanel=function(){var t=o(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.bounceScale(e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}(p)).prototype,"victoryParticlePrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=b))||m));c._RF.pop()}}}));

System.register("bundle://main/_virtual/rollupPluginModLoBabelHelpers.js",[],(function(t){return{execute:function(){function r(t,r,e,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void e(t)}c.done?r(u):Promise.resolve(u).then(n,o)}function e(r,n){return(e=t("setPrototypeOf",Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t}))(r,n)}function n(t,r){if(t){if("string"==typeof t)return o(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?o(t,r):void 0}}function o(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}t({applyDecoratedDescriptor:function(t,r,e,n,o){var i={};Object.keys(n).forEach((function(t){i[t]=n[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0);i=e.slice().reverse().reduce((function(e,n){return n(t,r,e)||e}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0);void 0===i.initializer&&(Object.defineProperty(t,r,i),i=null);return i},arrayLikeToArray:o,assertThisInitialized:function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},asyncToGenerator:function(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function c(t){r(a,o,i,c,u,"next",t)}function u(t){r(a,o,i,c,u,"throw",t)}c(void 0)}))}},createForOfIteratorHelperLoose:function(t,r){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(e)return(e=e.call(t)).next.bind(e);if(Array.isArray(t)||(e=n(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},inheritsLoose:function(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,e(t,r)},initializerDefineProperty:function(t,r,e,n){if(!e)return;Object.defineProperty(t,r,{enumerable:e.enumerable,configurable:e.configurable,writable:e.writable,value:e.initializer?e.initializer.call(n):void 0})},regeneratorRuntime:function(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
t("regeneratorRuntime",(function(){return e}));var r,e={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,r,e){t[r]=e.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function f(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{f({},"")}catch(r){f=function(t,r,e){return t[r]=e}}function s(t,r,e,n){var o=r&&r.prototype instanceof g?r:g,a=Object.create(o.prototype),c=new k(n||[]);return i(a,"_invoke",{value:_(t,e,c)}),a}function h(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",y="executing",v="completed",d={};function g(){}function m(){}function b(){}var w={};f(w,c,(function(){return this}));var L=Object.getPrototypeOf,x=L&&L(L(z([])));x&&x!==n&&o.call(x,c)&&(w=x);var O=b.prototype=g.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(r){f(t,r,(function(t){return this._invoke(r,t)}))}))}function j(t,r){function e(n,i,a,c){var u=h(t[n],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==typeof f&&o.call(f,"__await")?r.resolve(f.__await).then((function(t){e("next",t,a,c)}),(function(t){e("throw",t,a,c)})):r.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return e("throw",t,a,c)}))}c(u.arg)}var n;i(this,"_invoke",{value:function(t,o){function i(){return new r((function(r,n){e(t,o,r,n)}))}return n=n?n.then(i,i):i()}})}function _(t,e,n){var o=p;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:r,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=h(t,e,n);if("normal"===l.type){if(o=n.done?v:"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function P(t,e){var n=e.method,o=t.iterator[n];if(o===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=r,P(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=h(o,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,d;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,d):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function S(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function T(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function z(t){if(t||""===t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(o.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=r,e.done=!0,e};return i.next=i}}throw new TypeError(typeof t+" is not iterable")}return m.prototype=b,i(O,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:m,configurable:!0}),m.displayName=f(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===m||"GeneratorFunction"===(r.displayName||r.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,f(t,l,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},E(j.prototype),f(j.prototype,u,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new j(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(O),f(O,l,"Generator"),f(O,c,(function(){return this})),f(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=z,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,o){return c.type="throw",c.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),T(e),d}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;T(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:z(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),d}},e},setPrototypeOf:e,unsupportedIterableToArray:n})}}}));

System.register("bundle://main/_virtual/SceneSwitchAnimation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioHelper.ts"],(function(t){var e,n,o,i,r,a,c,u,s,l,p,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,c=t.Node,u=t.UIOpacity,s=t.tween,l=t.Vec3,p=t.Component},function(t){d=t.AudioHelper}],execute:function(){var f,h,m,y,w;r._RF.push({},"ad974rHdelF87WmmoGkUViU","SceneSwitchAnimation",void 0);var S=a.ccclass,v=a.property;t("SceneSwitchAnimation",(f=S("SceneSwitchAnimation"),h=v(c),f((w=e((y=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,o(e,"rootNode",w,i(e)),e}n(e,t);var r=e.prototype;return r.start=function(){},r.update=function(t){},r.switch=function(){var t=this;return new Promise((function(e){d.instance.playSFX("swish");var n=t.rootNode.getComponent(u);n||(n=t.rootNode.addComponent(u)),s(t.rootNode).to(.5,{scale:new l(.3,.3,1)},{easing:"quadInOut"}).start(),s(n).to(.5,{opacity:0},{easing:"quadInOut"}).call((function(){e()})).start()}))},e}(p)).prototype,"rootNode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=y))||m));r._RF.pop()}}}));

System.register("bundle://main/_virtual/StartManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SceneSwitchAnimation.ts"],(function(n){var t,e,r,a,i,o,c,s,u,l,p;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,r=n.initializerDefineProperty,a=n.assertThisInitialized,i=n.asyncToGenerator,o=n.regeneratorRuntime},function(n){c=n.cclegacy,s=n._decorator,u=n.Component,l=n.director},function(n){p=n.SceneSwitchAnimation}],execute:function(){var f,h,m,d,g;c._RF.push({},"b7820Ibl8lE8a/m7g4FqHbp","StartManager",void 0);var y=s.ccclass,S=s.property;n("StartManager",(f=y("StartManager"),h=S(p),f((g=t((d=function(n){function t(){for(var t,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i))||this,r(t,"sceneAnimation",g,a(t)),t}e(t,n);var c=t.prototype;return c.start=function(){},c.update=function(n){},c.onStartGame=function(){var n=i(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.sceneAnimation.switch();case 2:l.loadScene("dandelion");case 3:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),t}(u)).prototype,"sceneAnimation",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=d))||m));c._RF.pop()}}}));

System.register("bundle://main/_virtual/TileAnimation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioHelper.ts","./EffectsHelper.ts"],(function(e){var n,t,r,o,i,c,u,s;return{setters:[function(e){n=e.inheritsLoose,t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){o=e.cclegacy,i=e._decorator,c=e.Component},function(e){u=e.AudioHelper},function(e){s=e.EffectsHelper}],execute:function(){var a;o._RF.push({},"773624mcfpELo13mt1ts7jO","TileAnimation",void 0);var p=i.ccclass;i.property,e("TileAnimation",p("TileAnimation")(a=function(e){function o(){return e.apply(this,arguments)||this}return n(o,e),o.prototype.switchToFlower=function(){var e=t(r().mark((function e(n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.instance.playSFX("sparkle"),e.next=3,s.bounceScale(n);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),o}(c))||a);o._RF.pop()}}}));

System.register("bundle://main/_virtual/TileController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TileAnimation.ts"],(function(e){var t,i,n,o,s,a,r,l,d,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){s=e.cclegacy,a=e._decorator,r=e.Node,l=e.director,d=e.Component},function(e){c=e.TileAnimation}],execute:function(){var p,h,u,S,m;s._RF.push({},"c0f27p3AoRMq76p18EoW8hV","TileController",void 0);var N=a.ccclass,f=a.property,y=function(e){return e[e.Empty=0]="Empty",e[e.Dandelion=1]="Dandelion",e[e.Seed=2]="Seed",e}(y||{});e("TileController",(p=N("TileController"),h=f(c),p((m=t((S=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,n(t,"tileAnimation",m,o(t)),t.state=y.Empty,t.maskSpriteNode=null,t.flowerSpriteNode=null,t.seedSpriteNode=null,t.dandelionSpriteNode=null,t}i(t,e);var s=t.prototype;return s.onLoad=function(){this.maskSpriteNode=this.node.getChildByName("MaskSprite"),this.flowerSpriteNode=this.node.getChildByName("FlowerNode"),this.seedSpriteNode=this.node.getChildByName("SeedNode"),this.dandelionSpriteNode=this.node.getChildByName("DandelionNode"),this.updateVisual()},s.init=function(e,t){this.node.on(r.EventType.TOUCH_END,this.onClick,this)},s.onClick=function(){this.state!==y.Empty&&this.state!==y.Seed||l.emit("TILE_CLICKED",this.node)},s.updateVisual=function(){switch(this.maskSpriteNode.active=!1,this.flowerSpriteNode.active=!1,this.seedSpriteNode.active=!1,this.dandelionSpriteNode.active=!1,this.state){case y.Empty:this.maskSpriteNode.active=!1;break;case y.Dandelion:this.maskSpriteNode.active=!0,this.dandelionSpriteNode.active=!0;break;case y.Seed:this.seedSpriteNode.active=!0}},s.setFlower=function(){this.state=y.Dandelion,this.updateVisual()},s.setSeed=function(){this.state=y.Seed,this.updateVisual()},s.setEmpty=function(){this.state=y.Empty,this.updateVisual()},s.setFinalFlower=function(){this.seedSpriteNode.active=!1,this.maskSpriteNode.active=!0,this.dandelionSpriteNode.active=!0,this.tileAnimation.switchToFlower(this.node)},s.isFlower=function(){return this.state==y.Dandelion},s.isEmpty=function(){return this.state==y.Empty},s.isSeed=function(){return this.state==y.Seed},t}(d)).prototype,"tileAnimation",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=S))||u));s._RF.pop()}}}));

System.register("bundle://main/_virtual/TimelineHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,r,i;return{setters:[function(e){n=e.asyncToGenerator,t=e.regeneratorRuntime,r=e.createForOfIteratorHelperLoose},function(e){i=e.cclegacy}],execute:function(){e("wait",(function(e){return new Promise((function(n){return setTimeout(n,e)}))})),i._RF.push({},"5d487VIxChIOa4+/vgmMhyl","TimelineHelper",void 0);e("TimelineHelper",function(){function e(){}return e.run=function(){var e=n(t().mark((function e(n,i){var u,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0===i&&(i=0),u=r(n);case 2:if((a=u()).done){e.next=11;break}return o=a.value,e.next=6,o();case 6:if(!(i>0)){e.next=9;break}return e.next=9,this.wait(i);case 9:e.next=2;break;case 11:case"end":return e.stop()}}),e,this)})));return function(n,t){return e.apply(this,arguments)}}(),e.wait=function(e){return new Promise((function(n){return setTimeout(n,e)}))},e.runWithDelays=function(){var e=n(t().mark((function e(n){var i,u,a,o,c;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=r(n);case 1:if((u=i()).done){e.next=10;break}return a=u.value,o=a[0],c=a[1],e.next=5,o();case 5:if(void 0===c){e.next=8;break}return e.next=8,this.wait(c);case 8:e.next=1;break;case 10:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),e}());i._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'bundle://main/_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2ZpbGU6L0M6L1VzZXJzL29yYW5nL3dvcmsvRGFuZGVsaW9uL2Fzc2V0cy9TY3JpcHRzL1V0aWxzL2ZpbGU6L0M6L1VzZXJzL29yYW5nL3dvcmsvRGFuZGVsaW9uL2Fzc2V0cy9TY3JpcHRzL1V0aWxzL0F1ZGlvSGVscGVyLnRzIiwiLi4vZmlsZTovQzovVXNlcnMvb3Jhbmcvd29yay9EYW5kZWxpb24vYXNzZXRzL1NjcmlwdHMvU2NlbmVzL0dhbWVTY2VuZS9GWC9maWxlOi9DOi9Vc2Vycy9vcmFuZy93b3JrL0RhbmRlbGlvbi9hc3NldHMvU2NyaXB0cy9TY2VuZXMvR2FtZVNjZW5lL0ZYL0NvbXBhc3NBbmltYXRpb24udHMiLCIuLi9maWxlOi9DOi9Vc2Vycy9vcmFuZy93b3JrL0RhbmRlbGlvbi9hc3NldHMvU2NyaXB0cy9TY2VuZXMvR2FtZVNjZW5lL0NvbnRyb2xsZXJzL2ZpbGU6L0M6L1VzZXJzL29yYW5nL3dvcmsvRGFuZGVsaW9uL2Fzc2V0cy9TY3JpcHRzL1NjZW5lcy9HYW1lU2NlbmUvQ29udHJvbGxlcnMvQ29tcGFzc0NvbnRyb2xsZXIudHMiLCIuLi9maWxlOi9DOi9Vc2Vycy9vcmFuZy93b3JrL0RhbmRlbGlvbi9hc3NldHMvU2NyaXB0cy9FZmZlY3RzL2ZpbGU6L0M6L1VzZXJzL29yYW5nL3dvcmsvRGFuZGVsaW9uL2Fzc2V0cy9TY3JpcHRzL0VmZmVjdHMvRWZmZWN0c0hlbHBlci50cyIsIi4uL2ZpbGU6L0M6L1VzZXJzL29yYW5nL3dvcmsvRGFuZGVsaW9uL2Fzc2V0cy9TY3JpcHRzL1NjZW5lcy9HYW1lU2NlbmUvRlgvZmlsZTovQzovVXNlcnMvb3Jhbmcvd29yay9EYW5kZWxpb24vYXNzZXRzL1NjcmlwdHMvU2NlbmVzL0dhbWVTY2VuZS9GWC9GbG93ZXJBbmltYXRpb24udHMiLCIuLi9maWxlOi9DOi9Vc2Vycy9vcmFuZy93b3JrL0RhbmRlbGlvbi9hc3NldHMvU2NyaXB0cy9TY2VuZXMvR2FtZVNjZW5lL0NvbnRyb2xsZXJzL2ZpbGU6L0M6L1VzZXJzL29yYW5nL3dvcmsvRGFuZGVsaW9uL2Fzc2V0cy9TY3JpcHRzL1NjZW5lcy9HYW1lU2NlbmUvQ29udHJvbGxlcnMvRmxvd2VyQ29udHJvbGxlci50cyIsIi4uL2ZpbGU6L0M6L1VzZXJzL29yYW5nL3dvcmsvRGFuZGVsaW9uL2Fzc2V0cy9TY3JpcHRzL1NjZW5lcy9HYW1lU2NlbmUvZmlsZTovQzovVXNlcnMvb3Jhbmcvd29yay9EYW5kZWxpb24vYXNzZXRzL1NjcmlwdHMvU2NlbmVzL0dhbWVTY2VuZS9HYW1lTWFuYWdlci50cyIsIi4uL2ZpbGU6L0M6L1VzZXJzL29yYW5nL3dvcmsvRGFuZGVsaW9uL2Fzc2V0cy9TY3JpcHRzL1NjZW5lcy9HYW1lU2NlbmUvRlgvZmlsZTovQzovVXNlcnMvb3Jhbmcvd29yay9EYW5kZWxpb24vYXNzZXRzL1NjcmlwdHMvU2NlbmVzL0dhbWVTY2VuZS9GWC9HcmlkQW5pbWF0aW9uLnRzIiwiLi4vZmlsZTovQzovVXNlcnMvb3Jhbmcvd29yay9EYW5kZWxpb24vYXNzZXRzL1NjcmlwdHMvU2NlbmVzL0dhbWVTY2VuZS9Db250cm9sbGVycy9maWxlOi9DOi9Vc2Vycy9vcmFuZy93b3JrL0RhbmRlbGlvbi9hc3NldHMvU2NyaXB0cy9TY2VuZXMvR2FtZVNjZW5lL0NvbnRyb2xsZXJzL0dyaWRDb250cm9sbGVyLnRzIiwiLi4vZmlsZTovQzovVXNlcnMvb3Jhbmcvd29yay9EYW5kZWxpb24vYXNzZXRzL1NjcmlwdHMvU2NlbmVzL0dhbWVTY2VuZS9GWC9maWxlOi9DOi9Vc2Vycy9vcmFuZy93b3JrL0RhbmRlbGlvbi9hc3NldHMvU2NyaXB0cy9TY2VuZXMvR2FtZVNjZW5lL0ZYL0lkbGVBbmltYXRpb25zLnRzIiwiLi4vZmlsZTovQzovVXNlcnMvb3Jhbmcvd29yay9EYW5kZWxpb24vYXNzZXRzL1NjcmlwdHMvU2NlbmVzL0dhbWVTY2VuZS9NYW5hZ2Vycy9maWxlOi9DOi9Vc2Vycy9vcmFuZy93b3JrL0RhbmRlbGlvbi9hc3NldHMvU2NyaXB0cy9TY2VuZXMvR2FtZVNjZW5lL01hbmFnZXJzL0xldmVsTWFuYWdlci50cyIsIi4uL2ZpbGU6L0M6L1VzZXJzL29yYW5nL3dvcmsvRGFuZGVsaW9uL2Fzc2V0cy9TY3JpcHRzL0VmZmVjdHMvZmlsZTovQzovVXNlcnMvb3Jhbmcvd29yay9EYW5kZWxpb24vYXNzZXRzL1NjcmlwdHMvRWZmZWN0cy9PbmVTaG90UGFydGljbGUudHMiLCIuLi9maWxlOi9DOi9Vc2Vycy9vcmFuZy93b3JrL0RhbmRlbGlvbi9hc3NldHMvU2NyaXB0cy9TY2VuZXMvR2FtZVNjZW5lL0NvbnRyb2xsZXJzL2ZpbGU6L0M6L1VzZXJzL29yYW5nL3dvcmsvRGFuZGVsaW9uL2Fzc2V0cy9TY3JpcHRzL1NjZW5lcy9HYW1lU2NlbmUvQ29udHJvbGxlcnMvUGxhbnRDb250cm9sbGVyLnRzIiwiLi4vZmlsZTovQzovVXNlcnMvb3Jhbmcvd29yay9EYW5kZWxpb24vYXNzZXRzL1NjcmlwdHMvU2NlbmVzL0dhbWVTY2VuZS9Db250cm9sbGVycy9maWxlOi9DOi9Vc2Vycy9vcmFuZy93b3JrL0RhbmRlbGlvbi9hc3NldHMvU2NyaXB0cy9TY2VuZXMvR2FtZVNjZW5lL0NvbnRyb2xsZXJzL1Jlc3VsdFBvcHVwLnRzIiwiLi4vZmlsZTovQzovVXNlcnMvb3Jhbmcvd29yay9EYW5kZWxpb24vYXNzZXRzL1NjcmlwdHMvU2NlbmVzL0dhbWVTY2VuZS9GWC9maWxlOi9DOi9Vc2Vycy9vcmFuZy93b3JrL0RhbmRlbGlvbi9hc3NldHMvU2NyaXB0cy9TY2VuZXMvR2FtZVNjZW5lL0ZYL1Jlc3VsdFBvcHVwQW5pbWF0aW9uLnRzIiwiLi4vY2NlOi9pbnRlcm5hbC9jY2U6L2ludGVybmFsL3JvbGx1cFBsdWdpbk1vZExvQmFiZWxIZWxwZXJzLmpzIiwiLi4vZmlsZTovQzovVXNlcnMvb3Jhbmcvd29yay9EYW5kZWxpb24vYXNzZXRzL1NjcmlwdHMvU2NlbmVzL1N0YXJ0U2NlbmUvRlgvZmlsZTovQzovVXNlcnMvb3Jhbmcvd29yay9EYW5kZWxpb24vYXNzZXRzL1NjcmlwdHMvU2NlbmVzL1N0YXJ0U2NlbmUvRlgvU2NlbmVTd2l0Y2hBbmltYXRpb24udHMiLCIuLi9maWxlOi9DOi9Vc2Vycy9vcmFuZy93b3JrL0RhbmRlbGlvbi9hc3NldHMvU2NyaXB0cy9TY2VuZXMvU3RhcnRTY2VuZS9maWxlOi9DOi9Vc2Vycy9vcmFuZy93b3JrL0RhbmRlbGlvbi9hc3NldHMvU2NyaXB0cy9TY2VuZXMvU3RhcnRTY2VuZS9TdGFydE1hbmFnZXIudHMiLCIuLi9maWxlOi9DOi9Vc2Vycy9vcmFuZy93b3JrL0RhbmRlbGlvbi9hc3NldHMvU2NyaXB0cy9TY2VuZXMvR2FtZVNjZW5lL0ZYL2ZpbGU6L0M6L1VzZXJzL29yYW5nL3dvcmsvRGFuZGVsaW9uL2Fzc2V0cy9TY3JpcHRzL1NjZW5lcy9HYW1lU2NlbmUvRlgvVGlsZUFuaW1hdGlvbi50cyIsIi4uL2ZpbGU6L0M6L1VzZXJzL29yYW5nL3dvcmsvRGFuZGVsaW9uL2Fzc2V0cy9TY3JpcHRzL1NjZW5lcy9HYW1lU2NlbmUvQ29udHJvbGxlcnMvZmlsZTovQzovVXNlcnMvb3Jhbmcvd29yay9EYW5kZWxpb24vYXNzZXRzL1NjcmlwdHMvU2NlbmVzL0dhbWVTY2VuZS9Db250cm9sbGVycy9UaWxlQ29udHJvbGxlci50cyIsIi4uL2ZpbGU6L0M6L1VzZXJzL29yYW5nL3dvcmsvRGFuZGVsaW9uL2Fzc2V0cy9TY3JpcHRzL1V0aWxzL2ZpbGU6L0M6L1VzZXJzL29yYW5nL3dvcmsvRGFuZGVsaW9uL2Fzc2V0cy9TY3JpcHRzL1V0aWxzL1RpbWVsaW5lSGVscGVyLnRzIl0sIm5hbWVzIjpbImNjY2xhc3MiLCJfZGVjb3JhdG9yIiwicHJvcGVydHkiLCJfZGVjIiwiX2NsYXNzMiIsIl9Db21wb25lbnQiLCJBdWRpb0hlbHBlciIsIl90aGlzIiwiX2xlbiIsImFyZ3VtZW50cyIsImxlbmd0aCIsImFyZ3MiLCJBcnJheSIsIl9rZXkiLCJjYWxsIiwiYXBwbHkiLCJjb25jYXQiLCJfYmdtIiwiX3NmeCIsIl9pbmhlcml0c0xvb3NlIiwiX3Byb3RvIiwicHJvdG90eXBlIiwib25Mb2FkIiwiaW5zdGFuY2UiLCJ0aGlzIiwiZGlyZWN0b3IiLCJhZGRQZXJzaXN0Um9vdE5vZGUiLCJub2RlIiwiYWRkQ29tcG9uZW50IiwiQXVkaW9Tb3VyY2UiLCJ2b2x1bWUiLCJwbGF5QkdNIiwiX3RoaXMyIiwicmVzb3VyY2VzIiwibG9hZCIsIkF1ZGlvQ2xpcCIsImVyciIsImNsaXAiLCJjb25zb2xlIiwiZXJyb3IiLCJsb29wIiwicGxheSIsInBsYXlTRlgiLCJuYW1lIiwiX3RoaXMzIiwicGxheU9uZVNob3QiLCJDb21wb25lbnQiLCJfY2xhc3MiLCJfUkYiLCJwb3AiLCJfZGVjMiIsIk5vZGUiLCJfZGVjMyIsIl9kZXNjcmlwdG9yIiwiX2FwcGx5RGVjb3JhdGVkRGVzY3JpcHRvciIsIkNvbXBhc3NBbmltYXRpb24iLCJfaW5pdGlhbGl6ZXJEZWZpbmVQcm9wZXJ0eSIsIl9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQiLCJfZGVzY3JpcHRvcjIiLCJhbmdsZU1hcCIsIk4iLCJORSIsIkUiLCJTRSIsIlMiLCJTVyIsIlciLCJOVyIsInJvdGF0aW9uT2Zmc2V0IiwiYmxvdyIsImNob3NlbkRpcmVjdGlvbiIsIl90aGlzJGFuZ2xlTWFwJGNob3NlbiIsInBzIiwid2luZEVmZmVjdCIsImdldENvbXBvbmVudCIsIlBhcnRpY2xlU3lzdGVtMkQiLCJhbmdsZSIsInJlc2V0U3lzdGVtIiwicG9pbnRBbmltYXRlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJfdGhpczIkYW5nbGVNYXAkY2hvc2UiLCJ0YXJnZXRBbmdsZSIsIklkZWxBbmltYXRpb25zIiwic3RvcElkbGUiLCJwb2ludGVyIiwidHdlZW4iLCJ0byIsImVhc2luZyIsImlkbGVDb21wYXNzIiwic3RhcnQiLCJwYXRjaEFuaW1hdGUiLCJfcGF0Y2hBbmltYXRlIiwiX2FzeW5jVG9HZW5lcmF0b3IiLCJfcmVnZW5lcmF0b3JSdW50aW1lIiwibWFyayIsIl9jYWxsZWUiLCJ3cmFwIiwiX2NvbnRleHQiLCJwcmV2IiwibmV4dCIsIkVmZmVjdHNIZWxwZXIiLCJib3VuY2VTY2FsZSIsInN0b3AiLCJfeCIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJ3cml0YWJsZSIsImluaXRpYWxpemVyIiwiRGlyZWN0aW9uIiwiU3ByaXRlIiwiQ29tcGFzc0NvbnRyb2xsZXIiLCJhbGxEaXJlY3Rpb25zIiwidXNlZERpcmVjdGlvbnMiLCJoaWRlQWxsQ292ZXJzIiwiX3N0ZXAiLCJfaXRlcmF0b3IiLCJfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlIiwiY292ZXJTcHJpdGVzIiwiZG9uZSIsInZhbHVlIiwiYWN0aXZlIiwic2hvd0NvdmVyIiwiX3Nob3dDb3ZlciIsImQiLCJjb21wYXNzQW5pbWF0aW9uIiwiYXV0b0Jsb3dXaW5kIiwiX2F1dG9CbG93V2luZCIsIl9jYWxsZWUyIiwiX2l0ZXJhdG9yMiIsIl9zdGVwMiIsImF2YWlsYWJsZSIsInJhbmRvbURpciIsIl9jb250ZXh0MiIsImZpbHRlciIsImRpciIsImluY2x1ZGVzIiwiYWJydXB0IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwicHVzaCIsImVtaXQiLCJyZXNldCIsIm9wdGlvbnMiLCJfb3B0aW9ucyRkdXJhdGlvbiIsIl9vcHRpb25zJHNjYWxlIiwiZHVyYXRpb24iLCJzY2FsZSIsInNldFNjYWxlIiwiVmVjMyIsIkZsb3dlckFuaW1hdGlvbiIsInBsYW50IiwiZmxvd2VySW5kaWNhdG9yIiwidGFyZ2V0VGlsZSIsInN0YXJ0V29ybGRQb3MiLCJnZXRXb3JsZFBvc2l0aW9uIiwiZW5kV29ybGRQb3MiLCJmbHlGbG93ZXIiLCJzZXRXb3JsZFBvc2l0aW9uIiwibWlkZGxlIiwiY2xvbmUiLCJ5IiwieCIsInBvc2l0aW9uIiwicGFyZW50IiwiVUlUcmFuc2Zvcm0iLCJjb252ZXJ0VG9Ob2RlU3BhY2VBUiIsIkZsb3dlckNvbnRyb2xsZXIiLCJmbG93ZXJJY29ucyIsIl9sYXN0Rmxvd2VySW5kZXgiLCJmbG93ZXJDb250YWluZXIiLCJjaGlsZHJlbiIsImluaXQiLCJjb3VudCIsImkiLCJpZGxlSW5kaWNhdG9yIiwiX3BsYW50IiwidGlsZSIsIl90aWxlJGdldENvbXBvbmVudCIsImZsb3dlciIsImZsb3dlckFuaW1hdGlvbiIsIlRpbGVDb250cm9sbGVyIiwic2V0Rmxvd2VyIiwiR2FtZVBoYXNlIiwiUGxhbnRDb250cm9sbGVyIiwiTGFiZWwiLCJfZGVjNCIsIlJlc3VsdFBvcHVwIiwiX2RlYzUiLCJfY2xhc3MzIiwiR2FtZU1hbmFnZXIiLCJjdXJyZW50Um91bmQiLCJtYXhSb3VuZHMiLCJpc0NsaWNrYWJsZSIsInBoYXNlIiwiUGxhbnRpbmciLCJfZGVzY3JpcHRvcjMiLCJfZGVzY3JpcHRvcjQiLCJpbml0R2FtZSIsIm9uIiwiY3VycmVudExldmVsIiwicGFyc2VJbnQiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiY29uZmlnIiwiZ2V0TGV2ZWxDb25maWciLCJ3aW5kQ291bnQiLCJwbGFudENvbnRyb2xsZXIiLCJyb3dzIiwicmVzZXRHYW1lIiwiY29tcGFzc0NvbnRyb2xsZXIiLCJlbnRlclBsYW50aW5nUGhhc2UiLCJuZXh0TGV2ZWwiLCJsZXZlbCIsInNldEl0ZW0iLCJ0b1N0cmluZyIsInNldFBoYXNlIiwiZW50ZXJCbG93aW5nUGhhc2UiLCJjaGVja01lZGl1bVJlc3VsdCIsIkJsb3dpbmciLCJzZXRUaW1lb3V0IiwiX2Jsb3ciLCJkaXJlY3Rpb24iLCJjaGVja1JvdW5kUmVzdWx0IiwiX3gyIiwiZiIsImluc3RydWN0aW9uTGFiZWwiLCJzdHJpbmciLCJHYW1lT3ZlciIsIl9jaGVja1JvdW5kUmVzdWx0IiwiX2NhbGxlZTMiLCJhbGxDb3ZlcmVkIiwiX2NvbnRleHQzIiwiaXNCb2FyZEZ1bGx5Q292ZXJlZCIsInJvdW5kT3ZlciIsInNob3dSZXN1bHQiLCJfc2hvd1Jlc3VsdCIsIl9jYWxsZWU0IiwiaXNXaW4iLCJfY29udGV4dDQiLCJyZXN1bHRQb3B1cCIsInNob3dXaW4iLCJfeDMiLCJQcmVmYWIiLCJHcmlkQW5pbWF0aW9uIiwic2VlZEZseSIsImZyb21UaWxlIiwidG9UaWxlIiwic2VlZEZseVByZWZhYiIsInNlZWQiLCJpbnN0YW50aWF0ZSIsImFkZENoaWxkIiwiY2FudmFzIiwiZ2V0U2NlbmUiLCJnZXRDaGlsZEJ5TmFtZSIsInN0YXJ0UG9zIiwiZW5kUG9zIiwiY29udHJvbFBvcyIsImxlcnAiLCJzdGFydExvY2FsIiwiY29udHJvbExvY2FsIiwiZW5kTG9jYWwiLCJzZXRQb3NpdGlvbiIsInQiLCJhbmdsZUVuZCIsIm9wYWNpdHlDb21wIiwiVUlPcGFjaXR5Iiwib3BhY2l0eSIsIm9uVXBkYXRlIiwidGltZSIsIm9uZU1pbnVzVCIsImRlc3Ryb3kiLCJESVJFQ1RJT05fT0ZGU0VUIiwiR3JpZENvbnRyb2xsZXIiLCJ0aWxlU2l6ZSIsInNwYWNpbmciLCJ0aWxlTm9kZXMiLCJncmlkU2l6ZSIsInJlbW92ZUFsbENoaWxkcmVuIiwic3RhcnRYIiwic3RhcnRZIiwiaiIsInRpbGVQcmVmYWIiLCJzZXRFbXB0eSIsIl90bXAiLCJfbG9vcCIsImlzU2VlZCIsInNjaGVkdWxlT25jZSIsInNldEZpbmFsRmxvd2VyIiwiYmxvd1NlZWRzIiwidHdlZW5zIiwiX0RJUkVDVElPTl9PRkZTRVQkZGlyIiwiZHgiLCJkeSIsImlzRmxvd2VyIiwiX2xvb3AyIiwicCIsImdyaWRBbmltYXRpb24iLCJ0aGVuIiwic2V0U2VlZCIsImluQm91bmRzIiwiYWxsIiwicm93IiwiaXNFbXB0eSIsImlkbGVDbG91ZCIsImNsb3VkRmFjZSIsImZpbmQiLCJyZXBlYXRGb3JldmVyIiwiYnkiLCJkZWxheSIsImlkbGVUaWxlRmxvd2VyIiwiaWRsZVRpbGVTZWVkIiwibGV2ZWxJbmRleCIsIkxldmVsQ29uZmlncyIsIm1pbiIsImNvbHMiLCJWaWN0b3J5UGFydGljbGUiLCJjdXJyZW50Q291bnQiLCJmbG93ZXJDb250cm9sbGVyIiwiZ3JpZENvbnRyb2xsZXIiLCJfcm91bmRPdmVyIiwiQnV0dG9uIiwiUmVzdWx0UG9wdXBBbmltYXRpb24iLCJfb25SZXN0YXJ0IiwicmVzdGFydEJ1dHRvbiIsIkV2ZW50VHlwZSIsIkNMSUNLIiwiX3Nob3dXaW4iLCJvblJlc3RhcnQiLCJsYWJlbE5vZGUiLCJsYWJlbCIsInRpdGxlTGFiZWwiLCJkZXNjTGFiZWwiLCJhbmltYXRpb24iLCJzdWJfbm9kZSIsInNob3dWaWN0b3J5UGFydGljbGVzIiwid2FpdCIsInNwIiwiU2tlbGV0b24iLCJzZXRBbmltYXRpb24iLCJwb3B1cFJlc3VsdFBhbmVsIiwidmljdG9yeVBhcnRpY2xlUHJlZmFiIiwiX3BvcHVwUmVzdWx0UGFuZWwiLCJhc3luY0dlbmVyYXRvclN0ZXAiLCJnZW4iLCJyZWplY3QiLCJfbmV4dCIsIl90aHJvdyIsImtleSIsImFyZyIsImluZm8iLCJfc2V0UHJvdG90eXBlT2YiLCJvIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJiaW5kIiwiX19wcm90b19fIiwiX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5IiwibWluTGVuIiwiX2FycmF5TGlrZVRvQXJyYXkiLCJuIiwic2xpY2UiLCJjb25zdHJ1Y3RvciIsImZyb20iLCJ0ZXN0IiwiYXJyIiwibGVuIiwiYXJyMiIsInRhcmdldCIsImRlY29yYXRvcnMiLCJkZXNjcmlwdG9yIiwiY29udGV4dCIsImRlc2MiLCJrZXlzIiwiZm9yRWFjaCIsInJldmVyc2UiLCJyZWR1Y2UiLCJkZWNvcmF0b3IiLCJ1bmRlZmluZWQiLCJkZWZpbmVQcm9wZXJ0eSIsInNlbGYiLCJSZWZlcmVuY2VFcnJvciIsImZuIiwiYWxsb3dBcnJheUxpa2UiLCJpdCIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiaXNBcnJheSIsIlR5cGVFcnJvciIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsImNyZWF0ZSIsImUiLCJyIiwiaGFzT3duUHJvcGVydHkiLCJhIiwiYyIsImFzeW5jSXRlcmF0b3IiLCJ1IiwidG9TdHJpbmdUYWciLCJkZWZpbmUiLCJHZW5lcmF0b3IiLCJDb250ZXh0IiwibWFrZUludm9rZU1ldGhvZCIsInRyeUNhdGNoIiwidHlwZSIsImgiLCJzIiwiR2VuZXJhdG9yRnVuY3Rpb24iLCJHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSIsImdldFByb3RvdHlwZU9mIiwidiIsInZhbHVlcyIsImciLCJkZWZpbmVJdGVyYXRvck1ldGhvZHMiLCJfaW52b2tlIiwiQXN5bmNJdGVyYXRvciIsImludm9rZSIsIl9fYXdhaXQiLCJjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZyIsIkVycm9yIiwibWV0aG9kIiwiZGVsZWdhdGUiLCJtYXliZUludm9rZURlbGVnYXRlIiwic2VudCIsIl9zZW50IiwiZGlzcGF0Y2hFeGNlcHRpb24iLCJyZXR1cm4iLCJyZXN1bHROYW1lIiwibmV4dExvYyIsInB1c2hUcnlFbnRyeSIsInRyeUxvYyIsImNhdGNoTG9jIiwiZmluYWxseUxvYyIsImFmdGVyTG9jIiwidHJ5RW50cmllcyIsInJlc2V0VHJ5RW50cnkiLCJjb21wbGV0aW9uIiwiaXNOYU4iLCJkaXNwbGF5TmFtZSIsImlzR2VuZXJhdG9yRnVuY3Rpb24iLCJhd3JhcCIsImFzeW5jIiwiY2hhckF0IiwicnZhbCIsImhhbmRsZSIsImNvbXBsZXRlIiwiZmluaXNoIiwiY2F0Y2giLCJkZWxlZ2F0ZVlpZWxkIiwiU2NlbmVTd2l0Y2hBbmltYXRpb24iLCJ1cGRhdGUiLCJkZWx0YVRpbWUiLCJ1aU9wYWNpdHkiLCJyb290Tm9kZSIsIlN0YXJ0TWFuYWdlciIsIm9uU3RhcnRHYW1lIiwiX29uU3RhcnRHYW1lIiwic2NlbmVBbmltYXRpb24iLCJsb2FkU2NlbmUiLCJUaWxlQW5pbWF0aW9uIiwic3dpdGNoVG9GbG93ZXIiLCJfc3dpdGNoVG9GbG93ZXIiLCJDZWxsU3RhdGUiLCJzdGF0ZSIsIkVtcHR5IiwibWFza1Nwcml0ZU5vZGUiLCJmbG93ZXJTcHJpdGVOb2RlIiwic2VlZFNwcml0ZU5vZGUiLCJkYW5kZWxpb25TcHJpdGVOb2RlIiwidXBkYXRlVmlzdWFsIiwiVE9VQ0hfRU5EIiwib25DbGljayIsIlNlZWQiLCJEYW5kZWxpb24iLCJ0aWxlQW5pbWF0aW9uIiwibXMiLCJUaW1lbGluZUhlbHBlciIsInJ1biIsIl9ydW4iLCJzdGVwcyIsImRlbGF5QmV0d2VlblN0ZXBzIiwic3RlcCIsInJ1bldpdGhEZWxheXMiLCJfcnVuV2l0aERlbGF5cyIsInN0ZXBUdXBsZXMiLCJfc3RlcDIkdmFsdWUiXSwibWFwcGluZ3MiOiI4WEFVQSxJQUFRQSxFQUFzQkMsRUFBdEJELFFBQXNCQyxFQUFiQyx5QkFFaEJGLEVBQVEsY0FBY0csR0FBQUMsV0FBQUMsR0FBQSxTQUFBQyxJQUFBLElBQUEsSUFBQUMsRUFBQUMsRUFBQUMsVUFBQUMsT0FBQUMsTUFBQUMsTUFBQUosR0FBQUssSUFBQUEsRUFBQUwsRUFBQUssSUFBQUYsRUFBQUUsR0FBQUosVUFBQUksR0FLUCxPQUxPTixFQUFBRixFQUFBUyxLQUFBQyxNQUFBVixTQUFBVyxPQUFBTCxXQUlYTSxZQUFJVixFQUNKVyxZQUFJWCxFQUxPWSxFQUFBYixFQUFBRCxHQUtQLElBQUFlLEVBQUFkLEVBQUFlLFVBMkJYLE9BM0JXRCxFQUVaRSxPQUFBLFdBQ0loQixFQUFZaUIsU0FBV0MsS0FDdkJDLEVBQVNDLG1CQUFtQkYsS0FBS0csTUFHakNILEtBQUtQLEtBQU9PLEtBQUtHLEtBQUtDLGFBQWFDLEdBQ25DTCxLQUFLUCxLQUFLYSxPQUFTLEdBQ25CTixLQUFLTixLQUFPTSxLQUFLRyxLQUFLQyxhQUFhQyxHQUNuQ0wsS0FBS04sS0FBS1ksT0FBUyxHQUN0QlYsRUFFRFcsUUFBQSxXQUFVLElBQUFDLE9BQ05DLEVBQVVDLEtBQUssYUFBY0MsR0FBVyxTQUFDQyxFQUFLQyxHQUMxQyxHQUFJRCxFQUFLLE9BQU9FLFFBQVFDLE1BQU1ILEdBQzlCSixFQUFLZixLQUFLb0IsS0FBT0EsRUFDakJMLEVBQUtmLEtBQUt1QixNQUFPLEVBQ2pCUixFQUFLZixLQUFLd0IsV0FFakJyQixFQUVEc0IsUUFBQSxTQUFRQyxHQUFjLElBQUFDLE9BQ2xCWCxFQUFVQyxlQUFlUyxFQUFRUixHQUFXLFNBQUNDLEVBQUtDLEdBQzlD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eUgsR0FBQSxPQUFBK1AsRUFBQWpkLFdBQUFOLGVBQUFxZCxFQUVNN0ksS0FBUCxTQUFZNEksR0FDUixPQUFPLElBQUk5WSxTQUFRLFNBQUNDLEdBQU8sT0FBSzZJLFdBQVc3SSxFQUFTNlksT0FDdkRDLEVBRVlNLHlCQUFhLElBQUFDLEVBQUF4WSxFQUFBQyxJQUFBQyxNQUExQixTQUFBaUMsRUFDSXNXLEdBQW1ELElBQUFyVyxFQUFBQyxFQUFBcVcsRUFBQUosRUFBQTdLLEVBQUEsT0FBQXhOLElBQUFHLGVBQUFvQyxHQUFBLGNBQUFBLEVBQUFsQyxLQUFBa0MsRUFBQWpDLE1BQUEsT0FBQTZCLEVBQUFaLEVBRXZCaVgsR0FBVSxPQUFBLElBQUFwVyxFQUFBRCxLQUFBVixNQUFBYyxFQUFBakMsUUFBQSxNQUFmLE9BQWVtWSxFQUFBclcsRUFBQVYsTUFBMUIyVyxFQUFJSSxLQUFFakwsRUFBS2lMLEtBQUFsVyxFQUFBakMsT0FDYitYLElBQU0sT0FBQSxRQUNFeEcsSUFBVnJFLEdBQW1CakwsRUFBQWpDLE9BQUEsTUFBQSxPQUFBaUMsRUFBQWpDLE9BQ2I1RSxLQUFLeVQsS0FBSzNCLEdBQU0sT0FBQWpMLEVBQUFqQyxPQUFBLE1BQUEsUUFBQSxVQUFBLE9BQUFpQyxFQUFBOUIsVUFBQXlCLFlBR2pDLE9BQUEsU0FBQW1ILEdBQUEsT0FBQWtQLEVBQUF0ZCxXQUFBTixlQUFBcWQsUUFNSjlhLElBQUFDIiwiZmlsZSI6ImFsbC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGFzc2V0cy9TY3JpcHRzL0F1ZGlvTWFuYWdlci50c1xyXG5cclxuaW1wb3J0IHtcclxuICAgIF9kZWNvcmF0b3IsXHJcbiAgICBDb21wb25lbnQsXHJcbiAgICBBdWRpb1NvdXJjZSxcclxuICAgIHJlc291cmNlcyxcclxuICAgIEF1ZGlvQ2xpcCxcclxuICAgIGRpcmVjdG9yLFxyXG59IGZyb20gXCJjY1wiO1xyXG5jb25zdCB7IGNjY2xhc3MsIHByb3BlcnR5IH0gPSBfZGVjb3JhdG9yO1xyXG5cclxuQGNjY2xhc3MoXCJBdWRpb0hlbHBlclwiKVxyXG5leHBvcnQgY2xhc3MgQXVkaW9IZWxwZXIgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgcHVibGljIHN0YXRpYyBpbnN0YW5jZTogQXVkaW9IZWxwZXI7XHJcblxyXG4gICAgcHJpdmF0ZSBfYmdtOiBBdWRpb1NvdXJjZTtcclxuICAgIHByaXZhdGUgX3NmeDogQXVkaW9Tb3VyY2U7XHJcblxyXG4gICAgb25Mb2FkKCkge1xyXG4gICAgICAgIEF1ZGlvSGVscGVyLmluc3RhbmNlID0gdGhpcztcclxuICAgICAgICBkaXJlY3Rvci5hZGRQZXJzaXN0Um9vdE5vZGUodGhpcy5ub2RlKTtcclxuXHJcbiAgICAgICAgLy8g5re75Yqg5Lik5LiqIEF1ZGlvU291cmNlXHJcbiAgICAgICAgdGhpcy5fYmdtID0gdGhpcy5ub2RlLmFkZENvbXBvbmVudChBdWRpb1NvdXJjZSk7XHJcbiAgICAgICAgdGhpcy5fYmdtLnZvbHVtZSA9IDAuNTtcclxuICAgICAgICB0aGlzLl9zZnggPSB0aGlzLm5vZGUuYWRkQ29tcG9uZW50KEF1ZGlvU291cmNlKTtcclxuICAgICAgICB0aGlzLl9zZngudm9sdW1lID0gMTtcclxuICAgIH1cclxuXHJcbiAgICBwbGF5QkdNKCkge1xyXG4gICAgICAgIHJlc291cmNlcy5sb2FkKFwiU291bmRzL2JnbVwiLCBBdWRpb0NsaXAsIChlcnIsIGNsaXApID0+IHtcclxuICAgICAgICAgICAgaWYgKGVycikgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICAgICAgdGhpcy5fYmdtLmNsaXAgPSBjbGlwITtcclxuICAgICAgICAgICAgdGhpcy5fYmdtLmxvb3AgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLl9iZ20ucGxheSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHBsYXlTRlgobmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgcmVzb3VyY2VzLmxvYWQoYFNvdW5kcy8ke25hbWV9YCwgQXVkaW9DbGlwLCAoZXJyLCBjbGlwKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpIHJldHVybiBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgICAgIHRoaXMuX3NmeC5wbGF5T25lU2hvdChjbGlwISk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgX2RlY29yYXRvciwgQ29tcG9uZW50LCBOb2RlLCB0d2VlbiwgUGFydGljbGVTeXN0ZW0yRCwgVmVjMyB9IGZyb20gXCJjY1wiO1xyXG5jb25zdCB7IGNjY2xhc3MsIHByb3BlcnR5IH0gPSBfZGVjb3JhdG9yO1xyXG5cclxuaW1wb3J0IHsgQXVkaW9IZWxwZXIgfSBmcm9tIFwiLi4vLi4vLi4vVXRpbHMvQXVkaW9IZWxwZXJcIjtcclxuaW1wb3J0IHsgSWRlbEFuaW1hdGlvbnMgfSBmcm9tIFwiLi9JZGxlQW5pbWF0aW9uc1wiO1xyXG5pbXBvcnQgeyBFZmZlY3RzSGVscGVyIH0gZnJvbSBcIi4uLy4uLy4uL0VmZmVjdHMvRWZmZWN0c0hlbHBlclwiO1xyXG5AY2NjbGFzcyhcIkNvbXBhc3NBbmltYXRpb25cIilcclxuZXhwb3J0IGNsYXNzIENvbXBhc3NBbmltYXRpb24gZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgQHByb3BlcnR5KE5vZGUpXHJcbiAgICBwb2ludGVyOiBOb2RlID0gbnVsbDtcclxuXHJcbiAgICBAcHJvcGVydHkoTm9kZSlcclxuICAgIHdpbmRFZmZlY3Q6IE5vZGUgPSBudWxsO1xyXG5cclxuICAgIHByaXZhdGUgYW5nbGVNYXAgPSB7XHJcbiAgICAgICAgTjogMCxcclxuICAgICAgICBORTogMzE1LFxyXG4gICAgICAgIEU6IDI3MCxcclxuICAgICAgICBTRTogMjI1LFxyXG4gICAgICAgIFM6IDE4MCxcclxuICAgICAgICBTVzogMTM1LFxyXG4gICAgICAgIFc6IDkwLFxyXG4gICAgICAgIE5XOiA0NSxcclxuICAgIH07XHJcbiAgICBwcml2YXRlIHJvdGF0aW9uT2Zmc2V0ID0gMDtcclxuXHJcbiAgICBibG93KGNob3NlbkRpcmVjdGlvbjogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgcHMgPSB0aGlzLndpbmRFZmZlY3QuZ2V0Q29tcG9uZW50KFBhcnRpY2xlU3lzdGVtMkQpO1xyXG4gICAgICAgIGNvbnN0IGFuZ2xlID0gdGhpcy5hbmdsZU1hcFtjaG9zZW5EaXJlY3Rpb25dID8/IDA7XHJcbiAgICAgICAgcHMuYW5nbGUgPSBhbmdsZSArIDE4MDsgLy8g5q+U5aaC5LuOIE5XIOWQueWQkSBTRVxyXG4gICAgICAgIHBzLnJlc2V0U3lzdGVtKCk7IC8vIOaSreaUvuS4gOasoVxyXG4gICAgfVxyXG5cclxuICAgIHBvaW50QW5pbWF0ZShjaG9zZW5EaXJlY3Rpb246IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgICBBdWRpb0hlbHBlci5pbnN0YW5jZS5wbGF5U0ZYKFwic3BpblwiKTtcclxuICAgICAgICAgICAgY29uc3QgZmluYWxBbmdsZSA9IHRoaXMuYW5nbGVNYXBbY2hvc2VuRGlyZWN0aW9uXSA/PyAwO1xyXG4gICAgICAgICAgICBjb25zdCBmdWxsU3BpbiA9IDM2MCAqIDI7IC8vIOWPr+S7peWkmuWciFxyXG4gICAgICAgICAgICBsZXQgdGFyZ2V0QW5nbGUgPSBmaW5hbEFuZ2xlICsgZnVsbFNwaW4gKyB0aGlzLnJvdGF0aW9uT2Zmc2V0O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yb3RhdGlvbk9mZnNldCArPSBmdWxsU3BpbjtcclxuXHJcbiAgICAgICAgICAgIElkZWxBbmltYXRpb25zLmluc3RhbmNlLnN0b3BJZGxlKHRoaXMucG9pbnRlcik7XHJcblxyXG4gICAgICAgICAgICB0d2Vlbih0aGlzLnBvaW50ZXIpXHJcbiAgICAgICAgICAgICAgICAudG8oMy4wLCB7IGFuZ2xlOiB0YXJnZXRBbmdsZSB9LCB7IGVhc2luZzogXCJjdWJpY091dFwiIH0pXHJcbiAgICAgICAgICAgICAgICAuY2FsbCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgQXVkaW9IZWxwZXIuaW5zdGFuY2UucGxheVNGWChcImJsb3dpbmdcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgSWRlbEFuaW1hdGlvbnMuaW5zdGFuY2UuaWRsZUNvbXBhc3MoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnN0YXJ0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcGF0Y2hBbmltYXRlKG5vZGU6IE5vZGUpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBhd2FpdCBFZmZlY3RzSGVscGVyLmJvdW5jZVNjYWxlKG5vZGUpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IF9kZWNvcmF0b3IsIENvbXBvbmVudCwgZGlyZWN0b3IsIGZpbmQsIFNwcml0ZSB9IGZyb20gXCJjY1wiO1xyXG5jb25zdCB7IGNjY2xhc3MsIHByb3BlcnR5IH0gPSBfZGVjb3JhdG9yO1xyXG5cclxuaW1wb3J0IHsgQ29tcGFzc0FuaW1hdGlvbiB9IGZyb20gXCIuLi9GWC9Db21wYXNzQW5pbWF0aW9uXCI7XHJcblxyXG5lbnVtIERpcmVjdGlvbiB7XHJcbiAgICBOID0gMCxcclxuICAgIE5FID0gMSxcclxuICAgIEUgPSAyLFxyXG4gICAgU0UgPSAzLFxyXG4gICAgUyA9IDQsXHJcbiAgICBTVyA9IDUsXHJcbiAgICBXID0gNixcclxuICAgIE5XID0gNyxcclxufVxyXG5cclxuQGNjY2xhc3MoXCJDb21wYXNzQ29udHJvbGxlclwiKVxyXG5leHBvcnQgY2xhc3MgQ29tcGFzc0NvbnRyb2xsZXIgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgQHByb3BlcnR5KENvbXBhc3NBbmltYXRpb24pXHJcbiAgICBjb21wYXNzQW5pbWF0aW9uOiBDb21wYXNzQW5pbWF0aW9uID0gbnVsbDtcclxuXHJcbiAgICBAcHJvcGVydHkoW1Nwcml0ZV0pXHJcbiAgICBjb3ZlclNwcml0ZXM6IFNwcml0ZVtdID0gW107XHJcblxyXG4gICAgcHJpdmF0ZSBhbGxEaXJlY3Rpb25zID0gW1xyXG4gICAgICAgIERpcmVjdGlvbi5OLFxyXG4gICAgICAgIERpcmVjdGlvbi5ORSxcclxuICAgICAgICBEaXJlY3Rpb24uRSxcclxuICAgICAgICBEaXJlY3Rpb24uU0UsXHJcbiAgICAgICAgRGlyZWN0aW9uLlMsXHJcbiAgICAgICAgRGlyZWN0aW9uLlNXLFxyXG4gICAgICAgIERpcmVjdGlvbi5XLFxyXG4gICAgICAgIERpcmVjdGlvbi5OVyxcclxuICAgIF07XHJcbiAgICBwcml2YXRlIHVzZWREaXJlY3Rpb25zOiBEaXJlY3Rpb25bXSA9IFtdOyAvLyDkvovlpoI6IFsnTicsICdTVyddXHJcblxyXG4gICAgc3RhcnQoKSB7fVxyXG5cclxuICAgIGhpZGVBbGxDb3ZlcnMoKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBzcHJpdGUgb2YgdGhpcy5jb3ZlclNwcml0ZXMpIHtcclxuICAgICAgICAgICAgc3ByaXRlLm5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNob3dDb3ZlcihkOiBEaXJlY3Rpb24pIHtcclxuICAgICAgICBsZXQgbm9kZSA9IHRoaXMuY292ZXJTcHJpdGVzW2RdLm5vZGU7XHJcbiAgICAgICAgaWYgKG5vZGUuYWN0aXZlID09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIG5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jb21wYXNzQW5pbWF0aW9uLnBhdGNoQW5pbWF0ZShub2RlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgYXV0b0Jsb3dXaW5kKCkge1xyXG4gICAgICAgIGZvciAobGV0IGQgb2YgdGhpcy51c2VkRGlyZWN0aW9ucykge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNob3dDb3ZlcihkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGF2YWlsYWJsZSA9IHRoaXMuYWxsRGlyZWN0aW9ucy5maWx0ZXIoXHJcbiAgICAgICAgICAgIChkaXIpID0+ICF0aGlzLnVzZWREaXJlY3Rpb25zLmluY2x1ZGVzKGRpcilcclxuICAgICAgICApO1xyXG4gICAgICAgIGlmIChhdmFpbGFibGUubGVuZ3RoID09PSAwKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IHJhbmRvbURpciA9XHJcbiAgICAgICAgICAgIGF2YWlsYWJsZVtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhdmFpbGFibGUubGVuZ3RoKV07XHJcbiAgICAgICAgdGhpcy51c2VkRGlyZWN0aW9ucy5wdXNoKHJhbmRvbURpcik7XHJcblxyXG4gICAgICAgIGF3YWl0IHRoaXMuY29tcGFzc0FuaW1hdGlvbi5wb2ludEFuaW1hdGUoRGlyZWN0aW9uW3JhbmRvbURpcl0pO1xyXG4gICAgICAgIHRoaXMuY29tcGFzc0FuaW1hdGlvbi5ibG93KERpcmVjdGlvbltyYW5kb21EaXJdKTtcclxuXHJcbiAgICAgICAgZGlyZWN0b3IuZW1pdChcIldJTkRfQkxPV1wiLCBEaXJlY3Rpb25bcmFuZG9tRGlyXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzZXQoKSB7XHJcbiAgICAgICAgdGhpcy51c2VkRGlyZWN0aW9ucyA9IFtdO1xyXG4gICAgICAgIHRoaXMuaGlkZUFsbENvdmVycygpO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vIFNjcmlwdHMvRWZmZWN0cy9FZmZlY3RzSGVscGVyLnRzXHJcbmltcG9ydCB7IE5vZGUsIFZlYzMsIHR3ZWVuIH0gZnJvbSBcImNjXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgRWZmZWN0c0hlbHBlciB7XHJcbiAgICBzdGF0aWMgYm91bmNlU2NhbGUoXHJcbiAgICAgICAgbm9kZTogTm9kZSxcclxuICAgICAgICBvcHRpb25zOiB7IGR1cmF0aW9uPzogbnVtYmVyOyBzY2FsZT86IG51bWJlciB9ID0ge31cclxuICAgICk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkdXJhdGlvbiA9IG9wdGlvbnMuZHVyYXRpb24gPz8gMC4yNTtcclxuICAgICAgICAgICAgY29uc3QgYm91bmNlU2NhbGUgPSBvcHRpb25zLnNjYWxlID8/IDEuMjtcclxuXHJcbiAgICAgICAgICAgIG5vZGUuc2V0U2NhbGUobmV3IFZlYzMoMC41LCAwLjUsIDEpKTsgLy8g5Yid5aeL57yp5bCPXHJcbiAgICAgICAgICAgIG5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHR3ZWVuKG5vZGUpXHJcbiAgICAgICAgICAgICAgICAudG8oXHJcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBzY2FsZTogbmV3IFZlYzMoYm91bmNlU2NhbGUsIGJvdW5jZVNjYWxlLCAxKSB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsgZWFzaW5nOiBcImJhY2tPdXRcIiB9XHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAudG8oMC4xLCB7IHNjYWxlOiBuZXcgVmVjMygxLCAxLCAxKSB9LCB7IGVhc2luZzogXCJzaW5lSW5cIiB9KVxyXG4gICAgICAgICAgICAgICAgLmNhbGwoKCkgPT4gcmVzb2x2ZSgpKVxyXG4gICAgICAgICAgICAgICAgLnN0YXJ0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgX2RlY29yYXRvciwgQ29tcG9uZW50LCBOb2RlLCB0d2VlbiwgVmVjMywgVUlUcmFuc2Zvcm0gfSBmcm9tIFwiY2NcIjtcclxuY29uc3QgeyBjY2NsYXNzLCBwcm9wZXJ0eSB9ID0gX2RlY29yYXRvcjtcclxuaW1wb3J0IHsgQXVkaW9IZWxwZXIgfSBmcm9tIFwiLi4vLi4vLi4vVXRpbHMvQXVkaW9IZWxwZXJcIjtcclxuXHJcbkBjY2NsYXNzKFwiRmxvd2VyQW5pbWF0aW9uXCIpXHJcbmV4cG9ydCBjbGFzcyBGbG93ZXJBbmltYXRpb24gZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgQHByb3BlcnR5KE5vZGUpXHJcbiAgICBmbHlGbG93ZXI6IE5vZGUgPSBudWxsO1xyXG5cclxuICAgIHBsYW50KGZsb3dlckluZGljYXRvcjogTm9kZSwgdGFyZ2V0VGlsZTogTm9kZSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgICBBdWRpb0hlbHBlci5pbnN0YW5jZS5wbGF5U0ZYKFwiYnViYmxlLXBvcFwiKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0V29ybGRQb3MgPSBmbG93ZXJJbmRpY2F0b3IuZ2V0V29ybGRQb3NpdGlvbigpO1xyXG4gICAgICAgICAgICBjb25zdCBlbmRXb3JsZFBvcyA9IHRhcmdldFRpbGUuZ2V0V29ybGRQb3NpdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgLy8g5oqKIGZseUZsb3dlciDmv4DmtLvlubborr7nva7liLDotbfngrlcclxuICAgICAgICAgICAgdGhpcy5mbHlGbG93ZXIuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5mbHlGbG93ZXIuc2V0V29ybGRQb3NpdGlvbihzdGFydFdvcmxkUG9zKTtcclxuXHJcbiAgICAgICAgICAgIC8vIOiuoeeul+S4remXtOmrmOeCuVxyXG4gICAgICAgICAgICBjb25zdCBtaWRkbGUgPSBzdGFydFdvcmxkUG9zLmNsb25lKCk7XHJcbiAgICAgICAgICAgIG1pZGRsZS55ICs9IDEwOyAvLyDkvaDlj6/ku6XosIPpq5jluqZcclxuICAgICAgICAgICAgbWlkZGxlLnggKz0gMTA7XHJcblxyXG4gICAgICAgICAgICAvLyDmkq3mlL4gdHdlZW4g5Yqo55S7XHJcbiAgICAgICAgICAgIHR3ZWVuKHRoaXMuZmx5Rmxvd2VyKVxyXG4gICAgICAgICAgICAgICAgLnRvKFxyXG4gICAgICAgICAgICAgICAgICAgIDAuMixcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiB0aGlzLmZseUZsb3dlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhcmVudCEuZ2V0Q29tcG9uZW50KFVJVHJhbnNmb3JtKSFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb252ZXJ0VG9Ob2RlU3BhY2VBUihtaWRkbGUpLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBlYXNpbmc6IFwicXVhZE91dFwiIH1cclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIC50byhcclxuICAgICAgICAgICAgICAgICAgICAwLjUsXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogdGhpcy5mbHlGbG93ZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYXJlbnQhLmdldENvbXBvbmVudChVSVRyYW5zZm9ybSkhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29udmVydFRvTm9kZVNwYWNlQVIoZW5kV29ybGRQb3MpLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBlYXNpbmc6IFwicXVhZEluT3V0XCIgfVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgLmNhbGwoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmx5Rmxvd2VyLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuc3RhcnQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBfZGVjb3JhdG9yLCBDb21wb25lbnQsIE5vZGUsIHR3ZWVuLCBWZWMzIH0gZnJvbSBcImNjXCI7XHJcbmNvbnN0IHsgY2NjbGFzcywgcHJvcGVydHkgfSA9IF9kZWNvcmF0b3I7XHJcbmltcG9ydCB7IEZsb3dlckFuaW1hdGlvbiB9IGZyb20gXCIuLi9GWC9GbG93ZXJBbmltYXRpb25cIjtcclxuaW1wb3J0IHsgVGlsZUNvbnRyb2xsZXIgfSBmcm9tIFwiLi9UaWxlQ29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBJZGVsQW5pbWF0aW9ucyB9IGZyb20gXCIuLi9GWC9JZGxlQW5pbWF0aW9uc1wiO1xyXG5cclxuQGNjY2xhc3MoXCJGbG93ZXJDb250cm9sbGVyXCIpXHJcbmV4cG9ydCBjbGFzcyBGbG93ZXJDb250cm9sbGVyIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIEBwcm9wZXJ0eShOb2RlKVxyXG4gICAgZmxvd2VyQ29udGFpbmVyOiBOb2RlID0gbnVsbDtcclxuXHJcbiAgICBAcHJvcGVydHkoRmxvd2VyQW5pbWF0aW9uKVxyXG4gICAgZmxvd2VyQW5pbWF0aW9uOiBGbG93ZXJBbmltYXRpb24gPSBudWxsO1xyXG5cclxuICAgIHByaXZhdGUgZmxvd2VySWNvbnM6IE5vZGVbXTsgLy8g5Yeg5Liq6Iqx5Zu+5qCH6IqC54K5XHJcbiAgICBwcml2YXRlIF9sYXN0Rmxvd2VySW5kZXggPSAxMCAtIDE7XHJcblxyXG4gICAgb25Mb2FkKCkge1xyXG4gICAgICAgIHRoaXMuZmxvd2VySWNvbnMgPSB0aGlzLmZsb3dlckNvbnRhaW5lci5jaGlsZHJlbjtcclxuICAgIH1cclxuXHJcbiAgICBpbml0KGNvdW50OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLl9sYXN0Rmxvd2VySW5kZXggPSBjb3VudCAtIDE7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmZsb3dlckljb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmxvd2VySWNvbnNbaV0uYWN0aXZlID0gaSA8IGNvdW50O1xyXG4gICAgICAgICAgICBpZiAoaSA8PSBjb3VudCAtIDEgJiYgdGhpcy5mbG93ZXJJY29uc1tpXS5hY3RpdmUpIHtcclxuICAgICAgICAgICAgICAgIElkZWxBbmltYXRpb25zLmluc3RhbmNlLmlkbGVJbmRpY2F0b3IodGhpcy5mbG93ZXJJY29uc1tpXSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyDlgZzmraLkuYvliY3nmoTliqjnlLtcclxuICAgICAgICAgICAgICAgIElkZWxBbmltYXRpb25zLmluc3RhbmNlLnN0b3BJZGxlKHRoaXMuZmxvd2VySWNvbnNbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHBsYW50KHRpbGU6IE5vZGUpIHtcclxuICAgICAgICBsZXQgZmxvd2VyID0gdGhpcy5mbG93ZXJJY29uc1t0aGlzLl9sYXN0Rmxvd2VySW5kZXgtLV07XHJcbiAgICAgICAgYXdhaXQgdGhpcy5mbG93ZXJBbmltYXRpb24ucGxhbnQoZmxvd2VyLCB0aWxlKTtcclxuXHJcbiAgICAgICAgZmxvd2VyLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIElkZWxBbmltYXRpb25zLmluc3RhbmNlLnN0b3BJZGxlKGZsb3dlcik7XHJcblxyXG4gICAgICAgIHRpbGUuZ2V0Q29tcG9uZW50KFRpbGVDb250cm9sbGVyKT8uc2V0Rmxvd2VyKCk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgX2RlY29yYXRvciwgQ29tcG9uZW50LCBMYWJlbCwgZGlyZWN0b3IsIE5vZGUgfSBmcm9tIFwiY2NcIjtcclxuaW1wb3J0IHsgUGxhbnRDb250cm9sbGVyIH0gZnJvbSBcIi4vQ29udHJvbGxlcnMvUGxhbnRDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IFJlc3VsdFBvcHVwIH0gZnJvbSBcIi4vQ29udHJvbGxlcnMvUmVzdWx0UG9wdXBcIjtcclxuaW1wb3J0IHsgZ2V0TGV2ZWxDb25maWcgfSBmcm9tIFwiLi9NYW5hZ2Vycy9MZXZlbE1hbmFnZXJcIjtcclxuaW1wb3J0IHsgQ29tcGFzc0NvbnRyb2xsZXIgfSBmcm9tIFwiLi9Db250cm9sbGVycy9Db21wYXNzQ29udHJvbGxlclwiO1xyXG5cclxuaW1wb3J0IHsgQXVkaW9IZWxwZXIgfSBmcm9tIFwiLi4vLi4vVXRpbHMvQXVkaW9IZWxwZXJcIjtcclxuXHJcbmNvbnN0IHsgY2NjbGFzcywgcHJvcGVydHkgfSA9IF9kZWNvcmF0b3I7XHJcblxyXG5lbnVtIEdhbWVQaGFzZSB7XHJcbiAgICBQbGFudGluZyxcclxuICAgIEJsb3dpbmcsXHJcbiAgICBHYW1lT3ZlcixcclxufVxyXG5cclxuQGNjY2xhc3MoXCJHYW1lTWFuYWdlclwiKVxyXG5leHBvcnQgY2xhc3MgR2FtZU1hbmFnZXIgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgc3RhdGljIGluc3RhbmNlOiBHYW1lTWFuYWdlcjtcclxuXHJcbiAgICBwcml2YXRlIGN1cnJlbnRSb3VuZCA9IDA7IC8vIDAgfiA2IOWFsSA3IOWxgFxyXG4gICAgcHJpdmF0ZSBtYXhSb3VuZHMgPSA3O1xyXG4gICAgcHJpdmF0ZSBpc0NsaWNrYWJsZSA9IHRydWU7XHJcbiAgICBwcml2YXRlIHBoYXNlOiBHYW1lUGhhc2UgPSBHYW1lUGhhc2UuUGxhbnRpbmc7XHJcblxyXG4gICAgQHByb3BlcnR5KFBsYW50Q29udHJvbGxlcilcclxuICAgIHBsYW50Q29udHJvbGxlcjogUGxhbnRDb250cm9sbGVyID0gbnVsbDtcclxuXHJcbiAgICBAcHJvcGVydHkoTGFiZWwpXHJcbiAgICBpbnN0cnVjdGlvbkxhYmVsOiBMYWJlbCA9IG51bGw7XHJcblxyXG4gICAgQHByb3BlcnR5KFJlc3VsdFBvcHVwKVxyXG4gICAgcmVzdWx0UG9wdXA6IFJlc3VsdFBvcHVwID0gbnVsbDtcclxuXHJcbiAgICBAcHJvcGVydHkoQ29tcGFzc0NvbnRyb2xsZXIpXHJcbiAgICBjb21wYXNzQ29udHJvbGxlcjogQ29tcGFzc0NvbnRyb2xsZXIgPSBudWxsO1xyXG5cclxuICAgIG9uTG9hZCgpIHtcclxuICAgICAgICBHYW1lTWFuYWdlci5pbnN0YW5jZSA9IHRoaXM7XHJcbiAgICAgICAgQXVkaW9IZWxwZXIuaW5zdGFuY2UucGxheUJHTSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXJ0KCkge1xyXG4gICAgICAgIHRoaXMuaW5pdEdhbWUoKTtcclxuICAgICAgICBkaXJlY3Rvci5vbihcIlRJTEVfQ0xJQ0tFRFwiLCB0aGlzLnBsYW50LCB0aGlzKTtcclxuICAgICAgICBkaXJlY3Rvci5vbihcIldJTkRfQkxPV1wiLCB0aGlzLmJsb3csIHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRHYW1lKCkge1xyXG4gICAgICAgIGxldCBjdXJyZW50TGV2ZWwgPSBwYXJzZUludChcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJjdXJyZW50TGV2ZWxcIikgfHwgXCIxXCJcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBsZXQgY29uZmlnID0gZ2V0TGV2ZWxDb25maWcoY3VycmVudExldmVsKTtcclxuXHJcbiAgICAgICAgdGhpcy5tYXhSb3VuZHMgPSBjb25maWcud2luZENvdW50O1xyXG4gICAgICAgIHRoaXMucGxhbnRDb250cm9sbGVyLmluaXQoY29uZmlnLnJvd3MsIGNvbmZpZy53aW5kQ291bnQpO1xyXG4gICAgICAgIHRoaXMucmVzZXRHYW1lKCk7XHJcblxyXG4gICAgICAgIC8vIHRoaXMuc2hvd1Jlc3VsdCh0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICByZXNldEdhbWUoKSB7XHJcbiAgICAgICAgLy8gMS4g5riF56m65qOL55uYXHJcbiAgICAgICAgdGhpcy5wbGFudENvbnRyb2xsZXIucmVzZXQoKTtcclxuICAgICAgICB0aGlzLmNvbXBhc3NDb250cm9sbGVyLnJlc2V0KCk7IC8vIOexu+S8vCByZXNldCgpXHJcbiAgICAgICAgdGhpcy5jdXJyZW50Um91bmQgPSAwO1xyXG4gICAgICAgIHRoaXMuZW50ZXJQbGFudGluZ1BoYXNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbmV4dExldmVsKCkge1xyXG4gICAgICAgIGxldCBsZXZlbCA9IHBhcnNlSW50KGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY3VycmVudExldmVsXCIpIHx8IFwiMVwiKTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImN1cnJlbnRMZXZlbFwiLCAobGV2ZWwgKyAxKS50b1N0cmluZygpKTtcclxuICAgICAgICB0aGlzLmluaXRHYW1lKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZW50ZXJQbGFudGluZ1BoYXNlKCkge1xyXG4gICAgICAgIHRoaXMuY3VycmVudFJvdW5kKys7XHJcbiAgICAgICAgdGhpcy5zZXRQaGFzZShHYW1lUGhhc2UuUGxhbnRpbmcpO1xyXG4gICAgfVxyXG5cclxuICAgIGVudGVyQmxvd2luZ1BoYXNlKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tNZWRpdW1SZXN1bHQoKTtcclxuICAgICAgICB0aGlzLnNldFBoYXNlKEdhbWVQaGFzZS5CbG93aW5nKTtcclxuICAgICAgICAvLyDnrYnlvoXpo47ngrnlh7tcclxuICAgICAgICB0aGlzLmNvbXBhc3NDb250cm9sbGVyLmF1dG9CbG93V2luZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHBsYW50KHRpbGU6IE5vZGUpIHtcclxuICAgICAgICBpZiAodGhpcy5waGFzZSA9PSBHYW1lUGhhc2UuUGxhbnRpbmcgJiYgdGhpcy5pc0NsaWNrYWJsZSkge1xyXG4gICAgICAgICAgICB0aGlzLmlzQ2xpY2thYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGxhbnRDb250cm9sbGVyLnBsYW50KHRpbGUpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW50ZXJCbG93aW5nUGhhc2UoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNDbGlja2FibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9LCAxMDAwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgYmxvdyhkaXJlY3Rpb246IHN0cmluZykge1xyXG4gICAgICAgIGlmICh0aGlzLnBoYXNlID09IEdhbWVQaGFzZS5CbG93aW5nKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGxhbnRDb250cm9sbGVyLmJsb3coZGlyZWN0aW9uKTtcclxuICAgICAgICAgICAgdGhpcy5jaGVja1JvdW5kUmVzdWx0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldFBoYXNlKGY6IEdhbWVQaGFzZSkge1xyXG4gICAgICAgIHRoaXMucGhhc2UgPSBmO1xyXG4gICAgICAgIHN3aXRjaCAoZikge1xyXG4gICAgICAgICAgICBjYXNlIEdhbWVQaGFzZS5QbGFudGluZzpcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25MYWJlbC5zdHJpbmcgPVxyXG4gICAgICAgICAgICAgICAgICAgIFwiQ2xpY2sgb24gYSB0aWxlIHRvIHBsYW50IGEgZGFuZGVsaW9uXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBHYW1lUGhhc2UuR2FtZU92ZXI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluc3RydWN0aW9uTGFiZWwuc3RyaW5nID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEdhbWVQaGFzZS5CbG93aW5nOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbnN0cnVjdGlvbkxhYmVsLnN0cmluZyA9XHJcbiAgICAgICAgICAgICAgICAgICAgXCJUYXAgYSBkaXJlY3Rpb24gb24gdGhlIGNvbXBhc3MgdG8gYmxvdyB0aGUgd2luZFwiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGNoZWNrUm91bmRSZXN1bHQoKSB7XHJcbiAgICAgICAgY29uc3QgYWxsQ292ZXJlZCA9IHRoaXMucGxhbnRDb250cm9sbGVyLmlzQm9hcmRGdWxseUNvdmVyZWQoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFJvdW5kID49IHRoaXMubWF4Um91bmRzIHx8IGFsbENvdmVyZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRQaGFzZShHYW1lUGhhc2UuR2FtZU92ZXIpO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsYW50Q29udHJvbGxlci5yb3VuZE92ZXIoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChhbGxDb3ZlcmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dSZXN1bHQodHJ1ZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dSZXN1bHQoZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5lbnRlclBsYW50aW5nUGhhc2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2hlY2tNZWRpdW1SZXN1bHQoKSB7XHJcbiAgICAgICAgY29uc3QgYWxsQ292ZXJlZCA9IHRoaXMucGxhbnRDb250cm9sbGVyLmlzQm9hcmRGdWxseUNvdmVyZWQoKTtcclxuXHJcbiAgICAgICAgaWYgKGFsbENvdmVyZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRQaGFzZShHYW1lUGhhc2UuR2FtZU92ZXIpO1xyXG4gICAgICAgICAgICB0aGlzLnNob3dSZXN1bHQodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNob3dSZXN1bHQoaXNXaW46IGJvb2xlYW4pIHtcclxuICAgICAgICBpc1dpbiA9IHRydWU7XHJcbiAgICAgICAgaWYgKGlzV2luKSB7XHJcbiAgICAgICAgICAgIC8vIGF3YWl0IHRoaXMucmVzdWx0UG9wdXAud2luKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVzdWx0UG9wdXAuc2hvd1dpbih0cnVlLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRMZXZlbCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0UG9wdXAuc2hvd1dpbihmYWxzZSwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXRHYW1lKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSwgMTAwMCk7IC8vIDEg56eS5ZCO5YaN5by55Ye65aSx6LSl5o+Q56S6XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7XHJcbiAgICBfZGVjb3JhdG9yLFxyXG4gICAgQ29tcG9uZW50LFxyXG4gICAgTm9kZSxcclxuICAgIGluc3RhbnRpYXRlLFxyXG4gICAgVUlPcGFjaXR5LFxyXG4gICAgZGlyZWN0b3IsXHJcbiAgICBQcmVmYWIsXHJcbiAgICBVSVRyYW5zZm9ybSxcclxuICAgIHR3ZWVuLFxyXG4gICAgVmVjMyxcclxuICAgIFBhcnRpY2xlU3lzdGVtMkQsXHJcbn0gZnJvbSBcImNjXCI7XHJcbmNvbnN0IHsgY2NjbGFzcywgcHJvcGVydHkgfSA9IF9kZWNvcmF0b3I7XHJcblxyXG5AY2NjbGFzcyhcIkdyaWRBbmltYXRpb25cIilcclxuZXhwb3J0IGNsYXNzIEdyaWRBbmltYXRpb24gZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgQHByb3BlcnR5KFByZWZhYilcclxuICAgIHNlZWRGbHlQcmVmYWI6IFByZWZhYiA9IG51bGw7XHJcblxyXG4gICAgQHByb3BlcnR5KE5vZGUpXHJcbiAgICB3aW5kRWZmZWN0OiBOb2RlID0gbnVsbDtcclxuXHJcbiAgICBzZWVkRmx5KGZyb21UaWxlOiBOb2RlLCB0b1RpbGU6IE5vZGUpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VlZEZseVByZWZhYikge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VlZCA9IGluc3RhbnRpYXRlKHRoaXMuc2VlZEZseVByZWZhYik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGUuYWRkQ2hpbGQoc2VlZCk7IC8vIOaMguWcqCBjYW52YXMg5oiWIGdyaWQg5LiK77yM5Yir5oyC5ZyoIHRpbGUg5LiLXHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgY2FudmFzID0gZGlyZWN0b3IuZ2V0U2NlbmUoKS5nZXRDaGlsZEJ5TmFtZShcIkNhbnZhc1wiKTsgLy8g5oiW6ICF5L2g55qEIEdyaWQg54i26IqC54K5XHJcbiAgICAgICAgICAgICAgICBjYW52YXMuYWRkQ2hpbGQoc2VlZCk7IC8vIHNlZWQg55qEIHBhcmVudCDopoHmmI7noa7vvIFcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFydFBvcyA9IGZyb21UaWxlLmdldFdvcmxkUG9zaXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVuZFBvcyA9IHRvVGlsZS5nZXRXb3JsZFBvc2l0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgY29udHJvbFBvcyA9IHN0YXJ0UG9zLmNsb25lKCkubGVycChlbmRQb3MsIDAuNSk7IC8vIOWPliBzdGFydCDlkowgZW5kIOS4reeCuVxyXG4gICAgICAgICAgICAgICAgY29udHJvbFBvcy54ICs9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDgwOyAvLyDmt7vliqAgWCDlgY/np7tcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xQb3MueSArPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiA4MDsgLy8g5re75YqgIFkg5YGP56e7XHJcblxyXG4gICAgICAgICAgICAgICAgc2VlZC5zZXRXb3JsZFBvc2l0aW9uKHN0YXJ0UG9zKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFydExvY2FsID0gY2FudmFzXHJcbiAgICAgICAgICAgICAgICAgICAgLmdldENvbXBvbmVudChVSVRyYW5zZm9ybSkhXHJcbiAgICAgICAgICAgICAgICAgICAgLmNvbnZlcnRUb05vZGVTcGFjZUFSKHN0YXJ0UG9zKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xMb2NhbCA9IGNhbnZhc1xyXG4gICAgICAgICAgICAgICAgICAgIC5nZXRDb21wb25lbnQoVUlUcmFuc2Zvcm0pIVxyXG4gICAgICAgICAgICAgICAgICAgIC5jb252ZXJ0VG9Ob2RlU3BhY2VBUihjb250cm9sUG9zKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVuZExvY2FsID0gY2FudmFzXHJcbiAgICAgICAgICAgICAgICAgICAgLmdldENvbXBvbmVudChVSVRyYW5zZm9ybSkhXHJcbiAgICAgICAgICAgICAgICAgICAgLmNvbnZlcnRUb05vZGVTcGFjZUFSKGVuZFBvcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2VlZC5zZXRQb3NpdGlvbihzdGFydExvY2FsKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkdXJhdGlvbiA9IDI7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0geyB2YWx1ZTogMCB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGFuZ2xlU3RhcnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYW5nbGVFbmQgPSAzNjAgKyBNYXRoLnJhbmRvbSgpICogMzYwO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2NhbGVTdGFydCA9IDE7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzY2FsZUVuZCA9IDEuMjtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzkvb/nlKggVUlPcGFjaXR5IOaOp+WItumAj+aYjuW6pu+8jOWFiOiuvue9ruWIneWni+WAvFxyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3BhY2l0eUNvbXAgPSBzZWVkLmdldENvbXBvbmVudChVSU9wYWNpdHkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wYWNpdHlDb21wKSBvcGFjaXR5Q29tcC5vcGFjaXR5ID0gMjU1O1xyXG5cclxuICAgICAgICAgICAgICAgIHR3ZWVuKHQpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRvKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgeyB2YWx1ZTogMSB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblVwZGF0ZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWUgPSB0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9uZU1pbnVzVCA9IDEgLSB0aW1lO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDotJ3loZ7lsJTkvY3nva5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB4ID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25lTWludXNUICogb25lTWludXNUICogc3RhcnRMb2NhbC54ICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMiAqIG9uZU1pbnVzVCAqIHRpbWUgKiBjb250cm9sTG9jYWwueCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUgKiB0aW1lICogZW5kTG9jYWwueDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uZU1pbnVzVCAqIG9uZU1pbnVzVCAqIHN0YXJ0TG9jYWwueSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDIgKiBvbmVNaW51c1QgKiB0aW1lICogY29udHJvbExvY2FsLnkgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lICogdGltZSAqIGVuZExvY2FsLnk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZWQuc2V0UG9zaXRpb24obmV3IFZlYzMoeCwgeSwgMCkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlkIzmraXop5LluqbjgIHnvKnmlL5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWVkLmFuZ2xlID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5nbGVTdGFydCArIChhbmdsZUVuZCAtIGFuZ2xlU3RhcnQpICogdGltZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzY2FsZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlU3RhcnQgKyAoc2NhbGVFbmQgLSBzY2FsZVN0YXJ0KSAqIHRpbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VlZC5zZXRTY2FsZShuZXcgVmVjMyhzY2FsZSwgc2NhbGUsIDEpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g6YCP5piO5bqmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wYWNpdHlDb21wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHlDb21wLm9wYWNpdHkgPSAyNTUgLSB0aW1lICogNzU7IC8vIOa3oeWHuuS4gOeCueeCuVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgLmNhbGwoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWVkLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLnN0YXJ0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBfZGVjb3JhdG9yLCBDb21wb25lbnQsIGluc3RhbnRpYXRlLCBOb2RlLCBQcmVmYWIsIFZlYzMgfSBmcm9tIFwiY2NcIjtcclxuaW1wb3J0IHsgVGlsZUNvbnRyb2xsZXIgfSBmcm9tIFwiLi9UaWxlQ29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBHcmlkQW5pbWF0aW9uIH0gZnJvbSBcIi4uL0ZYL0dyaWRBbmltYXRpb25cIjtcclxuXHJcbmNvbnN0IHsgY2NjbGFzcywgcHJvcGVydHkgfSA9IF9kZWNvcmF0b3I7XHJcblxyXG5jb25zdCBESVJFQ1RJT05fT0ZGU0VUOiBSZWNvcmQ8c3RyaW5nLCBbbnVtYmVyLCBudW1iZXJdPiA9IHtcclxuICAgIE46IFstMSwgMF0sXHJcbiAgICBORTogWy0xLCAxXSxcclxuICAgIEU6IFswLCAxXSxcclxuICAgIFNFOiBbMSwgMV0sXHJcbiAgICBTOiBbMSwgMF0sXHJcbiAgICBTVzogWzEsIC0xXSxcclxuICAgIFc6IFswLCAtMV0sXHJcbiAgICBOVzogWy0xLCAtMV0sXHJcbn07XHJcblxyXG5AY2NjbGFzcyhcIkdyaWRDb250cm9sbGVyXCIpXHJcbmV4cG9ydCBjbGFzcyBHcmlkQ29udHJvbGxlciBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBwcml2YXRlIHRpbGVTaXplID0gMTAwO1xyXG4gICAgcHJpdmF0ZSBzcGFjaW5nID0gMjtcclxuXHJcbiAgICBAcHJvcGVydHkoUHJlZmFiKVxyXG4gICAgdGlsZVByZWZhYjogUHJlZmFiID0gbnVsbCE7XHJcblxyXG4gICAgQHByb3BlcnR5KEdyaWRBbmltYXRpb24pXHJcbiAgICBncmlkQW5pbWF0aW9uOiBHcmlkQW5pbWF0aW9uID0gbnVsbDtcclxuXHJcbiAgICBwcml2YXRlIHRpbGVOb2RlczogTm9kZVtdW10gPSBbXTtcclxuXHJcbiAgICBwcml2YXRlIGdyaWRTaXplID0gNTsgLy8g5pSv5oyB5YiH5o2iIDLjgIEz44CBNOOAgTUg562J5bC65a+4XHJcblxyXG4gICAgaW5pdChyb3dzOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLm5vZGUucmVtb3ZlQWxsQ2hpbGRyZW4oKTtcclxuICAgICAgICB0aGlzLmdyaWRTaXplID0gcm93cztcclxuXHJcbiAgICAgICAgLy8g5a69ID0g5qC85a2Q5a69ICogTiArIOmXtOi3nSAqIChOIC0gMSlcclxuICAgICAgICBjb25zdCBzdGFydFggPVxyXG4gICAgICAgICAgICAtKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5ncmlkU2l6ZSAqIHRoaXMudGlsZVNpemUgK1xyXG4gICAgICAgICAgICAgICAgKHRoaXMuZ3JpZFNpemUgLSAxKSAqIHRoaXMuc3BhY2luZ1xyXG4gICAgICAgICAgICApIC9cclxuICAgICAgICAgICAgICAgIDIgK1xyXG4gICAgICAgICAgICB0aGlzLnRpbGVTaXplIC8gMjtcclxuICAgICAgICBjb25zdCBzdGFydFkgPVxyXG4gICAgICAgICAgICAodGhpcy5ncmlkU2l6ZSAqIHRoaXMudGlsZVNpemUgK1xyXG4gICAgICAgICAgICAgICAgKHRoaXMuZ3JpZFNpemUgLSAxKSAqIHRoaXMuc3BhY2luZykgL1xyXG4gICAgICAgICAgICAgICAgMiAtXHJcbiAgICAgICAgICAgIHRoaXMudGlsZVNpemUgLyAyO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZ3JpZFNpemU7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLnRpbGVOb2Rlc1tpXSA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuZ3JpZFNpemU7IGorKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGlsZSA9IGluc3RhbnRpYXRlKHRoaXMudGlsZVByZWZhYik7XHJcbiAgICAgICAgICAgICAgICB0aWxlLnNldFBvc2l0aW9uKFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWMzKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydFggKyBqICogKHRoaXMudGlsZVNpemUgKyB0aGlzLnNwYWNpbmcpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydFkgLSBpICogKHRoaXMudGlsZVNpemUgKyB0aGlzLnNwYWNpbmcpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAwXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZS5hZGRDaGlsZCh0aWxlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudGlsZU5vZGVzW2ldW2pdID0gdGlsZTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyDkvKDlhaXlnZDmoIfvvIzkvr/kuo7lkI7nu63lpITnkIZcclxuICAgICAgICAgICAgICAgIHRpbGUuZ2V0Q29tcG9uZW50KFRpbGVDb250cm9sbGVyKS5pbml0KGksIGopO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0KCkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5ncmlkU2l6ZTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5ncmlkU2l6ZTsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0aWxlTm9kZSA9IHRoaXMudGlsZU5vZGVzW2ldW2pdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGlsZSA9IHRpbGVOb2RlLmdldENvbXBvbmVudChUaWxlQ29udHJvbGxlcikgYXMgYW55O1xyXG5cclxuICAgICAgICAgICAgICAgIHRpbGUuc2V0RW1wdHkoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByb3VuZE92ZXIoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlbGF5ID0gMC4zOyAvLyDmr4/kuKp0aWxl5bu26L+f56eS5pWwXHJcblxyXG4gICAgICAgICAgICBsZXQgX3RtcCA9IDE7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZ3JpZFNpemU7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmdyaWRTaXplOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aWxlTm9kZSA9IHRoaXMudGlsZU5vZGVzW2ldW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbGUgPSB0aWxlTm9kZS5nZXRDb21wb25lbnQoVGlsZUNvbnRyb2xsZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aWxlLmlzU2VlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVPbmNlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbGUuc2V0RmluYWxGbG93ZXIoKTsgLy8g5pKt5pS+6Iqx5byA5Yqo55S75oiW5YiH5o2iIHNwcml0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBfdG1wICogZGVsYXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBfdG1wKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVPbmNlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgfSwgX3RtcCAqIGRlbGF5ICsgMSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYmxvd1NlZWRzKGRpcmVjdGlvbjogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHR3ZWVuczogUHJvbWlzZTx2b2lkPltdID0gW107XHJcbiAgICAgICAgICAgIGNvbnN0IFtkeCwgZHldID0gRElSRUNUSU9OX09GRlNFVFtkaXJlY3Rpb25dO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmdyaWRTaXplOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5ncmlkU2l6ZTsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGlsZU5vZGUgPSB0aGlzLnRpbGVOb2Rlc1tpXVtqXTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aWxlID0gdGlsZU5vZGUuZ2V0Q29tcG9uZW50KFRpbGVDb250cm9sbGVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aWxlLmlzRmxvd2VyKCkpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyDku47oirHmoLzlrZDlvoDor6XmlrnlkJHlkLlcclxuICAgICAgICAgICAgICAgICAgICBsZXQgeCA9IGkgKyBkeDtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgeSA9IGogKyBkeTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRoaXMuaW5Cb3VuZHMoeCwgeSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0VGlsZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRpbGVOb2Rlc1t4XVt5XS5nZXRDb21wb25lbnQoVGlsZUNvbnRyb2xsZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRhcmdldFRpbGUuaXNGbG93ZXIoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcCA9IHRoaXMuZ3JpZEFuaW1hdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZWVkRmx5KHRpbGUubm9kZSwgdGFyZ2V0VGlsZS5ub2RlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0VGlsZS5zZXRTZWVkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0d2VlbnMucHVzaChwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB4ICs9IGR4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB5ICs9IGR5O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHdlZW5zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpOyAvLyDmsqHmnIkgdHdlZW4g55qE5oOF5Ya15Lmf6KaBIHJlc29sdmUg5o6JXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBQcm9taXNlLmFsbCh0d2VlbnMpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTsgLy8g5omA5pyJIHR3ZWVuIOWujOaIkOS5i+WQjiByZXNvbHZlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGluQm91bmRzKHg6IG51bWJlciwgeTogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHggPj0gMCAmJiB4IDwgdGhpcy5ncmlkU2l6ZSAmJiB5ID49IDAgJiYgeSA8IHRoaXMuZ3JpZFNpemU7XHJcbiAgICB9XHJcblxyXG4gICAgaXNCb2FyZEZ1bGx5Q292ZXJlZCgpOiBib29sZWFuIHtcclxuICAgICAgICBmb3IgKGxldCByb3cgb2YgdGhpcy50aWxlTm9kZXMpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgdGlsZSBvZiByb3cpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aWxlLmdldENvbXBvbmVudChUaWxlQ29udHJvbGxlcikuaXNFbXB0eSgpKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgX2RlY29yYXRvciwgQ29tcG9uZW50LCBOb2RlLCBWZWMzLCB0d2VlbiwgZmluZCB9IGZyb20gXCJjY1wiO1xyXG5jb25zdCB7IGNjY2xhc3MsIHByb3BlcnR5IH0gPSBfZGVjb3JhdG9yO1xyXG5cclxuQGNjY2xhc3MoXCJJZGVsQW5pbWF0aW9uc1wiKVxyXG5leHBvcnQgY2xhc3MgSWRlbEFuaW1hdGlvbnMgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgc3RhdGljIGluc3RhbmNlOiBJZGVsQW5pbWF0aW9ucztcclxuXHJcbiAgICBwcm90ZWN0ZWQgb25Mb2FkKCk6IHZvaWQge1xyXG4gICAgICAgIElkZWxBbmltYXRpb25zLmluc3RhbmNlID0gdGhpcztcclxuXHJcbiAgICAgICAgdGhpcy5pZGxlQ2xvdWQoKTtcclxuICAgICAgICB0aGlzLmlkbGVDb21wYXNzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWRsZUNsb3VkKCkge1xyXG4gICAgICAgIGNvbnN0IGNsb3VkRmFjZSA9IGZpbmQoXCJDYW52YXMvQ2VudGVyL1JpZ2h0UGFuZWwvV2luZFwiKTtcclxuICAgICAgICBpZiAoY2xvdWRGYWNlKSB7XHJcbiAgICAgICAgICAgIHR3ZWVuKGNsb3VkRmFjZSlcclxuICAgICAgICAgICAgICAgIC5yZXBlYXRGb3JldmVyKFxyXG4gICAgICAgICAgICAgICAgICAgIHR3ZWVuKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmJ5KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcG9zaXRpb246IG5ldyBWZWMzKDIwLCAwLCAwKSB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBlYXNpbmc6IFwic2luZUluT3V0XCIgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5ieShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHBvc2l0aW9uOiBuZXcgVmVjMygtMjAsIDAsIDApIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGVhc2luZzogXCJzaW5lSW5PdXRcIiB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIC5zdGFydCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZGxlQ29tcGFzcygpIHtcclxuICAgICAgICBjb25zdCBwb2ludGVyID0gZmluZChcIkNhbnZhcy9DZW50ZXIvUmlnaHRQYW5lbC9Db21wYXNzUGFuZWwvUG9pbnRlclwiKTtcclxuXHJcbiAgICAgICAgaWYgKHBvaW50ZXIpIHtcclxuICAgICAgICAgICAgdHdlZW4ocG9pbnRlcilcclxuICAgICAgICAgICAgICAgIC5yZXBlYXRGb3JldmVyKFxyXG4gICAgICAgICAgICAgICAgICAgIHR3ZWVuKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmJ5KDEuMiwgeyBhbmdsZTogNSB9LCB7IGVhc2luZzogXCJzaW5lSW5PdXRcIiB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYnkoMS4yLCB7IGFuZ2xlOiAtNSB9LCB7IGVhc2luZzogXCJzaW5lSW5PdXRcIiB9KVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgLnN0YXJ0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0b3BJZGxlKG5vZGU6IE5vZGUpIHtcclxuICAgICAgICB0d2Vlbihub2RlKS5zdG9wKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWRsZUluZGljYXRvcihmbG93ZXI6IE5vZGUpIHtcclxuICAgICAgICBjb25zdCBkZWxheSA9IE1hdGgucmFuZG9tKCk7IC8vIDB+MeenkuS5i+mXtOmaj+aculxyXG4gICAgICAgIHR3ZWVuKGZsb3dlcilcclxuICAgICAgICAgICAgLmRlbGF5KGRlbGF5KVxyXG4gICAgICAgICAgICAucmVwZWF0Rm9yZXZlcih0d2VlbigpLmJ5KDEuNCwgeyBhbmdsZTogMiB9KS5ieSgxLjQsIHsgYW5nbGU6IC0yIH0pKVxyXG4gICAgICAgICAgICAuc3RhcnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBpZGxlVGlsZUZsb3dlcihmbG93ZXI6IE5vZGUpIHtcclxuICAgICAgICB0d2VlbihmbG93ZXIpXHJcbiAgICAgICAgICAgIC5yZXBlYXRGb3JldmVyKFxyXG4gICAgICAgICAgICAgICAgdHdlZW4oKVxyXG4gICAgICAgICAgICAgICAgICAgIC5ieShcclxuICAgICAgICAgICAgICAgICAgICAgICAgMS40LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHBvc2l0aW9uOiBuZXcgVmVjMygwLCA0LCAwKSB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGVhc2luZzogXCJzaW5lSW5PdXRcIiB9XHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIC5ieShcclxuICAgICAgICAgICAgICAgICAgICAgICAgMS40LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHBvc2l0aW9uOiBuZXcgVmVjMygwLCAtNCwgMCkgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeyBlYXNpbmc6IFwic2luZUluT3V0XCIgfVxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAuc3RhcnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBpZGxlVGlsZVNlZWQoc2VlZDogTm9kZSkge1xyXG4gICAgICAgIHR3ZWVuKHNlZWQpXHJcbiAgICAgICAgICAgIC5yZXBlYXRGb3JldmVyKFxyXG4gICAgICAgICAgICAgICAgdHdlZW4oKVxyXG4gICAgICAgICAgICAgICAgICAgIC5ieShcclxuICAgICAgICAgICAgICAgICAgICAgICAgMi4wLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHBvc2l0aW9uOiBuZXcgVmVjMygwLCAzLCAwKSB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGVhc2luZzogXCJzaW5lSW5PdXRcIiB9XHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIC5ieShcclxuICAgICAgICAgICAgICAgICAgICAgICAgMi4wLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHBvc2l0aW9uOiBuZXcgVmVjMygwLCAtMywgMCkgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeyBlYXNpbmc6IFwic2luZUluT3V0XCIgfVxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAuc3RhcnQoKTtcclxuICAgIH1cclxufVxyXG4iLCJleHBvcnQgY29uc3QgTGV2ZWxDb25maWdzID0gW1xyXG4gICAgeyByb3dzOiAyLCBjb2xzOiAyLCB3aW5kQ291bnQ6IDIgfSxcclxuICAgIHsgcm93czogMywgY29sczogMywgd2luZENvdW50OiA0IH0sXHJcbiAgICB7IHJvd3M6IDQsIGNvbHM6IDQsIHdpbmRDb3VudDogNSB9LFxyXG4gICAgeyByb3dzOiA1LCBjb2xzOiA1LCB3aW5kQ291bnQ6IDcgfSxcclxuICAgIC8vIOS9oOWPr+S7pee7p+e7reW+gOWQjuWKoFxyXG5dO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldExldmVsQ29uZmlnKGxldmVsSW5kZXg6IG51bWJlcikge1xyXG4gICAgcmV0dXJuIExldmVsQ29uZmlnc1tNYXRoLm1pbihsZXZlbEluZGV4IC0gMSwgTGV2ZWxDb25maWdzLmxlbmd0aCAtIDEpXTtcclxufVxyXG4iLCJpbXBvcnQgeyBfZGVjb3JhdG9yLCBDb21wb25lbnQsIFBhcnRpY2xlU3lzdGVtMkQgfSBmcm9tIFwiY2NcIjtcclxuY29uc3QgeyBjY2NsYXNzLCBwcm9wZXJ0eSB9ID0gX2RlY29yYXRvcjtcclxuXHJcbkBjY2NsYXNzKFwiVmljdG9yeVBhcnRpY2xlXCIpXHJcbmV4cG9ydCBjbGFzcyBWaWN0b3J5UGFydGljbGUgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgc3RhcnQoKSB7XHJcbiAgICAgICAgLy8g5bCd6K+V6I635Y+W57KS5a2Q57O757ufXHJcbiAgICAgICAgY29uc3QgcHMgPSB0aGlzLmdldENvbXBvbmVudChQYXJ0aWNsZVN5c3RlbTJEKTtcclxuXHJcbiAgICAgICAgLy8g5aaC5p6c57KS5a2Q57O757uf5a2Y5Zyo77yM5bCx5pKt5pS+77yI5aaC5p6c6K6+572u5LqGIFBsYXlPbkxvYWTvvIzkuZ/lj6/ku6XnnIHnlaXvvIlcclxuICAgICAgICBpZiAocHMpIHtcclxuICAgICAgICAgICAgcHMucmVzZXRTeXN0ZW0oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOiuvue9ruW7tui/n+mUgOavge+8mkR1cmF0aW9uICsgTWF4TGlmZSArIOmineWklue8k+WGslxyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm5vZGUuZGVzdHJveSgpO1xyXG4gICAgICAgIH0sIDQwMDApO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IF9kZWNvcmF0b3IsIENvbXBvbmVudCwgTm9kZSB9IGZyb20gXCJjY1wiO1xyXG5jb25zdCB7IGNjY2xhc3MsIHByb3BlcnR5IH0gPSBfZGVjb3JhdG9yO1xyXG5pbXBvcnQgeyBHcmlkQ29udHJvbGxlciB9IGZyb20gXCIuL0dyaWRDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IEZsb3dlckNvbnRyb2xsZXIgfSBmcm9tIFwiLi9GbG93ZXJDb250cm9sbGVyXCI7XHJcblxyXG5AY2NjbGFzcyhcIlBsYW50Q29udHJvbGxlclwiKVxyXG5leHBvcnQgY2xhc3MgUGxhbnRDb250cm9sbGVyIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIEBwcm9wZXJ0eShGbG93ZXJDb250cm9sbGVyKVxyXG4gICAgZmxvd2VyQ29udHJvbGxlcjogRmxvd2VyQ29udHJvbGxlciA9IG51bGw7XHJcblxyXG4gICAgQHByb3BlcnR5KEdyaWRDb250cm9sbGVyKVxyXG4gICAgZ3JpZENvbnRyb2xsZXI6IEdyaWRDb250cm9sbGVyID0gbnVsbDtcclxuXHJcbiAgICBwcml2YXRlIGNvdW50ID0gMDtcclxuICAgIHByaXZhdGUgY3VycmVudENvdW50ID0gMDtcclxuXHJcbiAgICBpbml0KHJvd3M6IG51bWJlciwgY291bnQ6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuY291bnQgPSBjb3VudDtcclxuICAgICAgICB0aGlzLmZsb3dlckNvbnRyb2xsZXIuaW5pdChjb3VudCk7XHJcbiAgICAgICAgdGhpcy5ncmlkQ29udHJvbGxlci5pbml0KHJvd3MpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0KCkge1xyXG4gICAgICAgIHRoaXMuZmxvd2VyQ29udHJvbGxlci5pbml0KHRoaXMuY291bnQpO1xyXG4gICAgICAgIHRoaXMuZ3JpZENvbnRyb2xsZXIucmVzZXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBwbGFudCh0aWxlOiBOb2RlKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5mbG93ZXJDb250cm9sbGVyLnBsYW50KHRpbGUpO1xyXG4gICAgICAgIHRoaXMuY3VycmVudENvdW50LS07XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgYmxvdyhkaXJlY3Rpb246IHN0cmluZykge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZ3JpZENvbnRyb2xsZXIuYmxvd1NlZWRzKGRpcmVjdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcm91bmRPdmVyKCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZ3JpZENvbnRyb2xsZXIucm91bmRPdmVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNCb2FyZEZ1bGx5Q292ZXJlZCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ncmlkQ29udHJvbGxlci5pc0JvYXJkRnVsbHlDb3ZlcmVkKCk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgX2RlY29yYXRvciwgQ29tcG9uZW50LCBOb2RlLCBMYWJlbCwgQnV0dG9uIH0gZnJvbSBcImNjXCI7XHJcbmNvbnN0IHsgY2NjbGFzcywgcHJvcGVydHkgfSA9IF9kZWNvcmF0b3I7XHJcblxyXG5pbXBvcnQgeyBSZXN1bHRQb3B1cEFuaW1hdGlvbiB9IGZyb20gXCIuLi9GWC9SZXN1bHRQb3B1cEFuaW1hdGlvblwiO1xyXG5AY2NjbGFzcyhcIlJlc3VsdFBvcHVwXCIpXHJcbmV4cG9ydCBjbGFzcyBSZXN1bHRQb3B1cCBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBAcHJvcGVydHkoTGFiZWwpXHJcbiAgICB0aXRsZUxhYmVsOiBMYWJlbCA9IG51bGw7XHJcblxyXG4gICAgQHByb3BlcnR5KExhYmVsKVxyXG4gICAgZGVzY0xhYmVsOiBMYWJlbCA9IG51bGw7XHJcblxyXG4gICAgQHByb3BlcnR5KEJ1dHRvbilcclxuICAgIHJlc3RhcnRCdXR0b246IEJ1dHRvbiA9IG51bGw7XHJcblxyXG4gICAgQHByb3BlcnR5KFJlc3VsdFBvcHVwQW5pbWF0aW9uKVxyXG4gICAgYW5pbWF0aW9uOiBSZXN1bHRQb3B1cEFuaW1hdGlvbiA9IG51bGw7XHJcblxyXG4gICAgcHJpdmF0ZSBfb25SZXN0YXJ0OiBGdW5jdGlvbiA9IG51bGw7XHJcblxyXG4gICAgc3RhcnQoKSB7XHJcbiAgICAgICAgdGhpcy5ub2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAvLyDmjInpkq7nu5Hlrprngrnlh7tcclxuICAgICAgICB0aGlzLnJlc3RhcnRCdXR0b24ubm9kZS5vbihCdXR0b24uRXZlbnRUeXBlLkNMSUNLLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX29uUmVzdGFydCkgdGhpcy5fb25SZXN0YXJ0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlsZXnpLrnu5Pnrpfnu5PmnpxcclxuICAgICAqIEBwYXJhbSBpc1dpbiDmmK/lkKbog5zliKlcclxuICAgICAqIEBwYXJhbSBvblJlc3RhcnQg54K55Ye74oCc5YaN5p2l5LiA5bGA4oCd5ZCO55qE5Zue6LCD5Ye95pWwXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHNob3dXaW4oaXNXaW46IGJvb2xlYW4sIG9uUmVzdGFydDogRnVuY3Rpb24pIHtcclxuICAgICAgICBjb25zdCBsYWJlbE5vZGUgPSB0aGlzLnJlc3RhcnRCdXR0b24ubm9kZS5nZXRDaGlsZEJ5TmFtZShcIkxhYmVsXCIpO1xyXG4gICAgICAgIGNvbnN0IGxhYmVsID0gbGFiZWxOb2RlPy5nZXRDb21wb25lbnQoTGFiZWwpO1xyXG5cclxuICAgICAgICB0aGlzLl9vblJlc3RhcnQgPSBvblJlc3RhcnQ7XHJcbiAgICAgICAgaWYgKGlzV2luKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGl0bGVMYWJlbC5zdHJpbmcgPSBcIkxFVkVMIENPTVBMRVRFRFwiO1xyXG4gICAgICAgICAgICB0aGlzLmRlc2NMYWJlbC5zdHJpbmcgPSBcIiDwn46JIFwiO1xyXG4gICAgICAgICAgICBsYWJlbC5zdHJpbmcgPSBcIk5FWFQgTEVWRUxcIjtcclxuXHJcbiAgICAgICAgICAgIGlmIChpc1dpbikgYXdhaXQgdGhpcy5hbmltYXRpb24uc2hvd1dpbih0aGlzLm5vZGUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudGl0bGVMYWJlbC5zdHJpbmcgPSBcIkxFVkVMIEZBSUxFRFwiO1xyXG4gICAgICAgICAgICB0aGlzLmRlc2NMYWJlbC5zdHJpbmcgPSBcIiDinJYgXCI7XHJcbiAgICAgICAgICAgIGxhYmVsLnN0cmluZyA9IFwiUkVUUllcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHtcclxuICAgIF9kZWNvcmF0b3IsXHJcbiAgICBDb21wb25lbnQsXHJcbiAgICBOb2RlLFxyXG4gICAgUHJlZmFiLFxyXG4gICAgaW5zdGFudGlhdGUsXHJcbiAgICBVSU9wYWNpdHksXHJcbiAgICBWZWMzLFxyXG4gICAgVUlUcmFuc2Zvcm0sXHJcbiAgICBzcCxcclxufSBmcm9tIFwiY2NcIjtcclxuY29uc3QgeyBjY2NsYXNzLCBwcm9wZXJ0eSB9ID0gX2RlY29yYXRvcjtcclxuaW1wb3J0IHsgQXVkaW9IZWxwZXIgfSBmcm9tIFwiLi4vLi4vLi4vVXRpbHMvQXVkaW9IZWxwZXJcIjtcclxuaW1wb3J0IHsgd2FpdCB9IGZyb20gXCIuLi8uLi8uLi9VdGlscy9UaW1lbGluZUhlbHBlclwiO1xyXG5pbXBvcnQgeyBFZmZlY3RzSGVscGVyIH0gZnJvbSBcIi4uLy4uLy4uL0VmZmVjdHMvRWZmZWN0c0hlbHBlclwiO1xyXG5cclxuQGNjY2xhc3MoXCJSZXN1bHRQb3B1cEFuaW1hdGlvblwiKVxyXG5leHBvcnQgY2xhc3MgUmVzdWx0UG9wdXBBbmltYXRpb24gZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgQHByb3BlcnR5KFByZWZhYilcclxuICAgIHZpY3RvcnlQYXJ0aWNsZVByZWZhYjogUHJlZmFiID0gbnVsbCE7XHJcblxyXG4gICAgYXN5bmMgc2hvd1dpbihub2RlOiBOb2RlKSB7XHJcbiAgICAgICAgdGhpcy5zaG93VmljdG9yeVBhcnRpY2xlcygpOyAvLyDllpzpuYrjgIHokrLlhazoi7Hpo57oiJ5cclxuICAgICAgICBBdWRpb0hlbHBlci5pbnN0YW5jZS5wbGF5U0ZYKFwidGFkYWFcIik7XHJcblxyXG4gICAgICAgIGF3YWl0IHdhaXQoMjUwMCk7IC8vIOWBnOmhv+S4gOS4i+e7meeOqeWutue8k+WGsuaDhee7qlxyXG5cclxuICAgICAgICBub2RlLmFjdGl2ZSA9IHRydWU7XHJcblxyXG4gICAgICAgIGNvbnN0IHN1Yl9ub2RlID0gbm9kZS5nZXRDaGlsZEJ5TmFtZShcIkRlc2NMYWJlbENvbnRhaW5lclwiKTtcclxuICAgICAgICBjb25zdCBza2VsZXRvbiA9IHN1Yl9ub2RlLmdldENvbXBvbmVudChzcC5Ta2VsZXRvbik7XHJcbiAgICAgICAgc2tlbGV0b24uc2V0QW5pbWF0aW9uKDAsIFwiYW5pbWF0aW9uXCIsIHRydWUpOyAvLyDliqjnlLvlkI3kuIDlrpropoHot58gU3BpbmUg5Lit5a6M5YWo5LiA6Ie0XHJcblxyXG4gICAgICAgIGF3YWl0IHRoaXMucG9wdXBSZXN1bHRQYW5lbChub2RlKTsgLy8gc2NhbGUgKyBlYXNpbmcg5by55Ye657uT566X5qGGXHJcbiAgICB9XHJcblxyXG4gICAgc2hvd1ZpY3RvcnlQYXJ0aWNsZXMoKSB7XHJcbiAgICAgICAgY29uc3Qgbm9kZSA9IGluc3RhbnRpYXRlKHRoaXMudmljdG9yeVBhcnRpY2xlUHJlZmFiKTtcclxuICAgICAgICBub2RlLnNldFBvc2l0aW9uKDAsIDApOyAvLyDmiJborr7kuLrmo4vnm5jkuK3lpK7lnZDmoIdcclxuICAgICAgICB0aGlzLm5vZGUuYWRkQ2hpbGQobm9kZSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcG9wdXBSZXN1bHRQYW5lbChub2RlOiBOb2RlKSB7XHJcbiAgICAgICAgYXdhaXQgRWZmZWN0c0hlbHBlci5ib3VuY2VTY2FsZShub2RlKTtcclxuICAgIH1cclxufVxyXG4iLCJleHBvcnQgeyBfQXN5bmNHZW5lcmF0b3IgYXMgQXN5bmNHZW5lcmF0b3IsIF9PdmVybG9hZFlpZWxkIGFzIE92ZXJsb2FkWWllbGQsIF9hcHBseURlY3MgYXMgYXBwbHlEZWNzLCBfYXBwbHlEZWNzMjIwMyBhcyBhcHBseURlY3MyMjAzLCBfYXBwbHlEZWNzMjIwM1IgYXMgYXBwbHlEZWNzMjIwM1IsIF9hcHBseURlY3MyMzAxIGFzIGFwcGx5RGVjczIzMDEsIF9hcHBseURlY3MyMzA1IGFzIGFwcGx5RGVjczIzMDUsIF9hc3luY0dlbmVyYXRvckRlbGVnYXRlIGFzIGFzeW5jR2VuZXJhdG9yRGVsZWdhdGUsIF9hc3luY0l0ZXJhdG9yIGFzIGFzeW5jSXRlcmF0b3IsIF9hd2FpdEFzeW5jR2VuZXJhdG9yIGFzIGF3YWl0QXN5bmNHZW5lcmF0b3IsIF9jaGVja0luUkhTIGFzIGNoZWNrSW5SSFMsIF9kZWZpbmVBY2Nlc3NvciBhcyBkZWZpbmVBY2Nlc3NvciwgX2Rpc3Bvc2UgYXMgZGlzcG9zZSwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0IGFzIGl0ZXJhYmxlVG9BcnJheUxpbWl0LCBfaXRlcmFibGVUb0FycmF5TGltaXRMb29zZSBhcyBpdGVyYWJsZVRvQXJyYXlMaW1pdExvb3NlLCBfanN4IGFzIGpzeCwgX29iamVjdFNwcmVhZDIgYXMgb2JqZWN0U3ByZWFkMiwgX3JlZ2VuZXJhdG9yUnVudGltZSBhcyByZWdlbmVyYXRvclJ1bnRpbWUsIF90eXBlb2YgYXMgdHlwZW9mLCBfdXNpbmcgYXMgdXNpbmcsIF93cmFwUmVnRXhwIGFzIHdyYXBSZWdFeHAsIF9Bd2FpdFZhbHVlIGFzIEF3YWl0VmFsdWUsIF93cmFwQXN5bmNHZW5lcmF0b3IgYXMgd3JhcEFzeW5jR2VuZXJhdG9yLCBfYXN5bmNUb0dlbmVyYXRvciBhcyBhc3luY1RvR2VuZXJhdG9yLCBfY2xhc3NDYWxsQ2hlY2sgYXMgY2xhc3NDYWxsQ2hlY2ssIF9jcmVhdGVDbGFzcyBhcyBjcmVhdGVDbGFzcywgX2RlZmluZUVudW1lcmFibGVQcm9wZXJ0aWVzIGFzIGRlZmluZUVudW1lcmFibGVQcm9wZXJ0aWVzLCBfZGVmYXVsdHMgYXMgZGVmYXVsdHMsIF9kZWZpbmVQcm9wZXJ0eSBhcyBkZWZpbmVQcm9wZXJ0eSwgX2V4dGVuZHMgYXMgZXh0ZW5kcywgX29iamVjdFNwcmVhZCBhcyBvYmplY3RTcHJlYWQsIF9pbmhlcml0cyBhcyBpbmhlcml0cywgX2luaGVyaXRzTG9vc2UgYXMgaW5oZXJpdHNMb29zZSwgX2dldFByb3RvdHlwZU9mIGFzIGdldFByb3RvdHlwZU9mLCBfc2V0UHJvdG90eXBlT2YgYXMgc2V0UHJvdG90eXBlT2YsIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgYXMgaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0LCBfY29uc3RydWN0IGFzIGNvbnN0cnVjdCwgX2lzTmF0aXZlRnVuY3Rpb24gYXMgaXNOYXRpdmVGdW5jdGlvbiwgX3dyYXBOYXRpdmVTdXBlciBhcyB3cmFwTmF0aXZlU3VwZXIsIF9pbnN0YW5jZW9mIGFzIGluc3RhbmNlb2YsIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgYXMgaW50ZXJvcFJlcXVpcmVEZWZhdWx0LCBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCBhcyBpbnRlcm9wUmVxdWlyZVdpbGRjYXJkLCBfbmV3QXJyb3dDaGVjayBhcyBuZXdBcnJvd0NoZWNrLCBfb2JqZWN0RGVzdHJ1Y3R1cmluZ0VtcHR5IGFzIG9iamVjdERlc3RydWN0dXJpbmdFbXB0eSwgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UgYXMgb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZSwgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIGFzIG9iamVjdFdpdGhvdXRQcm9wZXJ0aWVzLCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkIGFzIGFzc2VydFRoaXNJbml0aWFsaXplZCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4gYXMgcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiwgX2NyZWF0ZVN1cGVyIGFzIGNyZWF0ZVN1cGVyLCBfc3VwZXJQcm9wQmFzZSBhcyBzdXBlclByb3BCYXNlLCBfZ2V0IGFzIGdldCwgX3NldCBhcyBzZXQsIF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwgYXMgdGFnZ2VkVGVtcGxhdGVMaXRlcmFsLCBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsTG9vc2UgYXMgdGFnZ2VkVGVtcGxhdGVMaXRlcmFsTG9vc2UsIF9yZWFkT25seUVycm9yIGFzIHJlYWRPbmx5RXJyb3IsIF93cml0ZU9ubHlFcnJvciBhcyB3cml0ZU9ubHlFcnJvciwgX2NsYXNzTmFtZVREWkVycm9yIGFzIGNsYXNzTmFtZVREWkVycm9yLCBfdGVtcG9yYWxVbmRlZmluZWQgYXMgdGVtcG9yYWxVbmRlZmluZWQsIF90ZHogYXMgdGR6LCBfdGVtcG9yYWxSZWYgYXMgdGVtcG9yYWxSZWYsIF9zbGljZWRUb0FycmF5IGFzIHNsaWNlZFRvQXJyYXksIF9zbGljZWRUb0FycmF5TG9vc2UgYXMgc2xpY2VkVG9BcnJheUxvb3NlLCBfdG9BcnJheSBhcyB0b0FycmF5LCBfdG9Db25zdW1hYmxlQXJyYXkgYXMgdG9Db25zdW1hYmxlQXJyYXksIF9hcnJheVdpdGhvdXRIb2xlcyBhcyBhcnJheVdpdGhvdXRIb2xlcywgX2FycmF5V2l0aEhvbGVzIGFzIGFycmF5V2l0aEhvbGVzLCBfbWF5YmVBcnJheUxpa2UgYXMgbWF5YmVBcnJheUxpa2UsIF9pdGVyYWJsZVRvQXJyYXkgYXMgaXRlcmFibGVUb0FycmF5LCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkgYXMgdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXksIF9hcnJheUxpa2VUb0FycmF5IGFzIGFycmF5TGlrZVRvQXJyYXksIF9ub25JdGVyYWJsZVNwcmVhZCBhcyBub25JdGVyYWJsZVNwcmVhZCwgX25vbkl0ZXJhYmxlUmVzdCBhcyBub25JdGVyYWJsZVJlc3QsIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGFzIGNyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIsIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UgYXMgY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlLCBfc2tpcEZpcnN0R2VuZXJhdG9yTmV4dCBhcyBza2lwRmlyc3RHZW5lcmF0b3JOZXh0LCBfdG9QcmltaXRpdmUgYXMgdG9QcmltaXRpdmUsIF90b1Byb3BlcnR5S2V5IGFzIHRvUHJvcGVydHlLZXksIF9pbml0aWFsaXplcldhcm5pbmdIZWxwZXIgYXMgaW5pdGlhbGl6ZXJXYXJuaW5nSGVscGVyLCBfaW5pdGlhbGl6ZXJEZWZpbmVQcm9wZXJ0eSBhcyBpbml0aWFsaXplckRlZmluZVByb3BlcnR5LCBfYXBwbHlEZWNvcmF0ZWREZXNjcmlwdG9yIGFzIGFwcGx5RGVjb3JhdGVkRGVzY3JpcHRvciwgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VLZXkgYXMgY2xhc3NQcml2YXRlRmllbGRMb29zZUtleSwgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlIGFzIGNsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlLCBfY2xhc3NQcml2YXRlRmllbGRHZXQgYXMgY2xhc3NQcml2YXRlRmllbGRHZXQsIF9jbGFzc1ByaXZhdGVGaWVsZFNldCBhcyBjbGFzc1ByaXZhdGVGaWVsZFNldCwgX2NsYXNzUHJpdmF0ZUZpZWxkRGVzdHJ1Y3R1cmVTZXQgYXMgY2xhc3NQcml2YXRlRmllbGREZXN0cnVjdHVyZVNldCwgX2NsYXNzRXh0cmFjdEZpZWxkRGVzY3JpcHRvciBhcyBjbGFzc0V4dHJhY3RGaWVsZERlc2NyaXB0b3IsIF9jbGFzc1N0YXRpY1ByaXZhdGVGaWVsZFNwZWNHZXQgYXMgY2xhc3NTdGF0aWNQcml2YXRlRmllbGRTcGVjR2V0LCBfY2xhc3NTdGF0aWNQcml2YXRlRmllbGRTcGVjU2V0IGFzIGNsYXNzU3RhdGljUHJpdmF0ZUZpZWxkU3BlY1NldCwgX2NsYXNzU3RhdGljUHJpdmF0ZU1ldGhvZEdldCBhcyBjbGFzc1N0YXRpY1ByaXZhdGVNZXRob2RHZXQsIF9jbGFzc1N0YXRpY1ByaXZhdGVNZXRob2RTZXQgYXMgY2xhc3NTdGF0aWNQcml2YXRlTWV0aG9kU2V0LCBfY2xhc3NBcHBseURlc2NyaXB0b3JHZXQgYXMgY2xhc3NBcHBseURlc2NyaXB0b3JHZXQsIF9jbGFzc0FwcGx5RGVzY3JpcHRvclNldCBhcyBjbGFzc0FwcGx5RGVzY3JpcHRvclNldCwgX2NsYXNzQXBwbHlEZXNjcmlwdG9yRGVzdHJ1Y3R1cmVTZXQgYXMgY2xhc3NBcHBseURlc2NyaXB0b3JEZXN0cnVjdHVyZVNldCwgX2NsYXNzU3RhdGljUHJpdmF0ZUZpZWxkRGVzdHJ1Y3R1cmVTZXQgYXMgY2xhc3NTdGF0aWNQcml2YXRlRmllbGREZXN0cnVjdHVyZVNldCwgX2NsYXNzQ2hlY2tQcml2YXRlU3RhdGljQWNjZXNzIGFzIGNsYXNzQ2hlY2tQcml2YXRlU3RhdGljQWNjZXNzLCBfY2xhc3NDaGVja1ByaXZhdGVTdGF0aWNGaWVsZERlc2NyaXB0b3IgYXMgY2xhc3NDaGVja1ByaXZhdGVTdGF0aWNGaWVsZERlc2NyaXB0b3IsIF9kZWNvcmF0ZSBhcyBkZWNvcmF0ZSwgX2NsYXNzUHJpdmF0ZU1ldGhvZEdldCBhcyBjbGFzc1ByaXZhdGVNZXRob2RHZXQsIF9jaGVja1ByaXZhdGVSZWRlY2xhcmF0aW9uIGFzIGNoZWNrUHJpdmF0ZVJlZGVjbGFyYXRpb24sIF9jbGFzc1ByaXZhdGVGaWVsZEluaXRTcGVjIGFzIGNsYXNzUHJpdmF0ZUZpZWxkSW5pdFNwZWMsIF9jbGFzc1ByaXZhdGVNZXRob2RJbml0U3BlYyBhcyBjbGFzc1ByaXZhdGVNZXRob2RJbml0U3BlYywgX2NsYXNzUHJpdmF0ZU1ldGhvZFNldCBhcyBjbGFzc1ByaXZhdGVNZXRob2RTZXQsIF9pZGVudGl0eSBhcyBpZGVudGl0eSB9O1xuZnVuY3Rpb24gX0FzeW5jR2VuZXJhdG9yKGUpIHtcbiAgdmFyIHIsIHQ7XG4gIGZ1bmN0aW9uIHJlc3VtZShyLCB0KSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBuID0gZVtyXSh0KSxcbiAgICAgICAgbyA9IG4udmFsdWUsXG4gICAgICAgIHUgPSBvIGluc3RhbmNlb2YgX092ZXJsb2FkWWllbGQ7XG4gICAgICBQcm9taXNlLnJlc29sdmUodSA/IG8udiA6IG8pLnRoZW4oZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgaWYgKHUpIHtcbiAgICAgICAgICB2YXIgaSA9IFwicmV0dXJuXCIgPT09IHIgPyBcInJldHVyblwiIDogXCJuZXh0XCI7XG4gICAgICAgICAgaWYgKCFvLmsgfHwgdC5kb25lKSByZXR1cm4gcmVzdW1lKGksIHQpO1xuICAgICAgICAgIHQgPSBlW2ldKHQpLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHNldHRsZShuLmRvbmUgPyBcInJldHVyblwiIDogXCJub3JtYWxcIiwgdCk7XG4gICAgICB9LCBmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXN1bWUoXCJ0aHJvd1wiLCBlKTtcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHNldHRsZShcInRocm93XCIsIGUpO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBzZXR0bGUoZSwgbikge1xuICAgIHN3aXRjaCAoZSkge1xuICAgICAgY2FzZSBcInJldHVyblwiOlxuICAgICAgICByLnJlc29sdmUoe1xuICAgICAgICAgIHZhbHVlOiBuLFxuICAgICAgICAgIGRvbmU6ICEwXG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJ0aHJvd1wiOlxuICAgICAgICByLnJlamVjdChuKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByLnJlc29sdmUoe1xuICAgICAgICAgIHZhbHVlOiBuLFxuICAgICAgICAgIGRvbmU6ICExXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAociA9IHIubmV4dCkgPyByZXN1bWUoci5rZXksIHIuYXJnKSA6IHQgPSBudWxsO1xuICB9XG4gIHRoaXMuX2ludm9rZSA9IGZ1bmN0aW9uIChlLCBuKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChvLCB1KSB7XG4gICAgICB2YXIgaSA9IHtcbiAgICAgICAga2V5OiBlLFxuICAgICAgICBhcmc6IG4sXG4gICAgICAgIHJlc29sdmU6IG8sXG4gICAgICAgIHJlamVjdDogdSxcbiAgICAgICAgbmV4dDogbnVsbFxuICAgICAgfTtcbiAgICAgIHQgPyB0ID0gdC5uZXh0ID0gaSA6IChyID0gdCA9IGksIHJlc3VtZShlLCBuKSk7XG4gICAgfSk7XG4gIH0sIFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgZS5yZXR1cm4gJiYgKHRoaXMucmV0dXJuID0gdm9pZCAwKTtcbn1cbl9Bc3luY0dlbmVyYXRvci5wcm90b3R5cGVbXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgU3ltYm9sLmFzeW5jSXRlcmF0b3IgfHwgXCJAQGFzeW5jSXRlcmF0b3JcIl0gPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzO1xufSwgX0FzeW5jR2VuZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKGUpIHtcbiAgcmV0dXJuIHRoaXMuX2ludm9rZShcIm5leHRcIiwgZSk7XG59LCBfQXN5bmNHZW5lcmF0b3IucHJvdG90eXBlLnRocm93ID0gZnVuY3Rpb24gKGUpIHtcbiAgcmV0dXJuIHRoaXMuX2ludm9rZShcInRocm93XCIsIGUpO1xufSwgX0FzeW5jR2VuZXJhdG9yLnByb3RvdHlwZS5yZXR1cm4gPSBmdW5jdGlvbiAoZSkge1xuICByZXR1cm4gdGhpcy5faW52b2tlKFwicmV0dXJuXCIsIGUpO1xufTtcbmZ1bmN0aW9uIF9PdmVybG9hZFlpZWxkKHQsIGUpIHtcbiAgdGhpcy52ID0gdCwgdGhpcy5rID0gZTtcbn1cbmZ1bmN0aW9uIG9sZF9jcmVhdGVNZXRhZGF0YU1ldGhvZHNGb3JQcm9wZXJ0eShlLCB0LCBhLCByKSB7XG4gIHJldHVybiB7XG4gICAgZ2V0TWV0YWRhdGE6IGZ1bmN0aW9uIChvKSB7XG4gICAgICBvbGRfYXNzZXJ0Tm90RmluaXNoZWQociwgXCJnZXRNZXRhZGF0YVwiKSwgb2xkX2Fzc2VydE1ldGFkYXRhS2V5KG8pO1xuICAgICAgdmFyIGkgPSBlW29dO1xuICAgICAgaWYgKHZvaWQgMCAhPT0gaSkgaWYgKDEgPT09IHQpIHtcbiAgICAgICAgdmFyIG4gPSBpLnB1YmxpYztcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gbikgcmV0dXJuIG5bYV07XG4gICAgICB9IGVsc2UgaWYgKDIgPT09IHQpIHtcbiAgICAgICAgdmFyIGwgPSBpLnByaXZhdGU7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IGwpIHJldHVybiBsLmdldChhKTtcbiAgICAgIH0gZWxzZSBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoaSwgXCJjb25zdHJ1Y3RvclwiKSkgcmV0dXJuIGkuY29uc3RydWN0b3I7XG4gICAgfSxcbiAgICBzZXRNZXRhZGF0YTogZnVuY3Rpb24gKG8sIGkpIHtcbiAgICAgIG9sZF9hc3NlcnROb3RGaW5pc2hlZChyLCBcInNldE1ldGFkYXRhXCIpLCBvbGRfYXNzZXJ0TWV0YWRhdGFLZXkobyk7XG4gICAgICB2YXIgbiA9IGVbb107XG4gICAgICBpZiAodm9pZCAwID09PSBuICYmIChuID0gZVtvXSA9IHt9KSwgMSA9PT0gdCkge1xuICAgICAgICB2YXIgbCA9IG4ucHVibGljO1xuICAgICAgICB2b2lkIDAgPT09IGwgJiYgKGwgPSBuLnB1YmxpYyA9IHt9KSwgbFthXSA9IGk7XG4gICAgICB9IGVsc2UgaWYgKDIgPT09IHQpIHtcbiAgICAgICAgdmFyIHMgPSBuLnByaXY7XG4gICAgICAgIHZvaWQgMCA9PT0gcyAmJiAocyA9IG4ucHJpdmF0ZSA9IG5ldyBNYXAoKSksIHMuc2V0KGEsIGkpO1xuICAgICAgfSBlbHNlIG4uY29uc3RydWN0b3IgPSBpO1xuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIG9sZF9jb252ZXJ0TWV0YWRhdGFNYXBUb0ZpbmFsKGUsIHQpIHtcbiAgdmFyIGEgPSBlW1N5bWJvbC5tZXRhZGF0YSB8fCBTeW1ib2wuZm9yKFwiU3ltYm9sLm1ldGFkYXRhXCIpXSxcbiAgICByID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh0KTtcbiAgaWYgKDAgIT09IHIubGVuZ3RoKSB7XG4gICAgZm9yICh2YXIgbyA9IDA7IG8gPCByLmxlbmd0aDsgbysrKSB7XG4gICAgICB2YXIgaSA9IHJbb10sXG4gICAgICAgIG4gPSB0W2ldLFxuICAgICAgICBsID0gYSA/IGFbaV0gOiBudWxsLFxuICAgICAgICBzID0gbi5wdWJsaWMsXG4gICAgICAgIGMgPSBsID8gbC5wdWJsaWMgOiBudWxsO1xuICAgICAgcyAmJiBjICYmIE9iamVjdC5zZXRQcm90b3R5cGVPZihzLCBjKTtcbiAgICAgIHZhciBkID0gbi5wcml2YXRlO1xuICAgICAgaWYgKGQpIHtcbiAgICAgICAgdmFyIHUgPSBBcnJheS5mcm9tKGQudmFsdWVzKCkpLFxuICAgICAgICAgIGYgPSBsID8gbC5wcml2YXRlIDogbnVsbDtcbiAgICAgICAgZiAmJiAodSA9IHUuY29uY2F0KGYpKSwgbi5wcml2YXRlID0gdTtcbiAgICAgIH1cbiAgICAgIGwgJiYgT2JqZWN0LnNldFByb3RvdHlwZU9mKG4sIGwpO1xuICAgIH1cbiAgICBhICYmIE9iamVjdC5zZXRQcm90b3R5cGVPZih0LCBhKSwgZVtTeW1ib2wubWV0YWRhdGEgfHwgU3ltYm9sLmZvcihcIlN5bWJvbC5tZXRhZGF0YVwiKV0gPSB0O1xuICB9XG59XG5mdW5jdGlvbiBvbGRfY3JlYXRlQWRkSW5pdGlhbGl6ZXJNZXRob2QoZSwgdCkge1xuICByZXR1cm4gZnVuY3Rpb24gKGEpIHtcbiAgICBvbGRfYXNzZXJ0Tm90RmluaXNoZWQodCwgXCJhZGRJbml0aWFsaXplclwiKSwgb2xkX2Fzc2VydENhbGxhYmxlKGEsIFwiQW4gaW5pdGlhbGl6ZXJcIiksIGUucHVzaChhKTtcbiAgfTtcbn1cbmZ1bmN0aW9uIG9sZF9tZW1iZXJEZWMoZSwgdCwgYSwgciwgbywgaSwgbiwgbCwgcykge1xuICB2YXIgYztcbiAgc3dpdGNoIChpKSB7XG4gICAgY2FzZSAxOlxuICAgICAgYyA9IFwiYWNjZXNzb3JcIjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMjpcbiAgICAgIGMgPSBcIm1ldGhvZFwiO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzOlxuICAgICAgYyA9IFwiZ2V0dGVyXCI7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDQ6XG4gICAgICBjID0gXCJzZXR0ZXJcIjtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICBjID0gXCJmaWVsZFwiO1xuICB9XG4gIHZhciBkLFxuICAgIHUsXG4gICAgZiA9IHtcbiAgICAgIGtpbmQ6IGMsXG4gICAgICBuYW1lOiBsID8gXCIjXCIgKyB0IDogdCxcbiAgICAgIGlzU3RhdGljOiBuLFxuICAgICAgaXNQcml2YXRlOiBsXG4gICAgfSxcbiAgICBwID0ge1xuICAgICAgdjogITFcbiAgICB9O1xuICBpZiAoMCAhPT0gaSAmJiAoZi5hZGRJbml0aWFsaXplciA9IG9sZF9jcmVhdGVBZGRJbml0aWFsaXplck1ldGhvZChvLCBwKSksIGwpIHtcbiAgICBkID0gMiwgdSA9IFN5bWJvbCh0KTtcbiAgICB2YXIgdiA9IHt9O1xuICAgIDAgPT09IGkgPyAodi5nZXQgPSBhLmdldCwgdi5zZXQgPSBhLnNldCkgOiAyID09PSBpID8gdi5nZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gYS52YWx1ZTtcbiAgICB9IDogKDEgIT09IGkgJiYgMyAhPT0gaSB8fCAodi5nZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gYS5nZXQuY2FsbCh0aGlzKTtcbiAgICB9KSwgMSAhPT0gaSAmJiA0ICE9PSBpIHx8ICh2LnNldCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBhLnNldC5jYWxsKHRoaXMsIGUpO1xuICAgIH0pKSwgZi5hY2Nlc3MgPSB2O1xuICB9IGVsc2UgZCA9IDEsIHUgPSB0O1xuICB0cnkge1xuICAgIHJldHVybiBlKHMsIE9iamVjdC5hc3NpZ24oZiwgb2xkX2NyZWF0ZU1ldGFkYXRhTWV0aG9kc0ZvclByb3BlcnR5KHIsIGQsIHUsIHApKSk7XG4gIH0gZmluYWxseSB7XG4gICAgcC52ID0gITA7XG4gIH1cbn1cbmZ1bmN0aW9uIG9sZF9hc3NlcnROb3RGaW5pc2hlZChlLCB0KSB7XG4gIGlmIChlLnYpIHRocm93IG5ldyBFcnJvcihcImF0dGVtcHRlZCB0byBjYWxsIFwiICsgdCArIFwiIGFmdGVyIGRlY29yYXRpb24gd2FzIGZpbmlzaGVkXCIpO1xufVxuZnVuY3Rpb24gb2xkX2Fzc2VydE1ldGFkYXRhS2V5KGUpIHtcbiAgaWYgKFwic3ltYm9sXCIgIT0gdHlwZW9mIGUpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJNZXRhZGF0YSBrZXlzIG11c3QgYmUgc3ltYm9scywgcmVjZWl2ZWQ6IFwiICsgZSk7XG59XG5mdW5jdGlvbiBvbGRfYXNzZXJ0Q2FsbGFibGUoZSwgdCkge1xuICBpZiAoXCJmdW5jdGlvblwiICE9IHR5cGVvZiBlKSB0aHJvdyBuZXcgVHlwZUVycm9yKHQgKyBcIiBtdXN0IGJlIGEgZnVuY3Rpb25cIik7XG59XG5mdW5jdGlvbiBvbGRfYXNzZXJ0VmFsaWRSZXR1cm5WYWx1ZShlLCB0KSB7XG4gIHZhciBhID0gdHlwZW9mIHQ7XG4gIGlmICgxID09PSBlKSB7XG4gICAgaWYgKFwib2JqZWN0XCIgIT09IGEgfHwgbnVsbCA9PT0gdCkgdGhyb3cgbmV3IFR5cGVFcnJvcihcImFjY2Vzc29yIGRlY29yYXRvcnMgbXVzdCByZXR1cm4gYW4gb2JqZWN0IHdpdGggZ2V0LCBzZXQsIG9yIGluaXQgcHJvcGVydGllcyBvciB2b2lkIDBcIik7XG4gICAgdm9pZCAwICE9PSB0LmdldCAmJiBvbGRfYXNzZXJ0Q2FsbGFibGUodC5nZXQsIFwiYWNjZXNzb3IuZ2V0XCIpLCB2b2lkIDAgIT09IHQuc2V0ICYmIG9sZF9hc3NlcnRDYWxsYWJsZSh0LnNldCwgXCJhY2Nlc3Nvci5zZXRcIiksIHZvaWQgMCAhPT0gdC5pbml0ICYmIG9sZF9hc3NlcnRDYWxsYWJsZSh0LmluaXQsIFwiYWNjZXNzb3IuaW5pdFwiKSwgdm9pZCAwICE9PSB0LmluaXRpYWxpemVyICYmIG9sZF9hc3NlcnRDYWxsYWJsZSh0LmluaXRpYWxpemVyLCBcImFjY2Vzc29yLmluaXRpYWxpemVyXCIpO1xuICB9IGVsc2UgaWYgKFwiZnVuY3Rpb25cIiAhPT0gYSkge1xuICAgIHZhciByO1xuICAgIHRocm93IHIgPSAwID09PSBlID8gXCJmaWVsZFwiIDogMTAgPT09IGUgPyBcImNsYXNzXCIgOiBcIm1ldGhvZFwiLCBuZXcgVHlwZUVycm9yKHIgKyBcIiBkZWNvcmF0b3JzIG11c3QgcmV0dXJuIGEgZnVuY3Rpb24gb3Igdm9pZCAwXCIpO1xuICB9XG59XG5mdW5jdGlvbiBvbGRfZ2V0SW5pdChlKSB7XG4gIHZhciB0O1xuICByZXR1cm4gbnVsbCA9PSAodCA9IGUuaW5pdCkgJiYgKHQgPSBlLmluaXRpYWxpemVyKSAmJiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBjb25zb2xlICYmIGNvbnNvbGUud2FybihcIi5pbml0aWFsaXplciBoYXMgYmVlbiByZW5hbWVkIHRvIC5pbml0IGFzIG9mIE1hcmNoIDIwMjJcIiksIHQ7XG59XG5mdW5jdGlvbiBvbGRfYXBwbHlNZW1iZXJEZWMoZSwgdCwgYSwgciwgbywgaSwgbiwgbCwgcykge1xuICB2YXIgYyxcbiAgICBkLFxuICAgIHUsXG4gICAgZixcbiAgICBwLFxuICAgIHYsXG4gICAgaCA9IGFbMF07XG4gIGlmIChuID8gYyA9IDAgPT09IG8gfHwgMSA9PT0gbyA/IHtcbiAgICBnZXQ6IGFbM10sXG4gICAgc2V0OiBhWzRdXG4gIH0gOiAzID09PSBvID8ge1xuICAgIGdldDogYVszXVxuICB9IDogNCA9PT0gbyA/IHtcbiAgICBzZXQ6IGFbM11cbiAgfSA6IHtcbiAgICB2YWx1ZTogYVszXVxuICB9IDogMCAhPT0gbyAmJiAoYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgcikpLCAxID09PSBvID8gdSA9IHtcbiAgICBnZXQ6IGMuZ2V0LFxuICAgIHNldDogYy5zZXRcbiAgfSA6IDIgPT09IG8gPyB1ID0gYy52YWx1ZSA6IDMgPT09IG8gPyB1ID0gYy5nZXQgOiA0ID09PSBvICYmICh1ID0gYy5zZXQpLCBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGgpIHZvaWQgMCAhPT0gKGYgPSBvbGRfbWVtYmVyRGVjKGgsIHIsIGMsIGwsIHMsIG8sIGksIG4sIHUpKSAmJiAob2xkX2Fzc2VydFZhbGlkUmV0dXJuVmFsdWUobywgZiksIDAgPT09IG8gPyBkID0gZiA6IDEgPT09IG8gPyAoZCA9IG9sZF9nZXRJbml0KGYpLCBwID0gZi5nZXQgfHwgdS5nZXQsIHYgPSBmLnNldCB8fCB1LnNldCwgdSA9IHtcbiAgICBnZXQ6IHAsXG4gICAgc2V0OiB2XG4gIH0pIDogdSA9IGYpO2Vsc2UgZm9yICh2YXIgeSA9IGgubGVuZ3RoIC0gMTsgeSA+PSAwOyB5LS0pIHtcbiAgICB2YXIgYjtcbiAgICBpZiAodm9pZCAwICE9PSAoZiA9IG9sZF9tZW1iZXJEZWMoaFt5XSwgciwgYywgbCwgcywgbywgaSwgbiwgdSkpKSBvbGRfYXNzZXJ0VmFsaWRSZXR1cm5WYWx1ZShvLCBmKSwgMCA9PT0gbyA/IGIgPSBmIDogMSA9PT0gbyA/IChiID0gb2xkX2dldEluaXQoZiksIHAgPSBmLmdldCB8fCB1LmdldCwgdiA9IGYuc2V0IHx8IHUuc2V0LCB1ID0ge1xuICAgICAgZ2V0OiBwLFxuICAgICAgc2V0OiB2XG4gICAgfSkgOiB1ID0gZiwgdm9pZCAwICE9PSBiICYmICh2b2lkIDAgPT09IGQgPyBkID0gYiA6IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZCA/IGQgPSBbZCwgYl0gOiBkLnB1c2goYikpO1xuICB9XG4gIGlmICgwID09PSBvIHx8IDEgPT09IG8pIHtcbiAgICBpZiAodm9pZCAwID09PSBkKSBkID0gZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgIHJldHVybiB0O1xuICAgIH07ZWxzZSBpZiAoXCJmdW5jdGlvblwiICE9IHR5cGVvZiBkKSB7XG4gICAgICB2YXIgZyA9IGQ7XG4gICAgICBkID0gZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgZm9yICh2YXIgYSA9IHQsIHIgPSAwOyByIDwgZy5sZW5ndGg7IHIrKykgYSA9IGdbcl0uY2FsbChlLCBhKTtcbiAgICAgICAgcmV0dXJuIGE7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgbSA9IGQ7XG4gICAgICBkID0gZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIG0uY2FsbChlLCB0KTtcbiAgICAgIH07XG4gICAgfVxuICAgIGUucHVzaChkKTtcbiAgfVxuICAwICE9PSBvICYmICgxID09PSBvID8gKGMuZ2V0ID0gdS5nZXQsIGMuc2V0ID0gdS5zZXQpIDogMiA9PT0gbyA/IGMudmFsdWUgPSB1IDogMyA9PT0gbyA/IGMuZ2V0ID0gdSA6IDQgPT09IG8gJiYgKGMuc2V0ID0gdSksIG4gPyAxID09PSBvID8gKGUucHVzaChmdW5jdGlvbiAoZSwgdCkge1xuICAgIHJldHVybiB1LmdldC5jYWxsKGUsIHQpO1xuICB9KSwgZS5wdXNoKGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgcmV0dXJuIHUuc2V0LmNhbGwoZSwgdCk7XG4gIH0pKSA6IDIgPT09IG8gPyBlLnB1c2godSkgOiBlLnB1c2goZnVuY3Rpb24gKGUsIHQpIHtcbiAgICByZXR1cm4gdS5jYWxsKGUsIHQpO1xuICB9KSA6IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCByLCBjKSk7XG59XG5mdW5jdGlvbiBvbGRfYXBwbHlNZW1iZXJEZWNzKGUsIHQsIGEsIHIsIG8pIHtcbiAgZm9yICh2YXIgaSwgbiwgbCA9IG5ldyBNYXAoKSwgcyA9IG5ldyBNYXAoKSwgYyA9IDA7IGMgPCBvLmxlbmd0aDsgYysrKSB7XG4gICAgdmFyIGQgPSBvW2NdO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGQpKSB7XG4gICAgICB2YXIgdSxcbiAgICAgICAgZixcbiAgICAgICAgcCxcbiAgICAgICAgdiA9IGRbMV0sXG4gICAgICAgIGggPSBkWzJdLFxuICAgICAgICB5ID0gZC5sZW5ndGggPiAzLFxuICAgICAgICBiID0gdiA+PSA1O1xuICAgICAgaWYgKGIgPyAodSA9IHQsIGYgPSByLCAwICE9PSAodiAtPSA1KSAmJiAocCA9IG4gPSBuIHx8IFtdKSkgOiAodSA9IHQucHJvdG90eXBlLCBmID0gYSwgMCAhPT0gdiAmJiAocCA9IGkgPSBpIHx8IFtdKSksIDAgIT09IHYgJiYgIXkpIHtcbiAgICAgICAgdmFyIGcgPSBiID8gcyA6IGwsXG4gICAgICAgICAgbSA9IGcuZ2V0KGgpIHx8IDA7XG4gICAgICAgIGlmICghMCA9PT0gbSB8fCAzID09PSBtICYmIDQgIT09IHYgfHwgNCA9PT0gbSAmJiAzICE9PSB2KSB0aHJvdyBuZXcgRXJyb3IoXCJBdHRlbXB0ZWQgdG8gZGVjb3JhdGUgYSBwdWJsaWMgbWV0aG9kL2FjY2Vzc29yIHRoYXQgaGFzIHRoZSBzYW1lIG5hbWUgYXMgYSBwcmV2aW91c2x5IGRlY29yYXRlZCBwdWJsaWMgbWV0aG9kL2FjY2Vzc29yLiBUaGlzIGlzIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkIGJ5IHRoZSBkZWNvcmF0b3JzIHBsdWdpbi4gUHJvcGVydHkgbmFtZSB3YXM6IFwiICsgaCk7XG4gICAgICAgICFtICYmIHYgPiAyID8gZy5zZXQoaCwgdikgOiBnLnNldChoLCAhMCk7XG4gICAgICB9XG4gICAgICBvbGRfYXBwbHlNZW1iZXJEZWMoZSwgdSwgZCwgaCwgdiwgYiwgeSwgZiwgcCk7XG4gICAgfVxuICB9XG4gIG9sZF9wdXNoSW5pdGlhbGl6ZXJzKGUsIGkpLCBvbGRfcHVzaEluaXRpYWxpemVycyhlLCBuKTtcbn1cbmZ1bmN0aW9uIG9sZF9wdXNoSW5pdGlhbGl6ZXJzKGUsIHQpIHtcbiAgdCAmJiBlLnB1c2goZnVuY3Rpb24gKGUpIHtcbiAgICBmb3IgKHZhciBhID0gMDsgYSA8IHQubGVuZ3RoOyBhKyspIHRbYV0uY2FsbChlKTtcbiAgICByZXR1cm4gZTtcbiAgfSk7XG59XG5mdW5jdGlvbiBvbGRfYXBwbHlDbGFzc0RlY3MoZSwgdCwgYSwgcikge1xuICBpZiAoci5sZW5ndGggPiAwKSB7XG4gICAgZm9yICh2YXIgbyA9IFtdLCBpID0gdCwgbiA9IHQubmFtZSwgbCA9IHIubGVuZ3RoIC0gMTsgbCA+PSAwOyBsLS0pIHtcbiAgICAgIHZhciBzID0ge1xuICAgICAgICB2OiAhMVxuICAgICAgfTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBjID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICBraW5kOiBcImNsYXNzXCIsXG4gICAgICAgICAgICBuYW1lOiBuLFxuICAgICAgICAgICAgYWRkSW5pdGlhbGl6ZXI6IG9sZF9jcmVhdGVBZGRJbml0aWFsaXplck1ldGhvZChvLCBzKVxuICAgICAgICAgIH0sIG9sZF9jcmVhdGVNZXRhZGF0YU1ldGhvZHNGb3JQcm9wZXJ0eShhLCAwLCBuLCBzKSksXG4gICAgICAgICAgZCA9IHJbbF0oaSwgYyk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBzLnYgPSAhMDtcbiAgICAgIH1cbiAgICAgIHZvaWQgMCAhPT0gZCAmJiAob2xkX2Fzc2VydFZhbGlkUmV0dXJuVmFsdWUoMTAsIGQpLCBpID0gZCk7XG4gICAgfVxuICAgIGUucHVzaChpLCBmdW5jdGlvbiAoKSB7XG4gICAgICBmb3IgKHZhciBlID0gMDsgZSA8IG8ubGVuZ3RoOyBlKyspIG9bZV0uY2FsbChpKTtcbiAgICB9KTtcbiAgfVxufVxuZnVuY3Rpb24gX2FwcGx5RGVjcyhlLCB0LCBhKSB7XG4gIHZhciByID0gW10sXG4gICAgbyA9IHt9LFxuICAgIGkgPSB7fTtcbiAgcmV0dXJuIG9sZF9hcHBseU1lbWJlckRlY3MociwgZSwgaSwgbywgdCksIG9sZF9jb252ZXJ0TWV0YWRhdGFNYXBUb0ZpbmFsKGUucHJvdG90eXBlLCBpKSwgb2xkX2FwcGx5Q2xhc3NEZWNzKHIsIGUsIG8sIGEpLCBvbGRfY29udmVydE1ldGFkYXRhTWFwVG9GaW5hbChlLCBvKSwgcjtcbn1cbmZ1bmN0aW9uIGFwcGx5RGVjczIyMDNGYWN0b3J5KCkge1xuICBmdW5jdGlvbiBjcmVhdGVBZGRJbml0aWFsaXplck1ldGhvZChlLCB0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAhZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgaWYgKGUudikgdGhyb3cgbmV3IEVycm9yKFwiYXR0ZW1wdGVkIHRvIGNhbGwgXCIgKyB0ICsgXCIgYWZ0ZXIgZGVjb3JhdGlvbiB3YXMgZmluaXNoZWRcIik7XG4gICAgICB9KHQsIFwiYWRkSW5pdGlhbGl6ZXJcIiksIGFzc2VydENhbGxhYmxlKHIsIFwiQW4gaW5pdGlhbGl6ZXJcIiksIGUucHVzaChyKTtcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIG1lbWJlckRlYyhlLCB0LCByLCBhLCBuLCBpLCBzLCBvKSB7XG4gICAgdmFyIGM7XG4gICAgc3dpdGNoIChuKSB7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIGMgPSBcImFjY2Vzc29yXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyOlxuICAgICAgICBjID0gXCJtZXRob2RcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDM6XG4gICAgICAgIGMgPSBcImdldHRlclwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNDpcbiAgICAgICAgYyA9IFwic2V0dGVyXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYyA9IFwiZmllbGRcIjtcbiAgICB9XG4gICAgdmFyIGwsXG4gICAgICB1LFxuICAgICAgZiA9IHtcbiAgICAgICAga2luZDogYyxcbiAgICAgICAgbmFtZTogcyA/IFwiI1wiICsgdCA6IHQsXG4gICAgICAgIHN0YXRpYzogaSxcbiAgICAgICAgcHJpdmF0ZTogc1xuICAgICAgfSxcbiAgICAgIHAgPSB7XG4gICAgICAgIHY6ICExXG4gICAgICB9O1xuICAgIDAgIT09IG4gJiYgKGYuYWRkSW5pdGlhbGl6ZXIgPSBjcmVhdGVBZGRJbml0aWFsaXplck1ldGhvZChhLCBwKSksIDAgPT09IG4gPyBzID8gKGwgPSByLmdldCwgdSA9IHIuc2V0KSA6IChsID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXNbdF07XG4gICAgfSwgdSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzW3RdID0gZTtcbiAgICB9KSA6IDIgPT09IG4gPyBsID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHIudmFsdWU7XG4gICAgfSA6ICgxICE9PSBuICYmIDMgIT09IG4gfHwgKGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gci5nZXQuY2FsbCh0aGlzKTtcbiAgICB9KSwgMSAhPT0gbiAmJiA0ICE9PSBuIHx8ICh1ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHIuc2V0LmNhbGwodGhpcywgZSk7XG4gICAgfSkpLCBmLmFjY2VzcyA9IGwgJiYgdSA/IHtcbiAgICAgIGdldDogbCxcbiAgICAgIHNldDogdVxuICAgIH0gOiBsID8ge1xuICAgICAgZ2V0OiBsXG4gICAgfSA6IHtcbiAgICAgIHNldDogdVxuICAgIH07XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBlKG8sIGYpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBwLnYgPSAhMDtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gYXNzZXJ0Q2FsbGFibGUoZSwgdCkge1xuICAgIGlmIChcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIGUpIHRocm93IG5ldyBUeXBlRXJyb3IodCArIFwiIG11c3QgYmUgYSBmdW5jdGlvblwiKTtcbiAgfVxuICBmdW5jdGlvbiBhc3NlcnRWYWxpZFJldHVyblZhbHVlKGUsIHQpIHtcbiAgICB2YXIgciA9IHR5cGVvZiB0O1xuICAgIGlmICgxID09PSBlKSB7XG4gICAgICBpZiAoXCJvYmplY3RcIiAhPT0gciB8fCBudWxsID09PSB0KSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYWNjZXNzb3IgZGVjb3JhdG9ycyBtdXN0IHJldHVybiBhbiBvYmplY3Qgd2l0aCBnZXQsIHNldCwgb3IgaW5pdCBwcm9wZXJ0aWVzIG9yIHZvaWQgMFwiKTtcbiAgICAgIHZvaWQgMCAhPT0gdC5nZXQgJiYgYXNzZXJ0Q2FsbGFibGUodC5nZXQsIFwiYWNjZXNzb3IuZ2V0XCIpLCB2b2lkIDAgIT09IHQuc2V0ICYmIGFzc2VydENhbGxhYmxlKHQuc2V0LCBcImFjY2Vzc29yLnNldFwiKSwgdm9pZCAwICE9PSB0LmluaXQgJiYgYXNzZXJ0Q2FsbGFibGUodC5pbml0LCBcImFjY2Vzc29yLmluaXRcIik7XG4gICAgfSBlbHNlIGlmIChcImZ1bmN0aW9uXCIgIT09IHIpIHtcbiAgICAgIHZhciBhO1xuICAgICAgdGhyb3cgYSA9IDAgPT09IGUgPyBcImZpZWxkXCIgOiAxMCA9PT0gZSA/IFwiY2xhc3NcIiA6IFwibWV0aG9kXCIsIG5ldyBUeXBlRXJyb3IoYSArIFwiIGRlY29yYXRvcnMgbXVzdCByZXR1cm4gYSBmdW5jdGlvbiBvciB2b2lkIDBcIik7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGFwcGx5TWVtYmVyRGVjKGUsIHQsIHIsIGEsIG4sIGksIHMsIG8pIHtcbiAgICB2YXIgYyxcbiAgICAgIGwsXG4gICAgICB1LFxuICAgICAgZixcbiAgICAgIHAsXG4gICAgICBkLFxuICAgICAgaCA9IHJbMF07XG4gICAgaWYgKHMgPyBjID0gMCA9PT0gbiB8fCAxID09PSBuID8ge1xuICAgICAgZ2V0OiByWzNdLFxuICAgICAgc2V0OiByWzRdXG4gICAgfSA6IDMgPT09IG4gPyB7XG4gICAgICBnZXQ6IHJbM11cbiAgICB9IDogNCA9PT0gbiA/IHtcbiAgICAgIHNldDogclszXVxuICAgIH0gOiB7XG4gICAgICB2YWx1ZTogclszXVxuICAgIH0gOiAwICE9PSBuICYmIChjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LCBhKSksIDEgPT09IG4gPyB1ID0ge1xuICAgICAgZ2V0OiBjLmdldCxcbiAgICAgIHNldDogYy5zZXRcbiAgICB9IDogMiA9PT0gbiA/IHUgPSBjLnZhbHVlIDogMyA9PT0gbiA/IHUgPSBjLmdldCA6IDQgPT09IG4gJiYgKHUgPSBjLnNldCksIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgaCkgdm9pZCAwICE9PSAoZiA9IG1lbWJlckRlYyhoLCBhLCBjLCBvLCBuLCBpLCBzLCB1KSkgJiYgKGFzc2VydFZhbGlkUmV0dXJuVmFsdWUobiwgZiksIDAgPT09IG4gPyBsID0gZiA6IDEgPT09IG4gPyAobCA9IGYuaW5pdCwgcCA9IGYuZ2V0IHx8IHUuZ2V0LCBkID0gZi5zZXQgfHwgdS5zZXQsIHUgPSB7XG4gICAgICBnZXQ6IHAsXG4gICAgICBzZXQ6IGRcbiAgICB9KSA6IHUgPSBmKTtlbHNlIGZvciAodmFyIHYgPSBoLmxlbmd0aCAtIDE7IHYgPj0gMDsgdi0tKSB7XG4gICAgICB2YXIgZztcbiAgICAgIGlmICh2b2lkIDAgIT09IChmID0gbWVtYmVyRGVjKGhbdl0sIGEsIGMsIG8sIG4sIGksIHMsIHUpKSkgYXNzZXJ0VmFsaWRSZXR1cm5WYWx1ZShuLCBmKSwgMCA9PT0gbiA/IGcgPSBmIDogMSA9PT0gbiA/IChnID0gZi5pbml0LCBwID0gZi5nZXQgfHwgdS5nZXQsIGQgPSBmLnNldCB8fCB1LnNldCwgdSA9IHtcbiAgICAgICAgZ2V0OiBwLFxuICAgICAgICBzZXQ6IGRcbiAgICAgIH0pIDogdSA9IGYsIHZvaWQgMCAhPT0gZyAmJiAodm9pZCAwID09PSBsID8gbCA9IGcgOiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGwgPyBsID0gW2wsIGddIDogbC5wdXNoKGcpKTtcbiAgICB9XG4gICAgaWYgKDAgPT09IG4gfHwgMSA9PT0gbikge1xuICAgICAgaWYgKHZvaWQgMCA9PT0gbCkgbCA9IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgIHJldHVybiB0O1xuICAgICAgfTtlbHNlIGlmIChcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIGwpIHtcbiAgICAgICAgdmFyIHkgPSBsO1xuICAgICAgICBsID0gZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICBmb3IgKHZhciByID0gdCwgYSA9IDA7IGEgPCB5Lmxlbmd0aDsgYSsrKSByID0geVthXS5jYWxsKGUsIHIpO1xuICAgICAgICAgIHJldHVybiByO1xuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIG0gPSBsO1xuICAgICAgICBsID0gZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICByZXR1cm4gbS5jYWxsKGUsIHQpO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgZS5wdXNoKGwpO1xuICAgIH1cbiAgICAwICE9PSBuICYmICgxID09PSBuID8gKGMuZ2V0ID0gdS5nZXQsIGMuc2V0ID0gdS5zZXQpIDogMiA9PT0gbiA/IGMudmFsdWUgPSB1IDogMyA9PT0gbiA/IGMuZ2V0ID0gdSA6IDQgPT09IG4gJiYgKGMuc2V0ID0gdSksIHMgPyAxID09PSBuID8gKGUucHVzaChmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgcmV0dXJuIHUuZ2V0LmNhbGwoZSwgdCk7XG4gICAgfSksIGUucHVzaChmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgcmV0dXJuIHUuc2V0LmNhbGwoZSwgdCk7XG4gICAgfSkpIDogMiA9PT0gbiA/IGUucHVzaCh1KSA6IGUucHVzaChmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgcmV0dXJuIHUuY2FsbChlLCB0KTtcbiAgICB9KSA6IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBhLCBjKSk7XG4gIH1cbiAgZnVuY3Rpb24gcHVzaEluaXRpYWxpemVycyhlLCB0KSB7XG4gICAgdCAmJiBlLnB1c2goZnVuY3Rpb24gKGUpIHtcbiAgICAgIGZvciAodmFyIHIgPSAwOyByIDwgdC5sZW5ndGg7IHIrKykgdFtyXS5jYWxsKGUpO1xuICAgICAgcmV0dXJuIGU7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uIChlLCB0LCByKSB7XG4gICAgdmFyIGEgPSBbXTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGUsIHQsIHIpIHtcbiAgICAgIGZvciAodmFyIGEsIG4sIGkgPSBuZXcgTWFwKCksIHMgPSBuZXcgTWFwKCksIG8gPSAwOyBvIDwgci5sZW5ndGg7IG8rKykge1xuICAgICAgICB2YXIgYyA9IHJbb107XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGMpKSB7XG4gICAgICAgICAgdmFyIGwsXG4gICAgICAgICAgICB1LFxuICAgICAgICAgICAgZiA9IGNbMV0sXG4gICAgICAgICAgICBwID0gY1syXSxcbiAgICAgICAgICAgIGQgPSBjLmxlbmd0aCA+IDMsXG4gICAgICAgICAgICBoID0gZiA+PSA1O1xuICAgICAgICAgIGlmIChoID8gKGwgPSB0LCAwICE9IChmIC09IDUpICYmICh1ID0gbiA9IG4gfHwgW10pKSA6IChsID0gdC5wcm90b3R5cGUsIDAgIT09IGYgJiYgKHUgPSBhID0gYSB8fCBbXSkpLCAwICE9PSBmICYmICFkKSB7XG4gICAgICAgICAgICB2YXIgdiA9IGggPyBzIDogaSxcbiAgICAgICAgICAgICAgZyA9IHYuZ2V0KHApIHx8IDA7XG4gICAgICAgICAgICBpZiAoITAgPT09IGcgfHwgMyA9PT0gZyAmJiA0ICE9PSBmIHx8IDQgPT09IGcgJiYgMyAhPT0gZikgdGhyb3cgbmV3IEVycm9yKFwiQXR0ZW1wdGVkIHRvIGRlY29yYXRlIGEgcHVibGljIG1ldGhvZC9hY2Nlc3NvciB0aGF0IGhhcyB0aGUgc2FtZSBuYW1lIGFzIGEgcHJldmlvdXNseSBkZWNvcmF0ZWQgcHVibGljIG1ldGhvZC9hY2Nlc3Nvci4gVGhpcyBpcyBub3QgY3VycmVudGx5IHN1cHBvcnRlZCBieSB0aGUgZGVjb3JhdG9ycyBwbHVnaW4uIFByb3BlcnR5IG5hbWUgd2FzOiBcIiArIHApO1xuICAgICAgICAgICAgIWcgJiYgZiA+IDIgPyB2LnNldChwLCBmKSA6IHYuc2V0KHAsICEwKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYXBwbHlNZW1iZXJEZWMoZSwgbCwgYywgcCwgZiwgaCwgZCwgdSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHB1c2hJbml0aWFsaXplcnMoZSwgYSksIHB1c2hJbml0aWFsaXplcnMoZSwgbik7XG4gICAgfShhLCBlLCB0KSwgZnVuY3Rpb24gKGUsIHQsIHIpIHtcbiAgICAgIGlmIChyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZm9yICh2YXIgYSA9IFtdLCBuID0gdCwgaSA9IHQubmFtZSwgcyA9IHIubGVuZ3RoIC0gMTsgcyA+PSAwOyBzLS0pIHtcbiAgICAgICAgICB2YXIgbyA9IHtcbiAgICAgICAgICAgIHY6ICExXG4gICAgICAgICAgfTtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIGMgPSByW3NdKG4sIHtcbiAgICAgICAgICAgICAga2luZDogXCJjbGFzc1wiLFxuICAgICAgICAgICAgICBuYW1lOiBpLFxuICAgICAgICAgICAgICBhZGRJbml0aWFsaXplcjogY3JlYXRlQWRkSW5pdGlhbGl6ZXJNZXRob2QoYSwgbylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBvLnYgPSAhMDtcbiAgICAgICAgICB9XG4gICAgICAgICAgdm9pZCAwICE9PSBjICYmIChhc3NlcnRWYWxpZFJldHVyblZhbHVlKDEwLCBjKSwgbiA9IGMpO1xuICAgICAgICB9XG4gICAgICAgIGUucHVzaChuLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgZm9yICh2YXIgZSA9IDA7IGUgPCBhLmxlbmd0aDsgZSsrKSBhW2VdLmNhbGwobik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0oYSwgZSwgciksIGE7XG4gIH07XG59XG52YXIgYXBwbHlEZWNzMjIwM0ltcGw7XG5mdW5jdGlvbiBfYXBwbHlEZWNzMjIwMyhlLCB0LCByKSB7XG4gIHJldHVybiAoYXBwbHlEZWNzMjIwM0ltcGwgPSBhcHBseURlY3MyMjAzSW1wbCB8fCBhcHBseURlY3MyMjAzRmFjdG9yeSgpKShlLCB0LCByKTtcbn1cbmZ1bmN0aW9uIGFwcGx5RGVjczIyMDNSRmFjdG9yeSgpIHtcbiAgZnVuY3Rpb24gY3JlYXRlQWRkSW5pdGlhbGl6ZXJNZXRob2QoZSwgdCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgIWZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgIGlmIChlLnYpIHRocm93IG5ldyBFcnJvcihcImF0dGVtcHRlZCB0byBjYWxsIFwiICsgdCArIFwiIGFmdGVyIGRlY29yYXRpb24gd2FzIGZpbmlzaGVkXCIpO1xuICAgICAgfSh0LCBcImFkZEluaXRpYWxpemVyXCIpLCBhc3NlcnRDYWxsYWJsZShyLCBcIkFuIGluaXRpYWxpemVyXCIpLCBlLnB1c2gocik7XG4gICAgfTtcbiAgfVxuICBmdW5jdGlvbiBtZW1iZXJEZWMoZSwgdCwgciwgbiwgYSwgaSwgcywgbykge1xuICAgIHZhciBjO1xuICAgIHN3aXRjaCAoYSkge1xuICAgICAgY2FzZSAxOlxuICAgICAgICBjID0gXCJhY2Nlc3NvclwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgYyA9IFwibWV0aG9kXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzOlxuICAgICAgICBjID0gXCJnZXR0ZXJcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDQ6XG4gICAgICAgIGMgPSBcInNldHRlclwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGMgPSBcImZpZWxkXCI7XG4gICAgfVxuICAgIHZhciBsLFxuICAgICAgdSxcbiAgICAgIGYgPSB7XG4gICAgICAgIGtpbmQ6IGMsXG4gICAgICAgIG5hbWU6IHMgPyBcIiNcIiArIHQgOiB0LFxuICAgICAgICBzdGF0aWM6IGksXG4gICAgICAgIHByaXZhdGU6IHNcbiAgICAgIH0sXG4gICAgICBwID0ge1xuICAgICAgICB2OiAhMVxuICAgICAgfTtcbiAgICAwICE9PSBhICYmIChmLmFkZEluaXRpYWxpemVyID0gY3JlYXRlQWRkSW5pdGlhbGl6ZXJNZXRob2QobiwgcCkpLCAwID09PSBhID8gcyA/IChsID0gci5nZXQsIHUgPSByLnNldCkgOiAobCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzW3RdO1xuICAgIH0sIHUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpc1t0XSA9IGU7XG4gICAgfSkgOiAyID09PSBhID8gbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiByLnZhbHVlO1xuICAgIH0gOiAoMSAhPT0gYSAmJiAzICE9PSBhIHx8IChsID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHIuZ2V0LmNhbGwodGhpcyk7XG4gICAgfSksIDEgIT09IGEgJiYgNCAhPT0gYSB8fCAodSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICByLnNldC5jYWxsKHRoaXMsIGUpO1xuICAgIH0pKSwgZi5hY2Nlc3MgPSBsICYmIHUgPyB7XG4gICAgICBnZXQ6IGwsXG4gICAgICBzZXQ6IHVcbiAgICB9IDogbCA/IHtcbiAgICAgIGdldDogbFxuICAgIH0gOiB7XG4gICAgICBzZXQ6IHVcbiAgICB9O1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gZShvLCBmKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgcC52ID0gITA7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGFzc2VydENhbGxhYmxlKGUsIHQpIHtcbiAgICBpZiAoXCJmdW5jdGlvblwiICE9IHR5cGVvZiBlKSB0aHJvdyBuZXcgVHlwZUVycm9yKHQgKyBcIiBtdXN0IGJlIGEgZnVuY3Rpb25cIik7XG4gIH1cbiAgZnVuY3Rpb24gYXNzZXJ0VmFsaWRSZXR1cm5WYWx1ZShlLCB0KSB7XG4gICAgdmFyIHIgPSB0eXBlb2YgdDtcbiAgICBpZiAoMSA9PT0gZSkge1xuICAgICAgaWYgKFwib2JqZWN0XCIgIT09IHIgfHwgbnVsbCA9PT0gdCkgdGhyb3cgbmV3IFR5cGVFcnJvcihcImFjY2Vzc29yIGRlY29yYXRvcnMgbXVzdCByZXR1cm4gYW4gb2JqZWN0IHdpdGggZ2V0LCBzZXQsIG9yIGluaXQgcHJvcGVydGllcyBvciB2b2lkIDBcIik7XG4gICAgICB2b2lkIDAgIT09IHQuZ2V0ICYmIGFzc2VydENhbGxhYmxlKHQuZ2V0LCBcImFjY2Vzc29yLmdldFwiKSwgdm9pZCAwICE9PSB0LnNldCAmJiBhc3NlcnRDYWxsYWJsZSh0LnNldCwgXCJhY2Nlc3Nvci5zZXRcIiksIHZvaWQgMCAhPT0gdC5pbml0ICYmIGFzc2VydENhbGxhYmxlKHQuaW5pdCwgXCJhY2Nlc3Nvci5pbml0XCIpO1xuICAgIH0gZWxzZSBpZiAoXCJmdW5jdGlvblwiICE9PSByKSB7XG4gICAgICB2YXIgbjtcbiAgICAgIHRocm93IG4gPSAwID09PSBlID8gXCJmaWVsZFwiIDogMTAgPT09IGUgPyBcImNsYXNzXCIgOiBcIm1ldGhvZFwiLCBuZXcgVHlwZUVycm9yKG4gKyBcIiBkZWNvcmF0b3JzIG11c3QgcmV0dXJuIGEgZnVuY3Rpb24gb3Igdm9pZCAwXCIpO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBhcHBseU1lbWJlckRlYyhlLCB0LCByLCBuLCBhLCBpLCBzLCBvKSB7XG4gICAgdmFyIGMsXG4gICAgICBsLFxuICAgICAgdSxcbiAgICAgIGYsXG4gICAgICBwLFxuICAgICAgZCxcbiAgICAgIGggPSByWzBdO1xuICAgIGlmIChzID8gYyA9IDAgPT09IGEgfHwgMSA9PT0gYSA/IHtcbiAgICAgIGdldDogclszXSxcbiAgICAgIHNldDogcls0XVxuICAgIH0gOiAzID09PSBhID8ge1xuICAgICAgZ2V0OiByWzNdXG4gICAgfSA6IDQgPT09IGEgPyB7XG4gICAgICBzZXQ6IHJbM11cbiAgICB9IDoge1xuICAgICAgdmFsdWU6IHJbM11cbiAgICB9IDogMCAhPT0gYSAmJiAoYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgbikpLCAxID09PSBhID8gdSA9IHtcbiAgICAgIGdldDogYy5nZXQsXG4gICAgICBzZXQ6IGMuc2V0XG4gICAgfSA6IDIgPT09IGEgPyB1ID0gYy52YWx1ZSA6IDMgPT09IGEgPyB1ID0gYy5nZXQgOiA0ID09PSBhICYmICh1ID0gYy5zZXQpLCBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGgpIHZvaWQgMCAhPT0gKGYgPSBtZW1iZXJEZWMoaCwgbiwgYywgbywgYSwgaSwgcywgdSkpICYmIChhc3NlcnRWYWxpZFJldHVyblZhbHVlKGEsIGYpLCAwID09PSBhID8gbCA9IGYgOiAxID09PSBhID8gKGwgPSBmLmluaXQsIHAgPSBmLmdldCB8fCB1LmdldCwgZCA9IGYuc2V0IHx8IHUuc2V0LCB1ID0ge1xuICAgICAgZ2V0OiBwLFxuICAgICAgc2V0OiBkXG4gICAgfSkgOiB1ID0gZik7ZWxzZSBmb3IgKHZhciB2ID0gaC5sZW5ndGggLSAxOyB2ID49IDA7IHYtLSkge1xuICAgICAgdmFyIGc7XG4gICAgICBpZiAodm9pZCAwICE9PSAoZiA9IG1lbWJlckRlYyhoW3ZdLCBuLCBjLCBvLCBhLCBpLCBzLCB1KSkpIGFzc2VydFZhbGlkUmV0dXJuVmFsdWUoYSwgZiksIDAgPT09IGEgPyBnID0gZiA6IDEgPT09IGEgPyAoZyA9IGYuaW5pdCwgcCA9IGYuZ2V0IHx8IHUuZ2V0LCBkID0gZi5zZXQgfHwgdS5zZXQsIHUgPSB7XG4gICAgICAgIGdldDogcCxcbiAgICAgICAgc2V0OiBkXG4gICAgICB9KSA6IHUgPSBmLCB2b2lkIDAgIT09IGcgJiYgKHZvaWQgMCA9PT0gbCA/IGwgPSBnIDogXCJmdW5jdGlvblwiID09IHR5cGVvZiBsID8gbCA9IFtsLCBnXSA6IGwucHVzaChnKSk7XG4gICAgfVxuICAgIGlmICgwID09PSBhIHx8IDEgPT09IGEpIHtcbiAgICAgIGlmICh2b2lkIDAgPT09IGwpIGwgPSBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICByZXR1cm4gdDtcbiAgICAgIH07ZWxzZSBpZiAoXCJmdW5jdGlvblwiICE9IHR5cGVvZiBsKSB7XG4gICAgICAgIHZhciB5ID0gbDtcbiAgICAgICAgbCA9IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgZm9yICh2YXIgciA9IHQsIG4gPSAwOyBuIDwgeS5sZW5ndGg7IG4rKykgciA9IHlbbl0uY2FsbChlLCByKTtcbiAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBtID0gbDtcbiAgICAgICAgbCA9IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgcmV0dXJuIG0uY2FsbChlLCB0KTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGUucHVzaChsKTtcbiAgICB9XG4gICAgMCAhPT0gYSAmJiAoMSA9PT0gYSA/IChjLmdldCA9IHUuZ2V0LCBjLnNldCA9IHUuc2V0KSA6IDIgPT09IGEgPyBjLnZhbHVlID0gdSA6IDMgPT09IGEgPyBjLmdldCA9IHUgOiA0ID09PSBhICYmIChjLnNldCA9IHUpLCBzID8gMSA9PT0gYSA/IChlLnB1c2goZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgIHJldHVybiB1LmdldC5jYWxsKGUsIHQpO1xuICAgIH0pLCBlLnB1c2goZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgIHJldHVybiB1LnNldC5jYWxsKGUsIHQpO1xuICAgIH0pKSA6IDIgPT09IGEgPyBlLnB1c2godSkgOiBlLnB1c2goZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgIHJldHVybiB1LmNhbGwoZSwgdCk7XG4gICAgfSkgOiBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgbiwgYykpO1xuICB9XG4gIGZ1bmN0aW9uIGFwcGx5TWVtYmVyRGVjcyhlLCB0KSB7XG4gICAgZm9yICh2YXIgciwgbiwgYSA9IFtdLCBpID0gbmV3IE1hcCgpLCBzID0gbmV3IE1hcCgpLCBvID0gMDsgbyA8IHQubGVuZ3RoOyBvKyspIHtcbiAgICAgIHZhciBjID0gdFtvXTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGMpKSB7XG4gICAgICAgIHZhciBsLFxuICAgICAgICAgIHUsXG4gICAgICAgICAgZiA9IGNbMV0sXG4gICAgICAgICAgcCA9IGNbMl0sXG4gICAgICAgICAgZCA9IGMubGVuZ3RoID4gMyxcbiAgICAgICAgICBoID0gZiA+PSA1O1xuICAgICAgICBpZiAoaCA/IChsID0gZSwgMCAhPT0gKGYgLT0gNSkgJiYgKHUgPSBuID0gbiB8fCBbXSkpIDogKGwgPSBlLnByb3RvdHlwZSwgMCAhPT0gZiAmJiAodSA9IHIgPSByIHx8IFtdKSksIDAgIT09IGYgJiYgIWQpIHtcbiAgICAgICAgICB2YXIgdiA9IGggPyBzIDogaSxcbiAgICAgICAgICAgIGcgPSB2LmdldChwKSB8fCAwO1xuICAgICAgICAgIGlmICghMCA9PT0gZyB8fCAzID09PSBnICYmIDQgIT09IGYgfHwgNCA9PT0gZyAmJiAzICE9PSBmKSB0aHJvdyBuZXcgRXJyb3IoXCJBdHRlbXB0ZWQgdG8gZGVjb3JhdGUgYSBwdWJsaWMgbWV0aG9kL2FjY2Vzc29yIHRoYXQgaGFzIHRoZSBzYW1lIG5hbWUgYXMgYSBwcmV2aW91c2x5IGRlY29yYXRlZCBwdWJsaWMgbWV0aG9kL2FjY2Vzc29yLiBUaGlzIGlzIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkIGJ5IHRoZSBkZWNvcmF0b3JzIHBsdWdpbi4gUHJvcGVydHkgbmFtZSB3YXM6IFwiICsgcCk7XG4gICAgICAgICAgIWcgJiYgZiA+IDIgPyB2LnNldChwLCBmKSA6IHYuc2V0KHAsICEwKTtcbiAgICAgICAgfVxuICAgICAgICBhcHBseU1lbWJlckRlYyhhLCBsLCBjLCBwLCBmLCBoLCBkLCB1KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHB1c2hJbml0aWFsaXplcnMoYSwgciksIHB1c2hJbml0aWFsaXplcnMoYSwgbiksIGE7XG4gIH1cbiAgZnVuY3Rpb24gcHVzaEluaXRpYWxpemVycyhlLCB0KSB7XG4gICAgdCAmJiBlLnB1c2goZnVuY3Rpb24gKGUpIHtcbiAgICAgIGZvciAodmFyIHIgPSAwOyByIDwgdC5sZW5ndGg7IHIrKykgdFtyXS5jYWxsKGUpO1xuICAgICAgcmV0dXJuIGU7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uIChlLCB0LCByKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGU6IGFwcGx5TWVtYmVyRGVjcyhlLCB0KSxcbiAgICAgIGdldCBjKCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICBpZiAodC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBmb3IgKHZhciByID0gW10sIG4gPSBlLCBhID0gZS5uYW1lLCBpID0gdC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICB2YXIgcyA9IHtcbiAgICAgICAgICAgICAgICB2OiAhMVxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciBvID0gdFtpXShuLCB7XG4gICAgICAgICAgICAgICAgICBraW5kOiBcImNsYXNzXCIsXG4gICAgICAgICAgICAgICAgICBuYW1lOiBhLFxuICAgICAgICAgICAgICAgICAgYWRkSW5pdGlhbGl6ZXI6IGNyZWF0ZUFkZEluaXRpYWxpemVyTWV0aG9kKHIsIHMpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgcy52ID0gITA7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdm9pZCAwICE9PSBvICYmIChhc3NlcnRWYWxpZFJldHVyblZhbHVlKDEwLCBvKSwgbiA9IG8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFtuLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGZvciAodmFyIGUgPSAwOyBlIDwgci5sZW5ndGg7IGUrKykgcltlXS5jYWxsKG4pO1xuICAgICAgICAgICAgfV07XG4gICAgICAgICAgfVxuICAgICAgICB9KGUsIHIpO1xuICAgICAgfVxuICAgIH07XG4gIH07XG59XG5mdW5jdGlvbiBfYXBwbHlEZWNzMjIwM1IoZSwgdCwgcikge1xuICByZXR1cm4gKF9hcHBseURlY3MyMjAzUiA9IGFwcGx5RGVjczIyMDNSRmFjdG9yeSgpKShlLCB0LCByKTtcbn1cbmZ1bmN0aW9uIGFwcGx5RGVjczIzMDFGYWN0b3J5KCkge1xuICBmdW5jdGlvbiBjcmVhdGVBZGRJbml0aWFsaXplck1ldGhvZChlLCB0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAhZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgaWYgKGUudikgdGhyb3cgbmV3IEVycm9yKFwiYXR0ZW1wdGVkIHRvIGNhbGwgXCIgKyB0ICsgXCIgYWZ0ZXIgZGVjb3JhdGlvbiB3YXMgZmluaXNoZWRcIik7XG4gICAgICB9KHQsIFwiYWRkSW5pdGlhbGl6ZXJcIiksIGFzc2VydENhbGxhYmxlKHIsIFwiQW4gaW5pdGlhbGl6ZXJcIiksIGUucHVzaChyKTtcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIGFzc2VydEluc3RhbmNlSWZQcml2YXRlKGUsIHQpIHtcbiAgICBpZiAoIWUodCkpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJBdHRlbXB0ZWQgdG8gYWNjZXNzIHByaXZhdGUgZWxlbWVudCBvbiBub24taW5zdGFuY2VcIik7XG4gIH1cbiAgZnVuY3Rpb24gbWVtYmVyRGVjKGUsIHQsIHIsIG4sIGEsIGksIHMsIG8sIGMpIHtcbiAgICB2YXIgdTtcbiAgICBzd2l0Y2ggKGEpIHtcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgdSA9IFwiYWNjZXNzb3JcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIHUgPSBcIm1ldGhvZFwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMzpcbiAgICAgICAgdSA9IFwiZ2V0dGVyXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSA0OlxuICAgICAgICB1ID0gXCJzZXR0ZXJcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB1ID0gXCJmaWVsZFwiO1xuICAgIH1cbiAgICB2YXIgbCxcbiAgICAgIGYsXG4gICAgICBwID0ge1xuICAgICAgICBraW5kOiB1LFxuICAgICAgICBuYW1lOiBzID8gXCIjXCIgKyB0IDogdCxcbiAgICAgICAgc3RhdGljOiBpLFxuICAgICAgICBwcml2YXRlOiBzXG4gICAgICB9LFxuICAgICAgZCA9IHtcbiAgICAgICAgdjogITFcbiAgICAgIH07XG4gICAgaWYgKDAgIT09IGEgJiYgKHAuYWRkSW5pdGlhbGl6ZXIgPSBjcmVhdGVBZGRJbml0aWFsaXplck1ldGhvZChuLCBkKSksIHMgfHwgMCAhPT0gYSAmJiAyICE9PSBhKSB7XG4gICAgICBpZiAoMiA9PT0gYSkgbCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiBhc3NlcnRJbnN0YW5jZUlmUHJpdmF0ZShjLCBlKSwgci52YWx1ZTtcbiAgICAgIH07ZWxzZSB7XG4gICAgICAgIHZhciBoID0gMCA9PT0gYSB8fCAxID09PSBhO1xuICAgICAgICAoaCB8fCAzID09PSBhKSAmJiAobCA9IHMgPyBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHJldHVybiBhc3NlcnRJbnN0YW5jZUlmUHJpdmF0ZShjLCBlKSwgci5nZXQuY2FsbChlKTtcbiAgICAgICAgfSA6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgcmV0dXJuIHIuZ2V0LmNhbGwoZSk7XG4gICAgICAgIH0pLCAoaCB8fCA0ID09PSBhKSAmJiAoZiA9IHMgPyBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgIGFzc2VydEluc3RhbmNlSWZQcml2YXRlKGMsIGUpLCByLnNldC5jYWxsKGUsIHQpO1xuICAgICAgICB9IDogZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICByLnNldC5jYWxsKGUsIHQpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2UgbCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICByZXR1cm4gZVt0XTtcbiAgICB9LCAwID09PSBhICYmIChmID0gZnVuY3Rpb24gKGUsIHIpIHtcbiAgICAgIGVbdF0gPSByO1xuICAgIH0pO1xuICAgIHZhciB2ID0gcyA/IGMuYmluZCgpIDogZnVuY3Rpb24gKGUpIHtcbiAgICAgIHJldHVybiB0IGluIGU7XG4gICAgfTtcbiAgICBwLmFjY2VzcyA9IGwgJiYgZiA/IHtcbiAgICAgIGdldDogbCxcbiAgICAgIHNldDogZixcbiAgICAgIGhhczogdlxuICAgIH0gOiBsID8ge1xuICAgICAgZ2V0OiBsLFxuICAgICAgaGFzOiB2XG4gICAgfSA6IHtcbiAgICAgIHNldDogZixcbiAgICAgIGhhczogdlxuICAgIH07XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBlKG8sIHApO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBkLnYgPSAhMDtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gYXNzZXJ0Q2FsbGFibGUoZSwgdCkge1xuICAgIGlmIChcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIGUpIHRocm93IG5ldyBUeXBlRXJyb3IodCArIFwiIG11c3QgYmUgYSBmdW5jdGlvblwiKTtcbiAgfVxuICBmdW5jdGlvbiBhc3NlcnRWYWxpZFJldHVyblZhbHVlKGUsIHQpIHtcbiAgICB2YXIgciA9IHR5cGVvZiB0O1xuICAgIGlmICgxID09PSBlKSB7XG4gICAgICBpZiAoXCJvYmplY3RcIiAhPT0gciB8fCBudWxsID09PSB0KSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYWNjZXNzb3IgZGVjb3JhdG9ycyBtdXN0IHJldHVybiBhbiBvYmplY3Qgd2l0aCBnZXQsIHNldCwgb3IgaW5pdCBwcm9wZXJ0aWVzIG9yIHZvaWQgMFwiKTtcbiAgICAgIHZvaWQgMCAhPT0gdC5nZXQgJiYgYXNzZXJ0Q2FsbGFibGUodC5nZXQsIFwiYWNjZXNzb3IuZ2V0XCIpLCB2b2lkIDAgIT09IHQuc2V0ICYmIGFzc2VydENhbGxhYmxlKHQuc2V0LCBcImFjY2Vzc29yLnNldFwiKSwgdm9pZCAwICE9PSB0LmluaXQgJiYgYXNzZXJ0Q2FsbGFibGUodC5pbml0LCBcImFjY2Vzc29yLmluaXRcIik7XG4gICAgfSBlbHNlIGlmIChcImZ1bmN0aW9uXCIgIT09IHIpIHtcbiAgICAgIHZhciBuO1xuICAgICAgdGhyb3cgbiA9IDAgPT09IGUgPyBcImZpZWxkXCIgOiAxMCA9PT0gZSA/IFwiY2xhc3NcIiA6IFwibWV0aG9kXCIsIG5ldyBUeXBlRXJyb3IobiArIFwiIGRlY29yYXRvcnMgbXVzdCByZXR1cm4gYSBmdW5jdGlvbiBvciB2b2lkIDBcIik7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGN1cnJ5VGhpczIoZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAodCkge1xuICAgICAgZSh0aGlzLCB0KTtcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIGFwcGx5TWVtYmVyRGVjKGUsIHQsIHIsIG4sIGEsIGksIHMsIG8sIGMpIHtcbiAgICB2YXIgdSxcbiAgICAgIGwsXG4gICAgICBmLFxuICAgICAgcCxcbiAgICAgIGQsXG4gICAgICBoLFxuICAgICAgdixcbiAgICAgIGcgPSByWzBdO1xuICAgIGlmIChzID8gdSA9IDAgPT09IGEgfHwgMSA9PT0gYSA/IHtcbiAgICAgIGdldDogKHAgPSByWzNdLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBwKHRoaXMpO1xuICAgICAgfSksXG4gICAgICBzZXQ6IGN1cnJ5VGhpczIocls0XSlcbiAgICB9IDogMyA9PT0gYSA/IHtcbiAgICAgIGdldDogclszXVxuICAgIH0gOiA0ID09PSBhID8ge1xuICAgICAgc2V0OiByWzNdXG4gICAgfSA6IHtcbiAgICAgIHZhbHVlOiByWzNdXG4gICAgfSA6IDAgIT09IGEgJiYgKHUgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIG4pKSwgMSA9PT0gYSA/IGYgPSB7XG4gICAgICBnZXQ6IHUuZ2V0LFxuICAgICAgc2V0OiB1LnNldFxuICAgIH0gOiAyID09PSBhID8gZiA9IHUudmFsdWUgOiAzID09PSBhID8gZiA9IHUuZ2V0IDogNCA9PT0gYSAmJiAoZiA9IHUuc2V0KSwgXCJmdW5jdGlvblwiID09IHR5cGVvZiBnKSB2b2lkIDAgIT09IChkID0gbWVtYmVyRGVjKGcsIG4sIHUsIG8sIGEsIGksIHMsIGYsIGMpKSAmJiAoYXNzZXJ0VmFsaWRSZXR1cm5WYWx1ZShhLCBkKSwgMCA9PT0gYSA/IGwgPSBkIDogMSA9PT0gYSA/IChsID0gZC5pbml0LCBoID0gZC5nZXQgfHwgZi5nZXQsIHYgPSBkLnNldCB8fCBmLnNldCwgZiA9IHtcbiAgICAgIGdldDogaCxcbiAgICAgIHNldDogdlxuICAgIH0pIDogZiA9IGQpO2Vsc2UgZm9yICh2YXIgeSA9IGcubGVuZ3RoIC0gMTsgeSA+PSAwOyB5LS0pIHtcbiAgICAgIHZhciBtO1xuICAgICAgaWYgKHZvaWQgMCAhPT0gKGQgPSBtZW1iZXJEZWMoZ1t5XSwgbiwgdSwgbywgYSwgaSwgcywgZiwgYykpKSBhc3NlcnRWYWxpZFJldHVyblZhbHVlKGEsIGQpLCAwID09PSBhID8gbSA9IGQgOiAxID09PSBhID8gKG0gPSBkLmluaXQsIGggPSBkLmdldCB8fCBmLmdldCwgdiA9IGQuc2V0IHx8IGYuc2V0LCBmID0ge1xuICAgICAgICBnZXQ6IGgsXG4gICAgICAgIHNldDogdlxuICAgICAgfSkgOiBmID0gZCwgdm9pZCAwICE9PSBtICYmICh2b2lkIDAgPT09IGwgPyBsID0gbSA6IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgbCA/IGwgPSBbbCwgbV0gOiBsLnB1c2gobSkpO1xuICAgIH1cbiAgICBpZiAoMCA9PT0gYSB8fCAxID09PSBhKSB7XG4gICAgICBpZiAodm9pZCAwID09PSBsKSBsID0gZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgICB9O2Vsc2UgaWYgKFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgbCkge1xuICAgICAgICB2YXIgYiA9IGw7XG4gICAgICAgIGwgPSBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgIGZvciAodmFyIHIgPSB0LCBuID0gMDsgbiA8IGIubGVuZ3RoOyBuKyspIHIgPSBiW25dLmNhbGwoZSwgcik7XG4gICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgSSA9IGw7XG4gICAgICAgIGwgPSBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgIHJldHVybiBJLmNhbGwoZSwgdCk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBlLnB1c2gobCk7XG4gICAgfVxuICAgIDAgIT09IGEgJiYgKDEgPT09IGEgPyAodS5nZXQgPSBmLmdldCwgdS5zZXQgPSBmLnNldCkgOiAyID09PSBhID8gdS52YWx1ZSA9IGYgOiAzID09PSBhID8gdS5nZXQgPSBmIDogNCA9PT0gYSAmJiAodS5zZXQgPSBmKSwgcyA/IDEgPT09IGEgPyAoZS5wdXNoKGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICByZXR1cm4gZi5nZXQuY2FsbChlLCB0KTtcbiAgICB9KSwgZS5wdXNoKGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICByZXR1cm4gZi5zZXQuY2FsbChlLCB0KTtcbiAgICB9KSkgOiAyID09PSBhID8gZS5wdXNoKGYpIDogZS5wdXNoKGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICByZXR1cm4gZi5jYWxsKGUsIHQpO1xuICAgIH0pIDogT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIG4sIHUpKTtcbiAgfVxuICBmdW5jdGlvbiBhcHBseU1lbWJlckRlY3MoZSwgdCwgcikge1xuICAgIGZvciAodmFyIG4sIGEsIGksIHMgPSBbXSwgbyA9IG5ldyBNYXAoKSwgYyA9IG5ldyBNYXAoKSwgdSA9IDA7IHUgPCB0Lmxlbmd0aDsgdSsrKSB7XG4gICAgICB2YXIgbCA9IHRbdV07XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShsKSkge1xuICAgICAgICB2YXIgZixcbiAgICAgICAgICBwLFxuICAgICAgICAgIGQgPSBsWzFdLFxuICAgICAgICAgIGggPSBsWzJdLFxuICAgICAgICAgIHYgPSBsLmxlbmd0aCA+IDMsXG4gICAgICAgICAgZyA9IGQgPj0gNSxcbiAgICAgICAgICB5ID0gcjtcbiAgICAgICAgaWYgKGcgPyAoZiA9IGUsIDAgIT09IChkIC09IDUpICYmIChwID0gYSA9IGEgfHwgW10pLCB2ICYmICFpICYmIChpID0gZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICByZXR1cm4gX2NoZWNrSW5SSFModCkgPT09IGU7XG4gICAgICAgIH0pLCB5ID0gaSkgOiAoZiA9IGUucHJvdG90eXBlLCAwICE9PSBkICYmIChwID0gbiA9IG4gfHwgW10pKSwgMCAhPT0gZCAmJiAhdikge1xuICAgICAgICAgIHZhciBtID0gZyA/IGMgOiBvLFxuICAgICAgICAgICAgYiA9IG0uZ2V0KGgpIHx8IDA7XG4gICAgICAgICAgaWYgKCEwID09PSBiIHx8IDMgPT09IGIgJiYgNCAhPT0gZCB8fCA0ID09PSBiICYmIDMgIT09IGQpIHRocm93IG5ldyBFcnJvcihcIkF0dGVtcHRlZCB0byBkZWNvcmF0ZSBhIHB1YmxpYyBtZXRob2QvYWNjZXNzb3IgdGhhdCBoYXMgdGhlIHNhbWUgbmFtZSBhcyBhIHByZXZpb3VzbHkgZGVjb3JhdGVkIHB1YmxpYyBtZXRob2QvYWNjZXNzb3IuIFRoaXMgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgYnkgdGhlIGRlY29yYXRvcnMgcGx1Z2luLiBQcm9wZXJ0eSBuYW1lIHdhczogXCIgKyBoKTtcbiAgICAgICAgICAhYiAmJiBkID4gMiA/IG0uc2V0KGgsIGQpIDogbS5zZXQoaCwgITApO1xuICAgICAgICB9XG4gICAgICAgIGFwcGx5TWVtYmVyRGVjKHMsIGYsIGwsIGgsIGQsIGcsIHYsIHAsIHkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcHVzaEluaXRpYWxpemVycyhzLCBuKSwgcHVzaEluaXRpYWxpemVycyhzLCBhKSwgcztcbiAgfVxuICBmdW5jdGlvbiBwdXNoSW5pdGlhbGl6ZXJzKGUsIHQpIHtcbiAgICB0ICYmIGUucHVzaChmdW5jdGlvbiAoZSkge1xuICAgICAgZm9yICh2YXIgciA9IDA7IHIgPCB0Lmxlbmd0aDsgcisrKSB0W3JdLmNhbGwoZSk7XG4gICAgICByZXR1cm4gZTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24gKGUsIHQsIHIsIG4pIHtcbiAgICByZXR1cm4ge1xuICAgICAgZTogYXBwbHlNZW1iZXJEZWNzKGUsIHQsIG4pLFxuICAgICAgZ2V0IGMoKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgIGlmICh0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGZvciAodmFyIHIgPSBbXSwgbiA9IGUsIGEgPSBlLm5hbWUsIGkgPSB0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgIHZhciBzID0ge1xuICAgICAgICAgICAgICAgIHY6ICExXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIG8gPSB0W2ldKG4sIHtcbiAgICAgICAgICAgICAgICAgIGtpbmQ6IFwiY2xhc3NcIixcbiAgICAgICAgICAgICAgICAgIG5hbWU6IGEsXG4gICAgICAgICAgICAgICAgICBhZGRJbml0aWFsaXplcjogY3JlYXRlQWRkSW5pdGlhbGl6ZXJNZXRob2QociwgcylcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBzLnYgPSAhMDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB2b2lkIDAgIT09IG8gJiYgKGFzc2VydFZhbGlkUmV0dXJuVmFsdWUoMTAsIG8pLCBuID0gbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gW24sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgZSA9IDA7IGUgPCByLmxlbmd0aDsgZSsrKSByW2VdLmNhbGwobik7XG4gICAgICAgICAgICB9XTtcbiAgICAgICAgICB9XG4gICAgICAgIH0oZSwgcik7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcbn1cbmZ1bmN0aW9uIF9hcHBseURlY3MyMzAxKGUsIHQsIHIsIG4pIHtcbiAgcmV0dXJuIChfYXBwbHlEZWNzMjMwMSA9IGFwcGx5RGVjczIzMDFGYWN0b3J5KCkpKGUsIHQsIHIsIG4pO1xufVxuZnVuY3Rpb24gY3JlYXRlQWRkSW5pdGlhbGl6ZXJNZXRob2QoZSwgdCkge1xuICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICBhc3NlcnROb3RGaW5pc2hlZCh0LCBcImFkZEluaXRpYWxpemVyXCIpLCBhc3NlcnRDYWxsYWJsZShyLCBcIkFuIGluaXRpYWxpemVyXCIpLCBlLnB1c2gocik7XG4gIH07XG59XG5mdW5jdGlvbiBhc3NlcnRJbnN0YW5jZUlmUHJpdmF0ZShlLCB0KSB7XG4gIGlmICghZSh0KSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkF0dGVtcHRlZCB0byBhY2Nlc3MgcHJpdmF0ZSBlbGVtZW50IG9uIG5vbi1pbnN0YW5jZVwiKTtcbn1cbmZ1bmN0aW9uIG1lbWJlckRlYyhlLCB0LCByLCBuLCBhLCBpLCBzLCBvLCBjLCBsKSB7XG4gIHZhciB1O1xuICBzd2l0Y2ggKGkpIHtcbiAgICBjYXNlIDE6XG4gICAgICB1ID0gXCJhY2Nlc3NvclwiO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAyOlxuICAgICAgdSA9IFwibWV0aG9kXCI7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDM6XG4gICAgICB1ID0gXCJnZXR0ZXJcIjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgNDpcbiAgICAgIHUgPSBcInNldHRlclwiO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHUgPSBcImZpZWxkXCI7XG4gIH1cbiAgdmFyIGYsXG4gICAgZCxcbiAgICBwID0ge1xuICAgICAga2luZDogdSxcbiAgICAgIG5hbWU6IG8gPyBcIiNcIiArIHIgOiByLFxuICAgICAgc3RhdGljOiBzLFxuICAgICAgcHJpdmF0ZTogb1xuICAgIH0sXG4gICAgaCA9IHtcbiAgICAgIHY6ICExXG4gICAgfTtcbiAgaWYgKDAgIT09IGkgJiYgKHAuYWRkSW5pdGlhbGl6ZXIgPSBjcmVhdGVBZGRJbml0aWFsaXplck1ldGhvZChhLCBoKSksIG8gfHwgMCAhPT0gaSAmJiAyICE9PSBpKSB7XG4gICAgaWYgKDIgPT09IGkpIGYgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgcmV0dXJuIGFzc2VydEluc3RhbmNlSWZQcml2YXRlKGwsIGUpLCBuLnZhbHVlO1xuICAgIH07ZWxzZSB7XG4gICAgICB2YXIgdiA9IDAgPT09IGkgfHwgMSA9PT0gaTtcbiAgICAgICh2IHx8IDMgPT09IGkpICYmIChmID0gbyA/IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiBhc3NlcnRJbnN0YW5jZUlmUHJpdmF0ZShsLCBlKSwgbi5nZXQuY2FsbChlKTtcbiAgICAgIH0gOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4gbi5nZXQuY2FsbChlKTtcbiAgICAgIH0pLCAodiB8fCA0ID09PSBpKSAmJiAoZCA9IG8gPyBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICBhc3NlcnRJbnN0YW5jZUlmUHJpdmF0ZShsLCBlKSwgbi5zZXQuY2FsbChlLCB0KTtcbiAgICAgIH0gOiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICBuLnNldC5jYWxsKGUsIHQpO1xuICAgICAgfSk7XG4gICAgfVxuICB9IGVsc2UgZiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgcmV0dXJuIGVbcl07XG4gIH0sIDAgPT09IGkgJiYgKGQgPSBmdW5jdGlvbiAoZSwgdCkge1xuICAgIGVbcl0gPSB0O1xuICB9KTtcbiAgdmFyIHkgPSBvID8gbC5iaW5kKCkgOiBmdW5jdGlvbiAoZSkge1xuICAgIHJldHVybiByIGluIGU7XG4gIH07XG4gIHAuYWNjZXNzID0gZiAmJiBkID8ge1xuICAgIGdldDogZixcbiAgICBzZXQ6IGQsXG4gICAgaGFzOiB5XG4gIH0gOiBmID8ge1xuICAgIGdldDogZixcbiAgICBoYXM6IHlcbiAgfSA6IHtcbiAgICBzZXQ6IGQsXG4gICAgaGFzOiB5XG4gIH07XG4gIHRyeSB7XG4gICAgcmV0dXJuIGUuY2FsbCh0LCBjLCBwKTtcbiAgfSBmaW5hbGx5IHtcbiAgICBoLnYgPSAhMDtcbiAgfVxufVxuZnVuY3Rpb24gYXNzZXJ0Tm90RmluaXNoZWQoZSwgdCkge1xuICBpZiAoZS52KSB0aHJvdyBuZXcgRXJyb3IoXCJhdHRlbXB0ZWQgdG8gY2FsbCBcIiArIHQgKyBcIiBhZnRlciBkZWNvcmF0aW9uIHdhcyBmaW5pc2hlZFwiKTtcbn1cbmZ1bmN0aW9uIGFzc2VydENhbGxhYmxlKGUsIHQpIHtcbiAgaWYgKFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgZSkgdGhyb3cgbmV3IFR5cGVFcnJvcih0ICsgXCIgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO1xufVxuZnVuY3Rpb24gYXNzZXJ0VmFsaWRSZXR1cm5WYWx1ZShlLCB0KSB7XG4gIHZhciByID0gdHlwZW9mIHQ7XG4gIGlmICgxID09PSBlKSB7XG4gICAgaWYgKFwib2JqZWN0XCIgIT09IHIgfHwgbnVsbCA9PT0gdCkgdGhyb3cgbmV3IFR5cGVFcnJvcihcImFjY2Vzc29yIGRlY29yYXRvcnMgbXVzdCByZXR1cm4gYW4gb2JqZWN0IHdpdGggZ2V0LCBzZXQsIG9yIGluaXQgcHJvcGVydGllcyBvciB2b2lkIDBcIik7XG4gICAgdm9pZCAwICE9PSB0LmdldCAmJiBhc3NlcnRDYWxsYWJsZSh0LmdldCwgXCJhY2Nlc3Nvci5nZXRcIiksIHZvaWQgMCAhPT0gdC5zZXQgJiYgYXNzZXJ0Q2FsbGFibGUodC5zZXQsIFwiYWNjZXNzb3Iuc2V0XCIpLCB2b2lkIDAgIT09IHQuaW5pdCAmJiBhc3NlcnRDYWxsYWJsZSh0LmluaXQsIFwiYWNjZXNzb3IuaW5pdFwiKTtcbiAgfSBlbHNlIGlmIChcImZ1bmN0aW9uXCIgIT09IHIpIHtcbiAgICB2YXIgbjtcbiAgICB0aHJvdyBuID0gMCA9PT0gZSA/IFwiZmllbGRcIiA6IDUgPT09IGUgPyBcImNsYXNzXCIgOiBcIm1ldGhvZFwiLCBuZXcgVHlwZUVycm9yKG4gKyBcIiBkZWNvcmF0b3JzIG11c3QgcmV0dXJuIGEgZnVuY3Rpb24gb3Igdm9pZCAwXCIpO1xuICB9XG59XG5mdW5jdGlvbiBjdXJyeVRoaXMxKGUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZSh0aGlzKTtcbiAgfTtcbn1cbmZ1bmN0aW9uIGN1cnJ5VGhpczIoZSkge1xuICByZXR1cm4gZnVuY3Rpb24gKHQpIHtcbiAgICBlKHRoaXMsIHQpO1xuICB9O1xufVxuZnVuY3Rpb24gYXBwbHlNZW1iZXJEZWMoZSwgdCwgciwgbiwgYSwgaSwgcywgbywgYywgbCkge1xuICB2YXIgdSxcbiAgICBmLFxuICAgIGQsXG4gICAgcCxcbiAgICBoLFxuICAgIHYsXG4gICAgeSA9IHJbMF07XG4gIG4gfHwgQXJyYXkuaXNBcnJheSh5KSB8fCAoeSA9IFt5XSksIG8gPyB1ID0gMCA9PT0gaSB8fCAxID09PSBpID8ge1xuICAgIGdldDogY3VycnlUaGlzMShyWzNdKSxcbiAgICBzZXQ6IGN1cnJ5VGhpczIocls0XSlcbiAgfSA6IDMgPT09IGkgPyB7XG4gICAgZ2V0OiByWzNdXG4gIH0gOiA0ID09PSBpID8ge1xuICAgIHNldDogclszXVxuICB9IDoge1xuICAgIHZhbHVlOiByWzNdXG4gIH0gOiAwICE9PSBpICYmICh1ID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LCBhKSksIDEgPT09IGkgPyBkID0ge1xuICAgIGdldDogdS5nZXQsXG4gICAgc2V0OiB1LnNldFxuICB9IDogMiA9PT0gaSA/IGQgPSB1LnZhbHVlIDogMyA9PT0gaSA/IGQgPSB1LmdldCA6IDQgPT09IGkgJiYgKGQgPSB1LnNldCk7XG4gIGZvciAodmFyIGcgPSBuID8gMiA6IDEsIG0gPSB5Lmxlbmd0aCAtIDE7IG0gPj0gMDsgbSAtPSBnKSB7XG4gICAgdmFyIGI7XG4gICAgaWYgKHZvaWQgMCAhPT0gKHAgPSBtZW1iZXJEZWMoeVttXSwgbiA/IHlbbSAtIDFdIDogdm9pZCAwLCBhLCB1LCBjLCBpLCBzLCBvLCBkLCBsKSkpIGFzc2VydFZhbGlkUmV0dXJuVmFsdWUoaSwgcCksIDAgPT09IGkgPyBiID0gcCA6IDEgPT09IGkgPyAoYiA9IHAuaW5pdCwgaCA9IHAuZ2V0IHx8IGQuZ2V0LCB2ID0gcC5zZXQgfHwgZC5zZXQsIGQgPSB7XG4gICAgICBnZXQ6IGgsXG4gICAgICBzZXQ6IHZcbiAgICB9KSA6IGQgPSBwLCB2b2lkIDAgIT09IGIgJiYgKHZvaWQgMCA9PT0gZiA/IGYgPSBiIDogXCJmdW5jdGlvblwiID09IHR5cGVvZiBmID8gZiA9IFtmLCBiXSA6IGYucHVzaChiKSk7XG4gIH1cbiAgaWYgKDAgPT09IGkgfHwgMSA9PT0gaSkge1xuICAgIGlmICh2b2lkIDAgPT09IGYpIGYgPSBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgcmV0dXJuIHQ7XG4gICAgfTtlbHNlIGlmIChcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIGYpIHtcbiAgICAgIHZhciBJID0gZjtcbiAgICAgIGYgPSBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICBmb3IgKHZhciByID0gdCwgbiA9IEkubGVuZ3RoIC0gMTsgbiA+PSAwOyBuLS0pIHIgPSBJW25dLmNhbGwoZSwgcik7XG4gICAgICAgIHJldHVybiByO1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHcgPSBmO1xuICAgICAgZiA9IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgIHJldHVybiB3LmNhbGwoZSwgdCk7XG4gICAgICB9O1xuICAgIH1cbiAgICBlLnB1c2goZik7XG4gIH1cbiAgMCAhPT0gaSAmJiAoMSA9PT0gaSA/ICh1LmdldCA9IGQuZ2V0LCB1LnNldCA9IGQuc2V0KSA6IDIgPT09IGkgPyB1LnZhbHVlID0gZCA6IDMgPT09IGkgPyB1LmdldCA9IGQgOiA0ID09PSBpICYmICh1LnNldCA9IGQpLCBvID8gMSA9PT0gaSA/IChlLnB1c2goZnVuY3Rpb24gKGUsIHQpIHtcbiAgICByZXR1cm4gZC5nZXQuY2FsbChlLCB0KTtcbiAgfSksIGUucHVzaChmdW5jdGlvbiAoZSwgdCkge1xuICAgIHJldHVybiBkLnNldC5jYWxsKGUsIHQpO1xuICB9KSkgOiAyID09PSBpID8gZS5wdXNoKGQpIDogZS5wdXNoKGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgcmV0dXJuIGQuY2FsbChlLCB0KTtcbiAgfSkgOiBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgYSwgdSkpO1xufVxuZnVuY3Rpb24gYXBwbHlNZW1iZXJEZWNzKGUsIHQsIHIpIHtcbiAgZm9yICh2YXIgbiwgYSwgaSwgcyA9IFtdLCBvID0gbmV3IE1hcCgpLCBjID0gbmV3IE1hcCgpLCBsID0gMDsgbCA8IHQubGVuZ3RoOyBsKyspIHtcbiAgICB2YXIgdSA9IHRbbF07XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodSkpIHtcbiAgICAgIHZhciBmLFxuICAgICAgICBkLFxuICAgICAgICBwID0gdVsxXSxcbiAgICAgICAgaCA9IHVbMl0sXG4gICAgICAgIHYgPSB1Lmxlbmd0aCA+IDMsXG4gICAgICAgIHkgPSAxNiAmIHAsXG4gICAgICAgIGcgPSAhISg4ICYgcCksXG4gICAgICAgIG0gPSByO1xuICAgICAgaWYgKHAgJj0gNywgZyA/IChmID0gZSwgMCAhPT0gcCAmJiAoZCA9IGEgPSBhIHx8IFtdKSwgdiAmJiAhaSAmJiAoaSA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHJldHVybiBfY2hlY2tJblJIUyh0KSA9PT0gZTtcbiAgICAgIH0pLCBtID0gaSkgOiAoZiA9IGUucHJvdG90eXBlLCAwICE9PSBwICYmIChkID0gbiA9IG4gfHwgW10pKSwgMCAhPT0gcCAmJiAhdikge1xuICAgICAgICB2YXIgYiA9IGcgPyBjIDogbyxcbiAgICAgICAgICBJID0gYi5nZXQoaCkgfHwgMDtcbiAgICAgICAgaWYgKCEwID09PSBJIHx8IDMgPT09IEkgJiYgNCAhPT0gcCB8fCA0ID09PSBJICYmIDMgIT09IHApIHRocm93IG5ldyBFcnJvcihcIkF0dGVtcHRlZCB0byBkZWNvcmF0ZSBhIHB1YmxpYyBtZXRob2QvYWNjZXNzb3IgdGhhdCBoYXMgdGhlIHNhbWUgbmFtZSBhcyBhIHByZXZpb3VzbHkgZGVjb3JhdGVkIHB1YmxpYyBtZXRob2QvYWNjZXNzb3IuIFRoaXMgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgYnkgdGhlIGRlY29yYXRvcnMgcGx1Z2luLiBQcm9wZXJ0eSBuYW1lIHdhczogXCIgKyBoKTtcbiAgICAgICAgYi5zZXQoaCwgISghSSAmJiBwID4gMikgfHwgcCk7XG4gICAgICB9XG4gICAgICBhcHBseU1lbWJlckRlYyhzLCBmLCB1LCB5LCBoLCBwLCBnLCB2LCBkLCBtKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHB1c2hJbml0aWFsaXplcnMocywgbiksIHB1c2hJbml0aWFsaXplcnMocywgYSksIHM7XG59XG5mdW5jdGlvbiBwdXNoSW5pdGlhbGl6ZXJzKGUsIHQpIHtcbiAgdCAmJiBlLnB1c2goZnVuY3Rpb24gKGUpIHtcbiAgICBmb3IgKHZhciByID0gMDsgciA8IHQubGVuZ3RoOyByKyspIHRbcl0uY2FsbChlKTtcbiAgICByZXR1cm4gZTtcbiAgfSk7XG59XG5mdW5jdGlvbiBhcHBseUNsYXNzRGVjcyhlLCB0LCByKSB7XG4gIGlmICh0Lmxlbmd0aCkge1xuICAgIGZvciAodmFyIG4gPSBbXSwgYSA9IGUsIGkgPSBlLm5hbWUsIHMgPSByID8gMiA6IDEsIG8gPSB0Lmxlbmd0aCAtIDE7IG8gPj0gMDsgbyAtPSBzKSB7XG4gICAgICB2YXIgYyA9IHtcbiAgICAgICAgdjogITFcbiAgICAgIH07XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgbCA9IHRbb10uY2FsbChyID8gdFtvIC0gMV0gOiB2b2lkIDAsIGEsIHtcbiAgICAgICAgICBraW5kOiBcImNsYXNzXCIsXG4gICAgICAgICAgbmFtZTogaSxcbiAgICAgICAgICBhZGRJbml0aWFsaXplcjogY3JlYXRlQWRkSW5pdGlhbGl6ZXJNZXRob2QobiwgYylcbiAgICAgICAgfSk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBjLnYgPSAhMDtcbiAgICAgIH1cbiAgICAgIHZvaWQgMCAhPT0gbCAmJiAoYXNzZXJ0VmFsaWRSZXR1cm5WYWx1ZSg1LCBsKSwgYSA9IGwpO1xuICAgIH1cbiAgICByZXR1cm4gW2EsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGZvciAodmFyIGUgPSAwOyBlIDwgbi5sZW5ndGg7IGUrKykgbltlXS5jYWxsKGEpO1xuICAgIH1dO1xuICB9XG59XG5mdW5jdGlvbiBfYXBwbHlEZWNzMjMwNShlLCB0LCByLCBuLCBhKSB7XG4gIHJldHVybiB7XG4gICAgZTogYXBwbHlNZW1iZXJEZWNzKGUsIHQsIGEpLFxuICAgIGdldCBjKCkge1xuICAgICAgcmV0dXJuIGFwcGx5Q2xhc3NEZWNzKGUsIHIsIG4pO1xuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIF9hc3luY0dlbmVyYXRvckRlbGVnYXRlKHQpIHtcbiAgdmFyIGUgPSB7fSxcbiAgICBuID0gITE7XG4gIGZ1bmN0aW9uIHB1bXAoZSwgcikge1xuICAgIHJldHVybiBuID0gITAsIHIgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAobikge1xuICAgICAgbih0W2VdKHIpKTtcbiAgICB9KSwge1xuICAgICAgZG9uZTogITEsXG4gICAgICB2YWx1ZTogbmV3IF9PdmVybG9hZFlpZWxkKHIsIDEpXG4gICAgfTtcbiAgfVxuICByZXR1cm4gZVtcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBTeW1ib2wgJiYgU3ltYm9sLml0ZXJhdG9yIHx8IFwiQEBpdGVyYXRvclwiXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSwgZS5uZXh0ID0gZnVuY3Rpb24gKHQpIHtcbiAgICByZXR1cm4gbiA/IChuID0gITEsIHQpIDogcHVtcChcIm5leHRcIiwgdCk7XG4gIH0sIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdC50aHJvdyAmJiAoZS50aHJvdyA9IGZ1bmN0aW9uICh0KSB7XG4gICAgaWYgKG4pIHRocm93IG4gPSAhMSwgdDtcbiAgICByZXR1cm4gcHVtcChcInRocm93XCIsIHQpO1xuICB9KSwgXCJmdW5jdGlvblwiID09IHR5cGVvZiB0LnJldHVybiAmJiAoZS5yZXR1cm4gPSBmdW5jdGlvbiAodCkge1xuICAgIHJldHVybiBuID8gKG4gPSAhMSwgdCkgOiBwdW1wKFwicmV0dXJuXCIsIHQpO1xuICB9KSwgZTtcbn1cbmZ1bmN0aW9uIF9hc3luY0l0ZXJhdG9yKHIpIHtcbiAgdmFyIG4sXG4gICAgdCxcbiAgICBvLFxuICAgIGUgPSAyO1xuICBmb3IgKFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIFN5bWJvbCAmJiAodCA9IFN5bWJvbC5hc3luY0l0ZXJhdG9yLCBvID0gU3ltYm9sLml0ZXJhdG9yKTsgZS0tOykge1xuICAgIGlmICh0ICYmIG51bGwgIT0gKG4gPSByW3RdKSkgcmV0dXJuIG4uY2FsbChyKTtcbiAgICBpZiAobyAmJiBudWxsICE9IChuID0gcltvXSkpIHJldHVybiBuZXcgQXN5bmNGcm9tU3luY0l0ZXJhdG9yKG4uY2FsbChyKSk7XG4gICAgdCA9IFwiQEBhc3luY0l0ZXJhdG9yXCIsIG8gPSBcIkBAaXRlcmF0b3JcIjtcbiAgfVxuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2JqZWN0IGlzIG5vdCBhc3luYyBpdGVyYWJsZVwiKTtcbn1cbmZ1bmN0aW9uIEFzeW5jRnJvbVN5bmNJdGVyYXRvcihyKSB7XG4gIGZ1bmN0aW9uIEFzeW5jRnJvbVN5bmNJdGVyYXRvckNvbnRpbnVhdGlvbihyKSB7XG4gICAgaWYgKE9iamVjdChyKSAhPT0gcikgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IociArIFwiIGlzIG5vdCBhbiBvYmplY3QuXCIpKTtcbiAgICB2YXIgbiA9IHIuZG9uZTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUpLnRoZW4oZnVuY3Rpb24gKHIpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiByLFxuICAgICAgICBkb25lOiBuXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBBc3luY0Zyb21TeW5jSXRlcmF0b3IgPSBmdW5jdGlvbiAocikge1xuICAgIHRoaXMucyA9IHIsIHRoaXMubiA9IHIubmV4dDtcbiAgfSwgQXN5bmNGcm9tU3luY0l0ZXJhdG9yLnByb3RvdHlwZSA9IHtcbiAgICBzOiBudWxsLFxuICAgIG46IG51bGwsXG4gICAgbmV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIEFzeW5jRnJvbVN5bmNJdGVyYXRvckNvbnRpbnVhdGlvbih0aGlzLm4uYXBwbHkodGhpcy5zLCBhcmd1bWVudHMpKTtcbiAgICB9LFxuICAgIHJldHVybjogZnVuY3Rpb24gKHIpIHtcbiAgICAgIHZhciBuID0gdGhpcy5zLnJldHVybjtcbiAgICAgIHJldHVybiB2b2lkIDAgPT09IG4gPyBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICB2YWx1ZTogcixcbiAgICAgICAgZG9uZTogITBcbiAgICAgIH0pIDogQXN5bmNGcm9tU3luY0l0ZXJhdG9yQ29udGludWF0aW9uKG4uYXBwbHkodGhpcy5zLCBhcmd1bWVudHMpKTtcbiAgICB9LFxuICAgIHRocm93OiBmdW5jdGlvbiAocikge1xuICAgICAgdmFyIG4gPSB0aGlzLnMucmV0dXJuO1xuICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gbiA/IFByb21pc2UucmVqZWN0KHIpIDogQXN5bmNGcm9tU3luY0l0ZXJhdG9yQ29udGludWF0aW9uKG4uYXBwbHkodGhpcy5zLCBhcmd1bWVudHMpKTtcbiAgICB9XG4gIH0sIG5ldyBBc3luY0Zyb21TeW5jSXRlcmF0b3Iocik7XG59XG5mdW5jdGlvbiBfYXdhaXRBc3luY0dlbmVyYXRvcihlKSB7XG4gIHJldHVybiBuZXcgX092ZXJsb2FkWWllbGQoZSwgMCk7XG59XG5mdW5jdGlvbiBfY2hlY2tJblJIUyhlKSB7XG4gIGlmIChPYmplY3QoZSkgIT09IGUpIHRocm93IFR5cGVFcnJvcihcInJpZ2h0LWhhbmQgc2lkZSBvZiAnaW4nIHNob3VsZCBiZSBhbiBvYmplY3QsIGdvdCBcIiArIChudWxsICE9PSBlID8gdHlwZW9mIGUgOiBcIm51bGxcIikpO1xuICByZXR1cm4gZTtcbn1cbmZ1bmN0aW9uIF9kZWZpbmVBY2Nlc3NvcihlLCByLCBuLCB0KSB7XG4gIHZhciBjID0ge1xuICAgIGNvbmZpZ3VyYWJsZTogITAsXG4gICAgZW51bWVyYWJsZTogITBcbiAgfTtcbiAgcmV0dXJuIGNbZV0gPSB0LCBPYmplY3QuZGVmaW5lUHJvcGVydHkociwgbiwgYyk7XG59XG5mdW5jdGlvbiBkaXNwb3NlX1N1cHByZXNzZWRFcnJvcihyLCBlKSB7XG4gIHJldHVybiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBTdXBwcmVzc2VkRXJyb3IgPyBkaXNwb3NlX1N1cHByZXNzZWRFcnJvciA9IFN1cHByZXNzZWRFcnJvciA6IChkaXNwb3NlX1N1cHByZXNzZWRFcnJvciA9IGZ1bmN0aW9uIChyLCBlKSB7XG4gICAgdGhpcy5zdXBwcmVzc2VkID0gciwgdGhpcy5lcnJvciA9IGUsIHRoaXMuc3RhY2sgPSBuZXcgRXJyb3IoKS5zdGFjaztcbiAgfSwgZGlzcG9zZV9TdXBwcmVzc2VkRXJyb3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUsIHtcbiAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgdmFsdWU6IGRpc3Bvc2VfU3VwcHJlc3NlZEVycm9yLFxuICAgICAgd3JpdGFibGU6ICEwLFxuICAgICAgY29uZmlndXJhYmxlOiAhMFxuICAgIH1cbiAgfSkpLCBuZXcgZGlzcG9zZV9TdXBwcmVzc2VkRXJyb3IociwgZSk7XG59XG5mdW5jdGlvbiBfZGlzcG9zZShyLCBlLCBzKSB7XG4gIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgZm9yICg7IHIubGVuZ3RoID4gMDspIHRyeSB7XG4gICAgICB2YXIgbyA9IHIucG9wKCksXG4gICAgICAgIHAgPSBvLmQuY2FsbChvLnYpO1xuICAgICAgaWYgKG8uYSkgcmV0dXJuIFByb21pc2UucmVzb2x2ZShwKS50aGVuKG5leHQsIGVycik7XG4gICAgfSBjYXRjaCAocikge1xuICAgICAgcmV0dXJuIGVycihyKTtcbiAgICB9XG4gICAgaWYgKHMpIHRocm93IGU7XG4gIH1cbiAgZnVuY3Rpb24gZXJyKHIpIHtcbiAgICByZXR1cm4gZSA9IHMgPyBuZXcgZGlzcG9zZV9TdXBwcmVzc2VkRXJyb3IociwgZSkgOiByLCBzID0gITAsIG5leHQoKTtcbiAgfVxuICByZXR1cm4gbmV4dCgpO1xufVxuZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KHIsIGwpIHtcbiAgdmFyIHQgPSBudWxsID09IHIgPyBudWxsIDogXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgU3ltYm9sICYmIHJbU3ltYm9sLml0ZXJhdG9yXSB8fCByW1wiQEBpdGVyYXRvclwiXTtcbiAgaWYgKG51bGwgIT0gdCkge1xuICAgIHZhciBlLFxuICAgICAgbixcbiAgICAgIGksXG4gICAgICB1LFxuICAgICAgYSA9IFtdLFxuICAgICAgZiA9ICEwLFxuICAgICAgbyA9ICExO1xuICAgIHRyeSB7XG4gICAgICBpZiAoaSA9ICh0ID0gdC5jYWxsKHIpKS5uZXh0LCAwID09PSBsKSB7XG4gICAgICAgIGlmIChPYmplY3QodCkgIT09IHQpIHJldHVybjtcbiAgICAgICAgZiA9ICExO1xuICAgICAgfSBlbHNlIGZvciAoOyAhKGYgPSAoZSA9IGkuY2FsbCh0KSkuZG9uZSkgJiYgKGEucHVzaChlLnZhbHVlKSwgYS5sZW5ndGggIT09IGwpOyBmID0gITApO1xuICAgIH0gY2F0Y2ggKHIpIHtcbiAgICAgIG8gPSAhMCwgbiA9IHI7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICghZiAmJiBudWxsICE9IHQucmV0dXJuICYmICh1ID0gdC5yZXR1cm4oKSwgT2JqZWN0KHUpICE9PSB1KSkgcmV0dXJuO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgaWYgKG8pIHRocm93IG47XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhO1xuICB9XG59XG5mdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXRMb29zZShlLCByKSB7XG4gIHZhciB0ID0gZSAmJiAoXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgU3ltYm9sICYmIGVbU3ltYm9sLml0ZXJhdG9yXSB8fCBlW1wiQEBpdGVyYXRvclwiXSk7XG4gIGlmIChudWxsICE9IHQpIHtcbiAgICB2YXIgbyxcbiAgICAgIGwgPSBbXTtcbiAgICBmb3IgKHQgPSB0LmNhbGwoZSk7IGUubGVuZ3RoIDwgciAmJiAhKG8gPSB0Lm5leHQoKSkuZG9uZTspIGwucHVzaChvLnZhbHVlKTtcbiAgICByZXR1cm4gbDtcbiAgfVxufVxudmFyIFJFQUNUX0VMRU1FTlRfVFlQRTtcbmZ1bmN0aW9uIF9qc3goZSwgciwgRSwgbCkge1xuICBSRUFDVF9FTEVNRU5UX1RZUEUgfHwgKFJFQUNUX0VMRU1FTlRfVFlQRSA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFN5bWJvbC5mb3IgJiYgU3ltYm9sLmZvcihcInJlYWN0LmVsZW1lbnRcIikgfHwgNjAxMDMpO1xuICB2YXIgbyA9IGUgJiYgZS5kZWZhdWx0UHJvcHMsXG4gICAgbiA9IGFyZ3VtZW50cy5sZW5ndGggLSAzO1xuICBpZiAociB8fCAwID09PSBuIHx8IChyID0ge1xuICAgIGNoaWxkcmVuOiB2b2lkIDBcbiAgfSksIDEgPT09IG4pIHIuY2hpbGRyZW4gPSBsO2Vsc2UgaWYgKG4gPiAxKSB7XG4gICAgZm9yICh2YXIgdCA9IG5ldyBBcnJheShuKSwgZiA9IDA7IGYgPCBuOyBmKyspIHRbZl0gPSBhcmd1bWVudHNbZiArIDNdO1xuICAgIHIuY2hpbGRyZW4gPSB0O1xuICB9XG4gIGlmIChyICYmIG8pIGZvciAodmFyIGkgaW4gbykgdm9pZCAwID09PSByW2ldICYmIChyW2ldID0gb1tpXSk7ZWxzZSByIHx8IChyID0gbyB8fCB7fSk7XG4gIHJldHVybiB7XG4gICAgJCR0eXBlb2Y6IFJFQUNUX0VMRU1FTlRfVFlQRSxcbiAgICB0eXBlOiBlLFxuICAgIGtleTogdm9pZCAwID09PSBFID8gbnVsbCA6IFwiXCIgKyBFLFxuICAgIHJlZjogbnVsbCxcbiAgICBwcm9wczogcixcbiAgICBfb3duZXI6IG51bGxcbiAgfTtcbn1cbmZ1bmN0aW9uIG93bktleXMoZSwgcikge1xuICB2YXIgdCA9IE9iamVjdC5rZXlzKGUpO1xuICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgIHZhciBvID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtcbiAgICByICYmIChvID0gby5maWx0ZXIoZnVuY3Rpb24gKHIpIHtcbiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHIpLmVudW1lcmFibGU7XG4gICAgfSkpLCB0LnB1c2guYXBwbHkodCwgbyk7XG4gIH1cbiAgcmV0dXJuIHQ7XG59XG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkMihlKSB7XG4gIGZvciAodmFyIHIgPSAxOyByIDwgYXJndW1lbnRzLmxlbmd0aDsgcisrKSB7XG4gICAgdmFyIHQgPSBudWxsICE9IGFyZ3VtZW50c1tyXSA/IGFyZ3VtZW50c1tyXSA6IHt9O1xuICAgIHIgJSAyID8gb3duS2V5cyhPYmplY3QodCksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7XG4gICAgICBfZGVmaW5lUHJvcGVydHkoZSwgciwgdFtyXSk7XG4gICAgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHQpKSA6IG93bktleXMoT2JqZWN0KHQpKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgciwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LCByKSk7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGU7XG59XG5mdW5jdGlvbiBfcmVnZW5lcmF0b3JSdW50aW1lKCkge1xuICBcInVzZSBzdHJpY3RcIjsgLyohIHJlZ2VuZXJhdG9yLXJ1bnRpbWUgLS0gQ29weXJpZ2h0IChjKSAyMDE0LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuIC0tIGxpY2Vuc2UgKE1JVCk6IGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWdlbmVyYXRvci9ibG9iL21haW4vTElDRU5TRSAqL1xuICBfcmVnZW5lcmF0b3JSdW50aW1lID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBlO1xuICB9O1xuICB2YXIgdCxcbiAgICBlID0ge30sXG4gICAgciA9IE9iamVjdC5wcm90b3R5cGUsXG4gICAgbiA9IHIuaGFzT3duUHJvcGVydHksXG4gICAgbyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSB8fCBmdW5jdGlvbiAodCwgZSwgcikge1xuICAgICAgdFtlXSA9IHIudmFsdWU7XG4gICAgfSxcbiAgICBpID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgPyBTeW1ib2wgOiB7fSxcbiAgICBhID0gaS5pdGVyYXRvciB8fCBcIkBAaXRlcmF0b3JcIixcbiAgICBjID0gaS5hc3luY0l0ZXJhdG9yIHx8IFwiQEBhc3luY0l0ZXJhdG9yXCIsXG4gICAgdSA9IGkudG9TdHJpbmdUYWcgfHwgXCJAQHRvU3RyaW5nVGFnXCI7XG4gIGZ1bmN0aW9uIGRlZmluZSh0LCBlLCByKSB7XG4gICAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBlLCB7XG4gICAgICB2YWx1ZTogcixcbiAgICAgIGVudW1lcmFibGU6ICEwLFxuICAgICAgY29uZmlndXJhYmxlOiAhMCxcbiAgICAgIHdyaXRhYmxlOiAhMFxuICAgIH0pLCB0W2VdO1xuICB9XG4gIHRyeSB7XG4gICAgZGVmaW5lKHt9LCBcIlwiKTtcbiAgfSBjYXRjaCAodCkge1xuICAgIGRlZmluZSA9IGZ1bmN0aW9uICh0LCBlLCByKSB7XG4gICAgICByZXR1cm4gdFtlXSA9IHI7XG4gICAgfTtcbiAgfVxuICBmdW5jdGlvbiB3cmFwKHQsIGUsIHIsIG4pIHtcbiAgICB2YXIgaSA9IGUgJiYgZS5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IgPyBlIDogR2VuZXJhdG9yLFxuICAgICAgYSA9IE9iamVjdC5jcmVhdGUoaS5wcm90b3R5cGUpLFxuICAgICAgYyA9IG5ldyBDb250ZXh0KG4gfHwgW10pO1xuICAgIHJldHVybiBvKGEsIFwiX2ludm9rZVwiLCB7XG4gICAgICB2YWx1ZTogbWFrZUludm9rZU1ldGhvZCh0LCByLCBjKVxuICAgIH0pLCBhO1xuICB9XG4gIGZ1bmN0aW9uIHRyeUNhdGNoKHQsIGUsIHIpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJub3JtYWxcIixcbiAgICAgICAgYXJnOiB0LmNhbGwoZSwgcilcbiAgICAgIH07XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJ0aHJvd1wiLFxuICAgICAgICBhcmc6IHRcbiAgICAgIH07XG4gICAgfVxuICB9XG4gIGUud3JhcCA9IHdyYXA7XG4gIHZhciBoID0gXCJzdXNwZW5kZWRTdGFydFwiLFxuICAgIGwgPSBcInN1c3BlbmRlZFlpZWxkXCIsXG4gICAgZiA9IFwiZXhlY3V0aW5nXCIsXG4gICAgcyA9IFwiY29tcGxldGVkXCIsXG4gICAgeSA9IHt9O1xuICBmdW5jdGlvbiBHZW5lcmF0b3IoKSB7fVxuICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvbigpIHt9XG4gIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKCkge31cbiAgdmFyIHAgPSB7fTtcbiAgZGVmaW5lKHAsIGEsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSk7XG4gIHZhciBkID0gT2JqZWN0LmdldFByb3RvdHlwZU9mLFxuICAgIHYgPSBkICYmIGQoZCh2YWx1ZXMoW10pKSk7XG4gIHYgJiYgdiAhPT0gciAmJiBuLmNhbGwodiwgYSkgJiYgKHAgPSB2KTtcbiAgdmFyIGcgPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5wcm90b3R5cGUgPSBHZW5lcmF0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShwKTtcbiAgZnVuY3Rpb24gZGVmaW5lSXRlcmF0b3JNZXRob2RzKHQpIHtcbiAgICBbXCJuZXh0XCIsIFwidGhyb3dcIiwgXCJyZXR1cm5cIl0uZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgZGVmaW5lKHQsIGUsIGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnZva2UoZSwgdCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuICBmdW5jdGlvbiBBc3luY0l0ZXJhdG9yKHQsIGUpIHtcbiAgICBmdW5jdGlvbiBpbnZva2UociwgbywgaSwgYSkge1xuICAgICAgdmFyIGMgPSB0cnlDYXRjaCh0W3JdLCB0LCBvKTtcbiAgICAgIGlmIChcInRocm93XCIgIT09IGMudHlwZSkge1xuICAgICAgICB2YXIgdSA9IGMuYXJnLFxuICAgICAgICAgIGggPSB1LnZhbHVlO1xuICAgICAgICByZXR1cm4gaCAmJiBcIm9iamVjdFwiID09IHR5cGVvZiBoICYmIG4uY2FsbChoLCBcIl9fYXdhaXRcIikgPyBlLnJlc29sdmUoaC5fX2F3YWl0KS50aGVuKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgaW52b2tlKFwibmV4dFwiLCB0LCBpLCBhKTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICBpbnZva2UoXCJ0aHJvd1wiLCB0LCBpLCBhKTtcbiAgICAgICAgfSkgOiBlLnJlc29sdmUoaCkudGhlbihmdW5jdGlvbiAodCkge1xuICAgICAgICAgIHUudmFsdWUgPSB0LCBpKHUpO1xuICAgICAgICB9LCBmdW5jdGlvbiAodCkge1xuICAgICAgICAgIHJldHVybiBpbnZva2UoXCJ0aHJvd1wiLCB0LCBpLCBhKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBhKGMuYXJnKTtcbiAgICB9XG4gICAgdmFyIHI7XG4gICAgbyh0aGlzLCBcIl9pbnZva2VcIiwge1xuICAgICAgdmFsdWU6IGZ1bmN0aW9uICh0LCBuKSB7XG4gICAgICAgIGZ1bmN0aW9uIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCkge1xuICAgICAgICAgIHJldHVybiBuZXcgZShmdW5jdGlvbiAoZSwgcikge1xuICAgICAgICAgICAgaW52b2tlKHQsIG4sIGUsIHIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByID0gciA/IHIudGhlbihjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZywgY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcpIDogY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBmdW5jdGlvbiBtYWtlSW52b2tlTWV0aG9kKGUsIHIsIG4pIHtcbiAgICB2YXIgbyA9IGg7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChpLCBhKSB7XG4gICAgICBpZiAobyA9PT0gZikgdGhyb3cgbmV3IEVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZ1wiKTtcbiAgICAgIGlmIChvID09PSBzKSB7XG4gICAgICAgIGlmIChcInRocm93XCIgPT09IGkpIHRocm93IGE7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdmFsdWU6IHQsXG4gICAgICAgICAgZG9uZTogITBcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGZvciAobi5tZXRob2QgPSBpLCBuLmFyZyA9IGE7Oykge1xuICAgICAgICB2YXIgYyA9IG4uZGVsZWdhdGU7XG4gICAgICAgIGlmIChjKSB7XG4gICAgICAgICAgdmFyIHUgPSBtYXliZUludm9rZURlbGVnYXRlKGMsIG4pO1xuICAgICAgICAgIGlmICh1KSB7XG4gICAgICAgICAgICBpZiAodSA9PT0geSkgY29udGludWU7XG4gICAgICAgICAgICByZXR1cm4gdTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFwibmV4dFwiID09PSBuLm1ldGhvZCkgbi5zZW50ID0gbi5fc2VudCA9IG4uYXJnO2Vsc2UgaWYgKFwidGhyb3dcIiA9PT0gbi5tZXRob2QpIHtcbiAgICAgICAgICBpZiAobyA9PT0gaCkgdGhyb3cgbyA9IHMsIG4uYXJnO1xuICAgICAgICAgIG4uZGlzcGF0Y2hFeGNlcHRpb24obi5hcmcpO1xuICAgICAgICB9IGVsc2UgXCJyZXR1cm5cIiA9PT0gbi5tZXRob2QgJiYgbi5hYnJ1cHQoXCJyZXR1cm5cIiwgbi5hcmcpO1xuICAgICAgICBvID0gZjtcbiAgICAgICAgdmFyIHAgPSB0cnlDYXRjaChlLCByLCBuKTtcbiAgICAgICAgaWYgKFwibm9ybWFsXCIgPT09IHAudHlwZSkge1xuICAgICAgICAgIGlmIChvID0gbi5kb25lID8gcyA6IGwsIHAuYXJnID09PSB5KSBjb250aW51ZTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmFsdWU6IHAuYXJnLFxuICAgICAgICAgICAgZG9uZTogbi5kb25lXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBcInRocm93XCIgPT09IHAudHlwZSAmJiAobyA9IHMsIG4ubWV0aG9kID0gXCJ0aHJvd1wiLCBuLmFyZyA9IHAuYXJnKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIG1heWJlSW52b2tlRGVsZWdhdGUoZSwgcikge1xuICAgIHZhciBuID0gci5tZXRob2QsXG4gICAgICBvID0gZS5pdGVyYXRvcltuXTtcbiAgICBpZiAobyA9PT0gdCkgcmV0dXJuIHIuZGVsZWdhdGUgPSBudWxsLCBcInRocm93XCIgPT09IG4gJiYgZS5pdGVyYXRvci5yZXR1cm4gJiYgKHIubWV0aG9kID0gXCJyZXR1cm5cIiwgci5hcmcgPSB0LCBtYXliZUludm9rZURlbGVnYXRlKGUsIHIpLCBcInRocm93XCIgPT09IHIubWV0aG9kKSB8fCBcInJldHVyblwiICE9PSBuICYmIChyLm1ldGhvZCA9IFwidGhyb3dcIiwgci5hcmcgPSBuZXcgVHlwZUVycm9yKFwiVGhlIGl0ZXJhdG9yIGRvZXMgbm90IHByb3ZpZGUgYSAnXCIgKyBuICsgXCInIG1ldGhvZFwiKSksIHk7XG4gICAgdmFyIGkgPSB0cnlDYXRjaChvLCBlLml0ZXJhdG9yLCByLmFyZyk7XG4gICAgaWYgKFwidGhyb3dcIiA9PT0gaS50eXBlKSByZXR1cm4gci5tZXRob2QgPSBcInRocm93XCIsIHIuYXJnID0gaS5hcmcsIHIuZGVsZWdhdGUgPSBudWxsLCB5O1xuICAgIHZhciBhID0gaS5hcmc7XG4gICAgcmV0dXJuIGEgPyBhLmRvbmUgPyAocltlLnJlc3VsdE5hbWVdID0gYS52YWx1ZSwgci5uZXh0ID0gZS5uZXh0TG9jLCBcInJldHVyblwiICE9PSByLm1ldGhvZCAmJiAoci5tZXRob2QgPSBcIm5leHRcIiwgci5hcmcgPSB0KSwgci5kZWxlZ2F0ZSA9IG51bGwsIHkpIDogYSA6IChyLm1ldGhvZCA9IFwidGhyb3dcIiwgci5hcmcgPSBuZXcgVHlwZUVycm9yKFwiaXRlcmF0b3IgcmVzdWx0IGlzIG5vdCBhbiBvYmplY3RcIiksIHIuZGVsZWdhdGUgPSBudWxsLCB5KTtcbiAgfVxuICBmdW5jdGlvbiBwdXNoVHJ5RW50cnkodCkge1xuICAgIHZhciBlID0ge1xuICAgICAgdHJ5TG9jOiB0WzBdXG4gICAgfTtcbiAgICAxIGluIHQgJiYgKGUuY2F0Y2hMb2MgPSB0WzFdKSwgMiBpbiB0ICYmIChlLmZpbmFsbHlMb2MgPSB0WzJdLCBlLmFmdGVyTG9jID0gdFszXSksIHRoaXMudHJ5RW50cmllcy5wdXNoKGUpO1xuICB9XG4gIGZ1bmN0aW9uIHJlc2V0VHJ5RW50cnkodCkge1xuICAgIHZhciBlID0gdC5jb21wbGV0aW9uIHx8IHt9O1xuICAgIGUudHlwZSA9IFwibm9ybWFsXCIsIGRlbGV0ZSBlLmFyZywgdC5jb21wbGV0aW9uID0gZTtcbiAgfVxuICBmdW5jdGlvbiBDb250ZXh0KHQpIHtcbiAgICB0aGlzLnRyeUVudHJpZXMgPSBbe1xuICAgICAgdHJ5TG9jOiBcInJvb3RcIlxuICAgIH1dLCB0LmZvckVhY2gocHVzaFRyeUVudHJ5LCB0aGlzKSwgdGhpcy5yZXNldCghMCk7XG4gIH1cbiAgZnVuY3Rpb24gdmFsdWVzKGUpIHtcbiAgICBpZiAoZSB8fCBcIlwiID09PSBlKSB7XG4gICAgICB2YXIgciA9IGVbYV07XG4gICAgICBpZiAocikgcmV0dXJuIHIuY2FsbChlKTtcbiAgICAgIGlmIChcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGUubmV4dCkgcmV0dXJuIGU7XG4gICAgICBpZiAoIWlzTmFOKGUubGVuZ3RoKSkge1xuICAgICAgICB2YXIgbyA9IC0xLFxuICAgICAgICAgIGkgPSBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgICAgICAgZm9yICg7ICsrbyA8IGUubGVuZ3RoOykgaWYgKG4uY2FsbChlLCBvKSkgcmV0dXJuIG5leHQudmFsdWUgPSBlW29dLCBuZXh0LmRvbmUgPSAhMSwgbmV4dDtcbiAgICAgICAgICAgIHJldHVybiBuZXh0LnZhbHVlID0gdCwgbmV4dC5kb25lID0gITAsIG5leHQ7XG4gICAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGkubmV4dCA9IGk7XG4gICAgICB9XG4gICAgfVxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IodHlwZW9mIGUgKyBcIiBpcyBub3QgaXRlcmFibGVcIik7XG4gIH1cbiAgcmV0dXJuIEdlbmVyYXRvckZ1bmN0aW9uLnByb3RvdHlwZSA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLCBvKGcsIFwiY29uc3RydWN0b3JcIiwge1xuICAgIHZhbHVlOiBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSxcbiAgICBjb25maWd1cmFibGU6ICEwXG4gIH0pLCBvKEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLCBcImNvbnN0cnVjdG9yXCIsIHtcbiAgICB2YWx1ZTogR2VuZXJhdG9yRnVuY3Rpb24sXG4gICAgY29uZmlndXJhYmxlOiAhMFxuICB9KSwgR2VuZXJhdG9yRnVuY3Rpb24uZGlzcGxheU5hbWUgPSBkZWZpbmUoR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsIHUsIFwiR2VuZXJhdG9yRnVuY3Rpb25cIiksIGUuaXNHZW5lcmF0b3JGdW5jdGlvbiA9IGZ1bmN0aW9uICh0KSB7XG4gICAgdmFyIGUgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHQgJiYgdC5jb25zdHJ1Y3RvcjtcbiAgICByZXR1cm4gISFlICYmIChlID09PSBHZW5lcmF0b3JGdW5jdGlvbiB8fCBcIkdlbmVyYXRvckZ1bmN0aW9uXCIgPT09IChlLmRpc3BsYXlOYW1lIHx8IGUubmFtZSkpO1xuICB9LCBlLm1hcmsgPSBmdW5jdGlvbiAodCkge1xuICAgIHJldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2YodCwgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUpIDogKHQuX19wcm90b19fID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsIGRlZmluZSh0LCB1LCBcIkdlbmVyYXRvckZ1bmN0aW9uXCIpKSwgdC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKGcpLCB0O1xuICB9LCBlLmF3cmFwID0gZnVuY3Rpb24gKHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgX19hd2FpdDogdFxuICAgIH07XG4gIH0sIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhBc3luY0l0ZXJhdG9yLnByb3RvdHlwZSksIGRlZmluZShBc3luY0l0ZXJhdG9yLnByb3RvdHlwZSwgYywgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9KSwgZS5Bc3luY0l0ZXJhdG9yID0gQXN5bmNJdGVyYXRvciwgZS5hc3luYyA9IGZ1bmN0aW9uICh0LCByLCBuLCBvLCBpKSB7XG4gICAgdm9pZCAwID09PSBpICYmIChpID0gUHJvbWlzZSk7XG4gICAgdmFyIGEgPSBuZXcgQXN5bmNJdGVyYXRvcih3cmFwKHQsIHIsIG4sIG8pLCBpKTtcbiAgICByZXR1cm4gZS5pc0dlbmVyYXRvckZ1bmN0aW9uKHIpID8gYSA6IGEubmV4dCgpLnRoZW4oZnVuY3Rpb24gKHQpIHtcbiAgICAgIHJldHVybiB0LmRvbmUgPyB0LnZhbHVlIDogYS5uZXh0KCk7XG4gICAgfSk7XG4gIH0sIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhnKSwgZGVmaW5lKGcsIHUsIFwiR2VuZXJhdG9yXCIpLCBkZWZpbmUoZywgYSwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9KSwgZGVmaW5lKGcsIFwidG9TdHJpbmdcIiwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBcIltvYmplY3QgR2VuZXJhdG9yXVwiO1xuICB9KSwgZS5rZXlzID0gZnVuY3Rpb24gKHQpIHtcbiAgICB2YXIgZSA9IE9iamVjdCh0KSxcbiAgICAgIHIgPSBbXTtcbiAgICBmb3IgKHZhciBuIGluIGUpIHIucHVzaChuKTtcbiAgICByZXR1cm4gci5yZXZlcnNlKCksIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICBmb3IgKDsgci5sZW5ndGg7KSB7XG4gICAgICAgIHZhciB0ID0gci5wb3AoKTtcbiAgICAgICAgaWYgKHQgaW4gZSkgcmV0dXJuIG5leHQudmFsdWUgPSB0LCBuZXh0LmRvbmUgPSAhMSwgbmV4dDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXh0LmRvbmUgPSAhMCwgbmV4dDtcbiAgICB9O1xuICB9LCBlLnZhbHVlcyA9IHZhbHVlcywgQ29udGV4dC5wcm90b3R5cGUgPSB7XG4gICAgY29uc3RydWN0b3I6IENvbnRleHQsXG4gICAgcmVzZXQ6IGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAodGhpcy5wcmV2ID0gMCwgdGhpcy5uZXh0ID0gMCwgdGhpcy5zZW50ID0gdGhpcy5fc2VudCA9IHQsIHRoaXMuZG9uZSA9ICExLCB0aGlzLmRlbGVnYXRlID0gbnVsbCwgdGhpcy5tZXRob2QgPSBcIm5leHRcIiwgdGhpcy5hcmcgPSB0LCB0aGlzLnRyeUVudHJpZXMuZm9yRWFjaChyZXNldFRyeUVudHJ5KSwgIWUpIGZvciAodmFyIHIgaW4gdGhpcykgXCJ0XCIgPT09IHIuY2hhckF0KDApICYmIG4uY2FsbCh0aGlzLCByKSAmJiAhaXNOYU4oK3Iuc2xpY2UoMSkpICYmICh0aGlzW3JdID0gdCk7XG4gICAgfSxcbiAgICBzdG9wOiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmRvbmUgPSAhMDtcbiAgICAgIHZhciB0ID0gdGhpcy50cnlFbnRyaWVzWzBdLmNvbXBsZXRpb247XG4gICAgICBpZiAoXCJ0aHJvd1wiID09PSB0LnR5cGUpIHRocm93IHQuYXJnO1xuICAgICAgcmV0dXJuIHRoaXMucnZhbDtcbiAgICB9LFxuICAgIGRpc3BhdGNoRXhjZXB0aW9uOiBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKHRoaXMuZG9uZSkgdGhyb3cgZTtcbiAgICAgIHZhciByID0gdGhpcztcbiAgICAgIGZ1bmN0aW9uIGhhbmRsZShuLCBvKSB7XG4gICAgICAgIHJldHVybiBhLnR5cGUgPSBcInRocm93XCIsIGEuYXJnID0gZSwgci5uZXh0ID0gbiwgbyAmJiAoci5tZXRob2QgPSBcIm5leHRcIiwgci5hcmcgPSB0KSwgISFvO1xuICAgICAgfVxuICAgICAgZm9yICh2YXIgbyA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBvID49IDA7IC0tbykge1xuICAgICAgICB2YXIgaSA9IHRoaXMudHJ5RW50cmllc1tvXSxcbiAgICAgICAgICBhID0gaS5jb21wbGV0aW9uO1xuICAgICAgICBpZiAoXCJyb290XCIgPT09IGkudHJ5TG9jKSByZXR1cm4gaGFuZGxlKFwiZW5kXCIpO1xuICAgICAgICBpZiAoaS50cnlMb2MgPD0gdGhpcy5wcmV2KSB7XG4gICAgICAgICAgdmFyIGMgPSBuLmNhbGwoaSwgXCJjYXRjaExvY1wiKSxcbiAgICAgICAgICAgIHUgPSBuLmNhbGwoaSwgXCJmaW5hbGx5TG9jXCIpO1xuICAgICAgICAgIGlmIChjICYmIHUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBpLmNhdGNoTG9jKSByZXR1cm4gaGFuZGxlKGkuY2F0Y2hMb2MsICEwKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBpLmZpbmFsbHlMb2MpIHJldHVybiBoYW5kbGUoaS5maW5hbGx5TG9jKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBpLmNhdGNoTG9jKSByZXR1cm4gaGFuZGxlKGkuY2F0Y2hMb2MsICEwKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCF1KSB0aHJvdyBuZXcgRXJyb3IoXCJ0cnkgc3RhdGVtZW50IHdpdGhvdXQgY2F0Y2ggb3IgZmluYWxseVwiKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBpLmZpbmFsbHlMb2MpIHJldHVybiBoYW5kbGUoaS5maW5hbGx5TG9jKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIGFicnVwdDogZnVuY3Rpb24gKHQsIGUpIHtcbiAgICAgIGZvciAodmFyIHIgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgciA+PSAwOyAtLXIpIHtcbiAgICAgICAgdmFyIG8gPSB0aGlzLnRyeUVudHJpZXNbcl07XG4gICAgICAgIGlmIChvLnRyeUxvYyA8PSB0aGlzLnByZXYgJiYgbi5jYWxsKG8sIFwiZmluYWxseUxvY1wiKSAmJiB0aGlzLnByZXYgPCBvLmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICB2YXIgaSA9IG87XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGkgJiYgKFwiYnJlYWtcIiA9PT0gdCB8fCBcImNvbnRpbnVlXCIgPT09IHQpICYmIGkudHJ5TG9jIDw9IGUgJiYgZSA8PSBpLmZpbmFsbHlMb2MgJiYgKGkgPSBudWxsKTtcbiAgICAgIHZhciBhID0gaSA/IGkuY29tcGxldGlvbiA6IHt9O1xuICAgICAgcmV0dXJuIGEudHlwZSA9IHQsIGEuYXJnID0gZSwgaSA/ICh0aGlzLm1ldGhvZCA9IFwibmV4dFwiLCB0aGlzLm5leHQgPSBpLmZpbmFsbHlMb2MsIHkpIDogdGhpcy5jb21wbGV0ZShhKTtcbiAgICB9LFxuICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAodCwgZSkge1xuICAgICAgaWYgKFwidGhyb3dcIiA9PT0gdC50eXBlKSB0aHJvdyB0LmFyZztcbiAgICAgIHJldHVybiBcImJyZWFrXCIgPT09IHQudHlwZSB8fCBcImNvbnRpbnVlXCIgPT09IHQudHlwZSA/IHRoaXMubmV4dCA9IHQuYXJnIDogXCJyZXR1cm5cIiA9PT0gdC50eXBlID8gKHRoaXMucnZhbCA9IHRoaXMuYXJnID0gdC5hcmcsIHRoaXMubWV0aG9kID0gXCJyZXR1cm5cIiwgdGhpcy5uZXh0ID0gXCJlbmRcIikgOiBcIm5vcm1hbFwiID09PSB0LnR5cGUgJiYgZSAmJiAodGhpcy5uZXh0ID0gZSksIHk7XG4gICAgfSxcbiAgICBmaW5pc2g6IGZ1bmN0aW9uICh0KSB7XG4gICAgICBmb3IgKHZhciBlID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGUgPj0gMDsgLS1lKSB7XG4gICAgICAgIHZhciByID0gdGhpcy50cnlFbnRyaWVzW2VdO1xuICAgICAgICBpZiAoci5maW5hbGx5TG9jID09PSB0KSByZXR1cm4gdGhpcy5jb21wbGV0ZShyLmNvbXBsZXRpb24sIHIuYWZ0ZXJMb2MpLCByZXNldFRyeUVudHJ5KHIpLCB5O1xuICAgICAgfVxuICAgIH0sXG4gICAgY2F0Y2g6IGZ1bmN0aW9uICh0KSB7XG4gICAgICBmb3IgKHZhciBlID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGUgPj0gMDsgLS1lKSB7XG4gICAgICAgIHZhciByID0gdGhpcy50cnlFbnRyaWVzW2VdO1xuICAgICAgICBpZiAoci50cnlMb2MgPT09IHQpIHtcbiAgICAgICAgICB2YXIgbiA9IHIuY29tcGxldGlvbjtcbiAgICAgICAgICBpZiAoXCJ0aHJvd1wiID09PSBuLnR5cGUpIHtcbiAgICAgICAgICAgIHZhciBvID0gbi5hcmc7XG4gICAgICAgICAgICByZXNldFRyeUVudHJ5KHIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaWxsZWdhbCBjYXRjaCBhdHRlbXB0XCIpO1xuICAgIH0sXG4gICAgZGVsZWdhdGVZaWVsZDogZnVuY3Rpb24gKGUsIHIsIG4pIHtcbiAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlID0ge1xuICAgICAgICBpdGVyYXRvcjogdmFsdWVzKGUpLFxuICAgICAgICByZXN1bHROYW1lOiByLFxuICAgICAgICBuZXh0TG9jOiBuXG4gICAgICB9LCBcIm5leHRcIiA9PT0gdGhpcy5tZXRob2QgJiYgKHRoaXMuYXJnID0gdCksIHk7XG4gICAgfVxuICB9LCBlO1xufVxuZnVuY3Rpb24gX3R5cGVvZihvKSB7XG4gIFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjtcblxuICByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvO1xuICB9IDogZnVuY3Rpb24gKG8pIHtcbiAgICByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbztcbiAgfSwgX3R5cGVvZihvKTtcbn1cbmZ1bmN0aW9uIF91c2luZyhvLCBlLCBuKSB7XG4gIGlmIChudWxsID09IGUpIHJldHVybiBlO1xuICBpZiAoXCJvYmplY3RcIiAhPSB0eXBlb2YgZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcInVzaW5nIGRlY2xhcmF0aW9ucyBjYW4gb25seSBiZSB1c2VkIHdpdGggb2JqZWN0cywgbnVsbCwgb3IgdW5kZWZpbmVkLlwiKTtcbiAgaWYgKG4pIHZhciByID0gZVtTeW1ib2wuYXN5bmNEaXNwb3NlIHx8IFN5bWJvbC5mb3IoXCJTeW1ib2wuYXN5bmNEaXNwb3NlXCIpXTtcbiAgaWYgKG51bGwgPT0gciAmJiAociA9IGVbU3ltYm9sLmRpc3Bvc2UgfHwgU3ltYm9sLmZvcihcIlN5bWJvbC5kaXNwb3NlXCIpXSksIFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByb3BlcnR5IFtTeW1ib2wuZGlzcG9zZV0gaXMgbm90IGEgZnVuY3Rpb24uXCIpO1xuICByZXR1cm4gby5wdXNoKHtcbiAgICB2OiBlLFxuICAgIGQ6IHIsXG4gICAgYTogblxuICB9KSwgZTtcbn1cbmZ1bmN0aW9uIF93cmFwUmVnRXhwKCkge1xuICBfd3JhcFJlZ0V4cCA9IGZ1bmN0aW9uIChlLCByKSB7XG4gICAgcmV0dXJuIG5ldyBCYWJlbFJlZ0V4cChlLCB2b2lkIDAsIHIpO1xuICB9O1xuICB2YXIgZSA9IFJlZ0V4cC5wcm90b3R5cGUsXG4gICAgciA9IG5ldyBXZWFrTWFwKCk7XG4gIGZ1bmN0aW9uIEJhYmVsUmVnRXhwKGUsIHQsIHApIHtcbiAgICB2YXIgbyA9IG5ldyBSZWdFeHAoZSwgdCk7XG4gICAgcmV0dXJuIHIuc2V0KG8sIHAgfHwgci5nZXQoZSkpLCBfc2V0UHJvdG90eXBlT2YobywgQmFiZWxSZWdFeHAucHJvdG90eXBlKTtcbiAgfVxuICBmdW5jdGlvbiBidWlsZEdyb3VwcyhlLCB0KSB7XG4gICAgdmFyIHAgPSByLmdldCh0KTtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMocCkucmVkdWNlKGZ1bmN0aW9uIChyLCB0KSB7XG4gICAgICB2YXIgbyA9IHBbdF07XG4gICAgICBpZiAoXCJudW1iZXJcIiA9PSB0eXBlb2Ygbykgclt0XSA9IGVbb107ZWxzZSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyB2b2lkIDAgPT09IGVbb1tpXV0gJiYgaSArIDEgPCBvLmxlbmd0aDspIGkrKztcbiAgICAgICAgclt0XSA9IGVbb1tpXV07XG4gICAgICB9XG4gICAgICByZXR1cm4gcjtcbiAgICB9LCBPYmplY3QuY3JlYXRlKG51bGwpKTtcbiAgfVxuICByZXR1cm4gX2luaGVyaXRzKEJhYmVsUmVnRXhwLCBSZWdFeHApLCBCYWJlbFJlZ0V4cC5wcm90b3R5cGUuZXhlYyA9IGZ1bmN0aW9uIChyKSB7XG4gICAgdmFyIHQgPSBlLmV4ZWMuY2FsbCh0aGlzLCByKTtcbiAgICBpZiAodCkge1xuICAgICAgdC5ncm91cHMgPSBidWlsZEdyb3Vwcyh0LCB0aGlzKTtcbiAgICAgIHZhciBwID0gdC5pbmRpY2VzO1xuICAgICAgcCAmJiAocC5ncm91cHMgPSBidWlsZEdyb3VwcyhwLCB0aGlzKSk7XG4gICAgfVxuICAgIHJldHVybiB0O1xuICB9LCBCYWJlbFJlZ0V4cC5wcm90b3R5cGVbU3ltYm9sLnJlcGxhY2VdID0gZnVuY3Rpb24gKHQsIHApIHtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgcCkge1xuICAgICAgdmFyIG8gPSByLmdldCh0aGlzKTtcbiAgICAgIHJldHVybiBlW1N5bWJvbC5yZXBsYWNlXS5jYWxsKHRoaXMsIHQsIHAucmVwbGFjZSgvXFwkPChbXj5dKyk+L2csIGZ1bmN0aW9uIChlLCByKSB7XG4gICAgICAgIHZhciB0ID0gb1tyXTtcbiAgICAgICAgcmV0dXJuIFwiJFwiICsgKEFycmF5LmlzQXJyYXkodCkgPyB0LmpvaW4oXCIkXCIpIDogdCk7XG4gICAgICB9KSk7XG4gICAgfVxuICAgIGlmIChcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHApIHtcbiAgICAgIHZhciBpID0gdGhpcztcbiAgICAgIHJldHVybiBlW1N5bWJvbC5yZXBsYWNlXS5jYWxsKHRoaXMsIHQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGUgPSBhcmd1bWVudHM7XG4gICAgICAgIHJldHVybiBcIm9iamVjdFwiICE9IHR5cGVvZiBlW2UubGVuZ3RoIC0gMV0gJiYgKGUgPSBbXS5zbGljZS5jYWxsKGUpKS5wdXNoKGJ1aWxkR3JvdXBzKGUsIGkpKSwgcC5hcHBseSh0aGlzLCBlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZVtTeW1ib2wucmVwbGFjZV0uY2FsbCh0aGlzLCB0LCBwKTtcbiAgfSwgX3dyYXBSZWdFeHAuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cbmZ1bmN0aW9uIF9Bd2FpdFZhbHVlKHZhbHVlKSB7XG4gIHRoaXMud3JhcHBlZCA9IHZhbHVlO1xufVxuZnVuY3Rpb24gX3dyYXBBc3luY0dlbmVyYXRvcihmbikge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgX0FzeW5jR2VuZXJhdG9yKGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9O1xufVxuZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykge1xuICB0cnkge1xuICAgIHZhciBpbmZvID0gZ2VuW2tleV0oYXJnKTtcbiAgICB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlamVjdChlcnJvcik7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChpbmZvLmRvbmUpIHtcbiAgICByZXNvbHZlKHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7XG4gIH1cbn1cbmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgICAgZnVuY3Rpb24gX25leHQodmFsdWUpIHtcbiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBcIm5leHRcIiwgdmFsdWUpO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gX3Rocm93KGVycikge1xuICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIFwidGhyb3dcIiwgZXJyKTtcbiAgICAgIH1cbiAgICAgIF9uZXh0KHVuZGVmaW5lZCk7XG4gICAgfSk7XG4gIH07XG59XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG4gIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbiAgfVxufVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XG4gICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgX3RvUHJvcGVydHlLZXkoZGVzY3JpcHRvci5rZXkpLCBkZXNjcmlwdG9yKTtcbiAgfVxufVxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcbiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RydWN0b3IsIFwicHJvdG90eXBlXCIsIHtcbiAgICB3cml0YWJsZTogZmFsc2VcbiAgfSk7XG4gIHJldHVybiBDb25zdHJ1Y3Rvcjtcbn1cbmZ1bmN0aW9uIF9kZWZpbmVFbnVtZXJhYmxlUHJvcGVydGllcyhvYmosIGRlc2NzKSB7XG4gIGZvciAodmFyIGtleSBpbiBkZXNjcykge1xuICAgIHZhciBkZXNjID0gZGVzY3Nba2V5XTtcbiAgICBkZXNjLmNvbmZpZ3VyYWJsZSA9IGRlc2MuZW51bWVyYWJsZSA9IHRydWU7XG4gICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjKSBkZXNjLndyaXRhYmxlID0gdHJ1ZTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIGRlc2MpO1xuICB9XG4gIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XG4gICAgdmFyIG9iamVjdFN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGRlc2NzKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iamVjdFN5bWJvbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzeW0gPSBvYmplY3RTeW1ib2xzW2ldO1xuICAgICAgdmFyIGRlc2MgPSBkZXNjc1tzeW1dO1xuICAgICAgZGVzYy5jb25maWd1cmFibGUgPSBkZXNjLmVudW1lcmFibGUgPSB0cnVlO1xuICAgICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjKSBkZXNjLndyaXRhYmxlID0gdHJ1ZTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIHN5bSwgZGVzYyk7XG4gICAgfVxuICB9XG4gIHJldHVybiBvYmo7XG59XG5mdW5jdGlvbiBfZGVmYXVsdHMob2JqLCBkZWZhdWx0cykge1xuICB2YXIga2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGRlZmF1bHRzKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgdmFyIHZhbHVlID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihkZWZhdWx0cywga2V5KTtcbiAgICBpZiAodmFsdWUgJiYgdmFsdWUuY29uZmlndXJhYmxlICYmIG9ialtrZXldID09PSB1bmRlZmluZWQpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gb2JqO1xufVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkge1xuICBrZXkgPSBfdG9Qcm9wZXJ0eUtleShrZXkpO1xuICBpZiAoa2V5IGluIG9iaikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgb2JqW2tleV0gPSB2YWx1ZTtcbiAgfVxuICByZXR1cm4gb2JqO1xufVxuZnVuY3Rpb24gX2V4dGVuZHMoKSB7XG4gIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiA/IE9iamVjdC5hc3NpZ24uYmluZCgpIDogZnVuY3Rpb24gKHRhcmdldCkge1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO1xuICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfTtcbiAgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkge1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IE9iamVjdChhcmd1bWVudHNbaV0pIDoge307XG4gICAgdmFyIG93bktleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpO1xuICAgIGlmICh0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgb3duS2V5cy5wdXNoLmFwcGx5KG93bktleXMsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKS5maWx0ZXIoZnVuY3Rpb24gKHN5bSkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIHN5bSkuZW51bWVyYWJsZTtcbiAgICAgIH0pKTtcbiAgICB9XG4gICAgb3duS2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiB0YXJnZXQ7XG59XG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcbiAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtcbiAgfVxuICBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHtcbiAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgdmFsdWU6IHN1YkNsYXNzLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9XG4gIH0pO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc3ViQ2xhc3MsIFwicHJvdG90eXBlXCIsIHtcbiAgICB3cml0YWJsZTogZmFsc2VcbiAgfSk7XG4gIGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpO1xufVxuZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcbiAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7XG4gIHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzO1xuICBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpO1xufVxuZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHtcbiAgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mLmJpbmQoKSA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7XG4gICAgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTtcbiAgfTtcbiAgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTtcbn1cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7XG4gIF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkge1xuICAgIG8uX19wcm90b19fID0gcDtcbiAgICByZXR1cm4gbztcbiAgfTtcbiAgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTtcbn1cbmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7XG4gIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTtcbiAgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTtcbiAgaWYgKHR5cGVvZiBQcm94eSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gdHJ1ZTtcbiAgdHJ5IHtcbiAgICBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cbmZ1bmN0aW9uIF9jb25zdHJ1Y3QoUGFyZW50LCBhcmdzLCBDbGFzcykge1xuICBpZiAoX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpKSB7XG4gICAgX2NvbnN0cnVjdCA9IFJlZmxlY3QuY29uc3RydWN0LmJpbmQoKTtcbiAgfSBlbHNlIHtcbiAgICBfY29uc3RydWN0ID0gZnVuY3Rpb24gX2NvbnN0cnVjdChQYXJlbnQsIGFyZ3MsIENsYXNzKSB7XG4gICAgICB2YXIgYSA9IFtudWxsXTtcbiAgICAgIGEucHVzaC5hcHBseShhLCBhcmdzKTtcbiAgICAgIHZhciBDb25zdHJ1Y3RvciA9IEZ1bmN0aW9uLmJpbmQuYXBwbHkoUGFyZW50LCBhKTtcbiAgICAgIHZhciBpbnN0YW5jZSA9IG5ldyBDb25zdHJ1Y3RvcigpO1xuICAgICAgaWYgKENsYXNzKSBfc2V0UHJvdG90eXBlT2YoaW5zdGFuY2UsIENsYXNzLnByb3RvdHlwZSk7XG4gICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgfTtcbiAgfVxuICByZXR1cm4gX2NvbnN0cnVjdC5hcHBseShudWxsLCBhcmd1bWVudHMpO1xufVxuZnVuY3Rpb24gX2lzTmF0aXZlRnVuY3Rpb24oZm4pIHtcbiAgcmV0dXJuIEZ1bmN0aW9uLnRvU3RyaW5nLmNhbGwoZm4pLmluZGV4T2YoXCJbbmF0aXZlIGNvZGVdXCIpICE9PSAtMTtcbn1cbmZ1bmN0aW9uIF93cmFwTmF0aXZlU3VwZXIoQ2xhc3MpIHtcbiAgdmFyIF9jYWNoZSA9IHR5cGVvZiBNYXAgPT09IFwiZnVuY3Rpb25cIiA/IG5ldyBNYXAoKSA6IHVuZGVmaW5lZDtcbiAgX3dyYXBOYXRpdmVTdXBlciA9IGZ1bmN0aW9uIF93cmFwTmF0aXZlU3VwZXIoQ2xhc3MpIHtcbiAgICBpZiAoQ2xhc3MgPT09IG51bGwgfHwgIV9pc05hdGl2ZUZ1bmN0aW9uKENsYXNzKSkgcmV0dXJuIENsYXNzO1xuICAgIGlmICh0eXBlb2YgQ2xhc3MgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIF9jYWNoZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgaWYgKF9jYWNoZS5oYXMoQ2xhc3MpKSByZXR1cm4gX2NhY2hlLmdldChDbGFzcyk7XG4gICAgICBfY2FjaGUuc2V0KENsYXNzLCBXcmFwcGVyKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gV3JhcHBlcigpIHtcbiAgICAgIHJldHVybiBfY29uc3RydWN0KENsYXNzLCBhcmd1bWVudHMsIF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3Rvcik7XG4gICAgfVxuICAgIFdyYXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDbGFzcy5wcm90b3R5cGUsIHtcbiAgICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICAgIHZhbHVlOiBXcmFwcGVyLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBfc2V0UHJvdG90eXBlT2YoV3JhcHBlciwgQ2xhc3MpO1xuICB9O1xuICByZXR1cm4gX3dyYXBOYXRpdmVTdXBlcihDbGFzcyk7XG59XG5mdW5jdGlvbiBfaW5zdGFuY2VvZihsZWZ0LCByaWdodCkge1xuICBpZiAocmlnaHQgIT0gbnVsbCAmJiB0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIHJpZ2h0W1N5bWJvbC5oYXNJbnN0YW5jZV0pIHtcbiAgICByZXR1cm4gISFyaWdodFtTeW1ib2wuaGFzSW5zdGFuY2VdKGxlZnQpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBsZWZ0IGluc3RhbmNlb2YgcmlnaHQ7XG4gIH1cbn1cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG4gIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7XG4gICAgZGVmYXVsdDogb2JqXG4gIH07XG59XG5mdW5jdGlvbiBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUobm9kZUludGVyb3ApIHtcbiAgaWYgKHR5cGVvZiBXZWFrTWFwICE9PSBcImZ1bmN0aW9uXCIpIHJldHVybiBudWxsO1xuICB2YXIgY2FjaGVCYWJlbEludGVyb3AgPSBuZXcgV2Vha01hcCgpO1xuICB2YXIgY2FjaGVOb2RlSW50ZXJvcCA9IG5ldyBXZWFrTWFwKCk7XG4gIHJldHVybiAoX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlID0gZnVuY3Rpb24gKG5vZGVJbnRlcm9wKSB7XG4gICAgcmV0dXJuIG5vZGVJbnRlcm9wID8gY2FjaGVOb2RlSW50ZXJvcCA6IGNhY2hlQmFiZWxJbnRlcm9wO1xuICB9KShub2RlSW50ZXJvcCk7XG59XG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmosIG5vZGVJbnRlcm9wKSB7XG4gIGlmICghbm9kZUludGVyb3AgJiYgb2JqICYmIG9iai5fX2VzTW9kdWxlKSB7XG4gICAgcmV0dXJuIG9iajtcbiAgfVxuICBpZiAob2JqID09PSBudWxsIHx8IHR5cGVvZiBvYmogIT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG9iaiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRlZmF1bHQ6IG9ialxuICAgIH07XG4gIH1cbiAgdmFyIGNhY2hlID0gX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlKG5vZGVJbnRlcm9wKTtcbiAgaWYgKGNhY2hlICYmIGNhY2hlLmhhcyhvYmopKSB7XG4gICAgcmV0dXJuIGNhY2hlLmdldChvYmopO1xuICB9XG4gIHZhciBuZXdPYmogPSB7fTtcbiAgdmFyIGhhc1Byb3BlcnR5RGVzY3JpcHRvciA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgaWYgKGtleSAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgdmFyIGRlc2MgPSBoYXNQcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IG51bGw7XG4gICAgICBpZiAoZGVzYyAmJiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXdPYmpba2V5XSA9IG9ialtrZXldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBuZXdPYmouZGVmYXVsdCA9IG9iajtcbiAgaWYgKGNhY2hlKSB7XG4gICAgY2FjaGUuc2V0KG9iaiwgbmV3T2JqKTtcbiAgfVxuICByZXR1cm4gbmV3T2JqO1xufVxuZnVuY3Rpb24gX25ld0Fycm93Q2hlY2soaW5uZXJUaGlzLCBib3VuZFRoaXMpIHtcbiAgaWYgKGlubmVyVGhpcyAhPT0gYm91bmRUaGlzKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBpbnN0YW50aWF0ZSBhbiBhcnJvdyBmdW5jdGlvblwiKTtcbiAgfVxufVxuZnVuY3Rpb24gX29iamVjdERlc3RydWN0dXJpbmdFbXB0eShvYmopIHtcbiAgaWYgKG9iaiA9PSBudWxsKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGRlc3RydWN0dXJlIFwiICsgb2JqKTtcbn1cbmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpIHtcbiAgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307XG4gIHZhciB0YXJnZXQgPSB7fTtcbiAgdmFyIHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpO1xuICB2YXIga2V5LCBpO1xuICBmb3IgKGkgPSAwOyBpIDwgc291cmNlS2V5cy5sZW5ndGg7IGkrKykge1xuICAgIGtleSA9IHNvdXJjZUtleXNbaV07XG4gICAgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTtcbiAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICB9XG4gIHJldHVybiB0YXJnZXQ7XG59XG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoc291cmNlLCBleGNsdWRlZCkge1xuICBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTtcbiAgdmFyIHRhcmdldCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpO1xuICB2YXIga2V5LCBpO1xuICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgIHZhciBzb3VyY2VTeW1ib2xLZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2UpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBzb3VyY2VTeW1ib2xLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBrZXkgPSBzb3VyY2VTeW1ib2xLZXlzW2ldO1xuICAgICAgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTtcbiAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHNvdXJjZSwga2V5KSkgY29udGludWU7XG4gICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdGFyZ2V0O1xufVxuZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7XG4gIGlmIChzZWxmID09PSB2b2lkIDApIHtcbiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7XG4gIH1cbiAgcmV0dXJuIHNlbGY7XG59XG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7XG4gIGlmIChjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSkge1xuICAgIHJldHVybiBjYWxsO1xuICB9IGVsc2UgaWYgKGNhbGwgIT09IHZvaWQgMCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJEZXJpdmVkIGNvbnN0cnVjdG9ycyBtYXkgb25seSByZXR1cm4gb2JqZWN0IG9yIHVuZGVmaW5lZFwiKTtcbiAgfVxuICByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTtcbn1cbmZ1bmN0aW9uIF9jcmVhdGVTdXBlcihEZXJpdmVkKSB7XG4gIHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpO1xuICByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7XG4gICAgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLFxuICAgICAgcmVzdWx0O1xuICAgIGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7XG4gICAgICB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yO1xuICAgICAgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoU3VwZXIsIGFyZ3VtZW50cywgTmV3VGFyZ2V0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0ID0gU3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7XG4gIH07XG59XG5mdW5jdGlvbiBfc3VwZXJQcm9wQmFzZShvYmplY3QsIHByb3BlcnR5KSB7XG4gIHdoaWxlICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpKSB7XG4gICAgb2JqZWN0ID0gX2dldFByb3RvdHlwZU9mKG9iamVjdCk7XG4gICAgaWYgKG9iamVjdCA9PT0gbnVsbCkgYnJlYWs7XG4gIH1cbiAgcmV0dXJuIG9iamVjdDtcbn1cbmZ1bmN0aW9uIF9nZXQoKSB7XG4gIGlmICh0eXBlb2YgUmVmbGVjdCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBSZWZsZWN0LmdldCkge1xuICAgIF9nZXQgPSBSZWZsZWN0LmdldC5iaW5kKCk7XG4gIH0gZWxzZSB7XG4gICAgX2dldCA9IGZ1bmN0aW9uIF9nZXQodGFyZ2V0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHtcbiAgICAgIHZhciBiYXNlID0gX3N1cGVyUHJvcEJhc2UodGFyZ2V0LCBwcm9wZXJ0eSk7XG4gICAgICBpZiAoIWJhc2UpIHJldHVybjtcbiAgICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihiYXNlLCBwcm9wZXJ0eSk7XG4gICAgICBpZiAoZGVzYy5nZXQpIHtcbiAgICAgICAgcmV0dXJuIGRlc2MuZ2V0LmNhbGwoYXJndW1lbnRzLmxlbmd0aCA8IDMgPyB0YXJnZXQgOiByZWNlaXZlcik7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGVzYy52YWx1ZTtcbiAgICB9O1xuICB9XG4gIHJldHVybiBfZ2V0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5mdW5jdGlvbiBzZXQodGFyZ2V0LCBwcm9wZXJ0eSwgdmFsdWUsIHJlY2VpdmVyKSB7XG4gIGlmICh0eXBlb2YgUmVmbGVjdCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBSZWZsZWN0LnNldCkge1xuICAgIHNldCA9IFJlZmxlY3Quc2V0O1xuICB9IGVsc2Uge1xuICAgIHNldCA9IGZ1bmN0aW9uIHNldCh0YXJnZXQsIHByb3BlcnR5LCB2YWx1ZSwgcmVjZWl2ZXIpIHtcbiAgICAgIHZhciBiYXNlID0gX3N1cGVyUHJvcEJhc2UodGFyZ2V0LCBwcm9wZXJ0eSk7XG4gICAgICB2YXIgZGVzYztcbiAgICAgIGlmIChiYXNlKSB7XG4gICAgICAgIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGJhc2UsIHByb3BlcnR5KTtcbiAgICAgICAgaWYgKGRlc2Muc2V0KSB7XG4gICAgICAgICAgZGVzYy5zZXQuY2FsbChyZWNlaXZlciwgdmFsdWUpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKCFkZXNjLndyaXRhYmxlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihyZWNlaXZlciwgcHJvcGVydHkpO1xuICAgICAgaWYgKGRlc2MpIHtcbiAgICAgICAgaWYgKCFkZXNjLndyaXRhYmxlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGRlc2MudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJlY2VpdmVyLCBwcm9wZXJ0eSwgZGVzYyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfZGVmaW5lUHJvcGVydHkocmVjZWl2ZXIsIHByb3BlcnR5LCB2YWx1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICB9XG4gIHJldHVybiBzZXQodGFyZ2V0LCBwcm9wZXJ0eSwgdmFsdWUsIHJlY2VpdmVyKTtcbn1cbmZ1bmN0aW9uIF9zZXQodGFyZ2V0LCBwcm9wZXJ0eSwgdmFsdWUsIHJlY2VpdmVyLCBpc1N0cmljdCkge1xuICB2YXIgcyA9IHNldCh0YXJnZXQsIHByb3BlcnR5LCB2YWx1ZSwgcmVjZWl2ZXIgfHwgdGFyZ2V0KTtcbiAgaWYgKCFzICYmIGlzU3RyaWN0KSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZmFpbGVkIHRvIHNldCBwcm9wZXJ0eScpO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoc3RyaW5ncywgcmF3KSB7XG4gIGlmICghcmF3KSB7XG4gICAgcmF3ID0gc3RyaW5ncy5zbGljZSgwKTtcbiAgfVxuICByZXR1cm4gT2JqZWN0LmZyZWV6ZShPYmplY3QuZGVmaW5lUHJvcGVydGllcyhzdHJpbmdzLCB7XG4gICAgcmF3OiB7XG4gICAgICB2YWx1ZTogT2JqZWN0LmZyZWV6ZShyYXcpXG4gICAgfVxuICB9KSk7XG59XG5mdW5jdGlvbiBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsTG9vc2Uoc3RyaW5ncywgcmF3KSB7XG4gIGlmICghcmF3KSB7XG4gICAgcmF3ID0gc3RyaW5ncy5zbGljZSgwKTtcbiAgfVxuICBzdHJpbmdzLnJhdyA9IHJhdztcbiAgcmV0dXJuIHN0cmluZ3M7XG59XG5mdW5jdGlvbiBfcmVhZE9ubHlFcnJvcihuYW1lKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJcXFwiXCIgKyBuYW1lICsgXCJcXFwiIGlzIHJlYWQtb25seVwiKTtcbn1cbmZ1bmN0aW9uIF93cml0ZU9ubHlFcnJvcihuYW1lKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJcXFwiXCIgKyBuYW1lICsgXCJcXFwiIGlzIHdyaXRlLW9ubHlcIik7XG59XG5mdW5jdGlvbiBfY2xhc3NOYW1lVERaRXJyb3IobmFtZSkge1xuICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJDbGFzcyBcXFwiXCIgKyBuYW1lICsgXCJcXFwiIGNhbm5vdCBiZSByZWZlcmVuY2VkIGluIGNvbXB1dGVkIHByb3BlcnR5IGtleXMuXCIpO1xufVxuZnVuY3Rpb24gX3RlbXBvcmFsVW5kZWZpbmVkKCkge31cbmZ1bmN0aW9uIF90ZHoobmFtZSkge1xuICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IobmFtZSArIFwiIGlzIG5vdCBkZWZpbmVkIC0gdGVtcG9yYWwgZGVhZCB6b25lXCIpO1xufVxuZnVuY3Rpb24gX3RlbXBvcmFsUmVmKHZhbCwgbmFtZSkge1xuICByZXR1cm4gdmFsID09PSBfdGVtcG9yYWxVbmRlZmluZWQgPyBfdGR6KG5hbWUpIDogdmFsO1xufVxuZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7XG4gIHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7XG59XG5mdW5jdGlvbiBfc2xpY2VkVG9BcnJheUxvb3NlKGFyciwgaSkge1xuICByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0TG9vc2UoYXJyLCBpKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7XG59XG5mdW5jdGlvbiBfdG9BcnJheShhcnIpIHtcbiAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7XG59XG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7XG4gIHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7XG59XG5mdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShhcnIpO1xufVxuZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikge1xuICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyO1xufVxuZnVuY3Rpb24gX21heWJlQXJyYXlMaWtlKG5leHQsIGFyciwgaSkge1xuICBpZiAoYXJyICYmICFBcnJheS5pc0FycmF5KGFycikgJiYgdHlwZW9mIGFyci5sZW5ndGggPT09IFwibnVtYmVyXCIpIHtcbiAgICB2YXIgbGVuID0gYXJyLmxlbmd0aDtcbiAgICByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBpICE9PSB2b2lkIDAgJiYgaSA8IGxlbiA/IGkgOiBsZW4pO1xuICB9XG4gIHJldHVybiBuZXh0KGFyciwgaSk7XG59XG5mdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHtcbiAgaWYgKHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgaXRlcltTeW1ib2wuaXRlcmF0b3JdICE9IG51bGwgfHwgaXRlcltcIkBAaXRlcmF0b3JcIl0gIT0gbnVsbCkgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7XG59XG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7XG4gIGlmICghbykgcmV0dXJuO1xuICBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pO1xuICB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7XG4gIGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7XG4gIGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pO1xuICBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7XG59XG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikge1xuICBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSBhcnIyW2ldID0gYXJyW2ldO1xuICByZXR1cm4gYXJyMjtcbn1cbmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7XG59XG5mdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpO1xufVxuZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobywgYWxsb3dBcnJheUxpa2UpIHtcbiAgdmFyIGl0ID0gdHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0gfHwgb1tcIkBAaXRlcmF0b3JcIl07XG4gIGlmICghaXQpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7XG4gICAgICBpZiAoaXQpIG8gPSBpdDtcbiAgICAgIHZhciBpID0gMDtcbiAgICAgIHZhciBGID0gZnVuY3Rpb24gKCkge307XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzOiBGLFxuICAgICAgICBuOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7XG4gICAgICAgICAgICBkb25lOiB0cnVlXG4gICAgICAgICAgfTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZG9uZTogZmFsc2UsXG4gICAgICAgICAgICB2YWx1ZTogb1tpKytdXG4gICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9LFxuICAgICAgICBmOiBGXG4gICAgICB9O1xuICAgIH1cbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7XG4gIH1cbiAgdmFyIG5vcm1hbENvbXBsZXRpb24gPSB0cnVlLFxuICAgIGRpZEVyciA9IGZhbHNlLFxuICAgIGVycjtcbiAgcmV0dXJuIHtcbiAgICBzOiBmdW5jdGlvbiAoKSB7XG4gICAgICBpdCA9IGl0LmNhbGwobyk7XG4gICAgfSxcbiAgICBuOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgc3RlcCA9IGl0Lm5leHQoKTtcbiAgICAgIG5vcm1hbENvbXBsZXRpb24gPSBzdGVwLmRvbmU7XG4gICAgICByZXR1cm4gc3RlcDtcbiAgICB9LFxuICAgIGU6IGZ1bmN0aW9uIChlKSB7XG4gICAgICBkaWRFcnIgPSB0cnVlO1xuICAgICAgZXJyID0gZTtcbiAgICB9LFxuICAgIGY6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICghbm9ybWFsQ29tcGxldGlvbiAmJiBpdC5yZXR1cm4gIT0gbnVsbCkgaXQucmV0dXJuKCk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBpZiAoZGlkRXJyKSB0aHJvdyBlcnI7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShvLCBhbGxvd0FycmF5TGlrZSkge1xuICB2YXIgaXQgPSB0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSB8fCBvW1wiQEBpdGVyYXRvclwiXTtcbiAgaWYgKGl0KSByZXR1cm4gKGl0ID0gaXQuY2FsbChvKSkubmV4dC5iaW5kKGl0KTtcbiAgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikge1xuICAgIGlmIChpdCkgbyA9IGl0O1xuICAgIHZhciBpID0gMDtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7XG4gICAgICAgIGRvbmU6IHRydWVcbiAgICAgIH07XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkb25lOiBmYWxzZSxcbiAgICAgICAgdmFsdWU6IG9baSsrXVxuICAgICAgfTtcbiAgICB9O1xuICB9XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTtcbn1cbmZ1bmN0aW9uIF9za2lwRmlyc3RHZW5lcmF0b3JOZXh0KGZuKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGl0ID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpdC5uZXh0KCk7XG4gICAgcmV0dXJuIGl0O1xuICB9O1xufVxuZnVuY3Rpb24gX3RvUHJpbWl0aXZlKGlucHV0LCBoaW50KSB7XG4gIGlmICh0eXBlb2YgaW5wdXQgIT09IFwib2JqZWN0XCIgfHwgaW5wdXQgPT09IG51bGwpIHJldHVybiBpbnB1dDtcbiAgdmFyIHByaW0gPSBpbnB1dFtTeW1ib2wudG9QcmltaXRpdmVdO1xuICBpZiAocHJpbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdmFyIHJlcyA9IHByaW0uY2FsbChpbnB1dCwgaGludCB8fCBcImRlZmF1bHRcIik7XG4gICAgaWYgKHR5cGVvZiByZXMgIT09IFwib2JqZWN0XCIpIHJldHVybiByZXM7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuXCIpO1xuICB9XG4gIHJldHVybiAoaGludCA9PT0gXCJzdHJpbmdcIiA/IFN0cmluZyA6IE51bWJlcikoaW5wdXQpO1xufVxuZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkoYXJnKSB7XG4gIHZhciBrZXkgPSBfdG9QcmltaXRpdmUoYXJnLCBcInN0cmluZ1wiKTtcbiAgcmV0dXJuIHR5cGVvZiBrZXkgPT09IFwic3ltYm9sXCIgPyBrZXkgOiBTdHJpbmcoa2V5KTtcbn1cbmZ1bmN0aW9uIF9pbml0aWFsaXplcldhcm5pbmdIZWxwZXIoZGVzY3JpcHRvciwgY29udGV4dCkge1xuICB0aHJvdyBuZXcgRXJyb3IoJ0RlY29yYXRpbmcgY2xhc3MgcHJvcGVydHkgZmFpbGVkLiBQbGVhc2UgZW5zdXJlIHRoYXQgJyArICd0cmFuc2Zvcm0tY2xhc3MtcHJvcGVydGllcyBpcyBlbmFibGVkIGFuZCBydW5zIGFmdGVyIHRoZSBkZWNvcmF0b3JzIHRyYW5zZm9ybS4nKTtcbn1cbmZ1bmN0aW9uIF9pbml0aWFsaXplckRlZmluZVByb3BlcnR5KHRhcmdldCwgcHJvcGVydHksIGRlc2NyaXB0b3IsIGNvbnRleHQpIHtcbiAgaWYgKCFkZXNjcmlwdG9yKSByZXR1cm47XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5LCB7XG4gICAgZW51bWVyYWJsZTogZGVzY3JpcHRvci5lbnVtZXJhYmxlLFxuICAgIGNvbmZpZ3VyYWJsZTogZGVzY3JpcHRvci5jb25maWd1cmFibGUsXG4gICAgd3JpdGFibGU6IGRlc2NyaXB0b3Iud3JpdGFibGUsXG4gICAgdmFsdWU6IGRlc2NyaXB0b3IuaW5pdGlhbGl6ZXIgPyBkZXNjcmlwdG9yLmluaXRpYWxpemVyLmNhbGwoY29udGV4dCkgOiB2b2lkIDBcbiAgfSk7XG59XG5mdW5jdGlvbiBfYXBwbHlEZWNvcmF0ZWREZXNjcmlwdG9yKHRhcmdldCwgcHJvcGVydHksIGRlY29yYXRvcnMsIGRlc2NyaXB0b3IsIGNvbnRleHQpIHtcbiAgdmFyIGRlc2MgPSB7fTtcbiAgT2JqZWN0LmtleXMoZGVzY3JpcHRvcikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgZGVzY1trZXldID0gZGVzY3JpcHRvcltrZXldO1xuICB9KTtcbiAgZGVzYy5lbnVtZXJhYmxlID0gISFkZXNjLmVudW1lcmFibGU7XG4gIGRlc2MuY29uZmlndXJhYmxlID0gISFkZXNjLmNvbmZpZ3VyYWJsZTtcbiAgaWYgKCd2YWx1ZScgaW4gZGVzYyB8fCBkZXNjLmluaXRpYWxpemVyKSB7XG4gICAgZGVzYy53cml0YWJsZSA9IHRydWU7XG4gIH1cbiAgZGVzYyA9IGRlY29yYXRvcnMuc2xpY2UoKS5yZXZlcnNlKCkucmVkdWNlKGZ1bmN0aW9uIChkZXNjLCBkZWNvcmF0b3IpIHtcbiAgICByZXR1cm4gZGVjb3JhdG9yKHRhcmdldCwgcHJvcGVydHksIGRlc2MpIHx8IGRlc2M7XG4gIH0sIGRlc2MpO1xuICBpZiAoY29udGV4dCAmJiBkZXNjLmluaXRpYWxpemVyICE9PSB2b2lkIDApIHtcbiAgICBkZXNjLnZhbHVlID0gZGVzYy5pbml0aWFsaXplciA/IGRlc2MuaW5pdGlhbGl6ZXIuY2FsbChjb250ZXh0KSA6IHZvaWQgMDtcbiAgICBkZXNjLmluaXRpYWxpemVyID0gdW5kZWZpbmVkO1xuICB9XG4gIGlmIChkZXNjLmluaXRpYWxpemVyID09PSB2b2lkIDApIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwcm9wZXJ0eSwgZGVzYyk7XG4gICAgZGVzYyA9IG51bGw7XG4gIH1cbiAgcmV0dXJuIGRlc2M7XG59XG52YXIgaWQgPSAwO1xuZnVuY3Rpb24gX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VLZXkobmFtZSkge1xuICByZXR1cm4gXCJfX3ByaXZhdGVfXCIgKyBpZCsrICsgXCJfXCIgKyBuYW1lO1xufVxuZnVuY3Rpb24gX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHJlY2VpdmVyLCBwcml2YXRlS2V5KSB7XG4gIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHJlY2VpdmVyLCBwcml2YXRlS2V5KSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gdXNlIHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO1xuICB9XG4gIHJldHVybiByZWNlaXZlcjtcbn1cbmZ1bmN0aW9uIF9jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgcHJpdmF0ZU1hcCkge1xuICB2YXIgZGVzY3JpcHRvciA9IF9jbGFzc0V4dHJhY3RGaWVsZERlc2NyaXB0b3IocmVjZWl2ZXIsIHByaXZhdGVNYXAsIFwiZ2V0XCIpO1xuICByZXR1cm4gX2NsYXNzQXBwbHlEZXNjcmlwdG9yR2V0KHJlY2VpdmVyLCBkZXNjcmlwdG9yKTtcbn1cbmZ1bmN0aW9uIF9jbGFzc1ByaXZhdGVGaWVsZFNldChyZWNlaXZlciwgcHJpdmF0ZU1hcCwgdmFsdWUpIHtcbiAgdmFyIGRlc2NyaXB0b3IgPSBfY2xhc3NFeHRyYWN0RmllbGREZXNjcmlwdG9yKHJlY2VpdmVyLCBwcml2YXRlTWFwLCBcInNldFwiKTtcbiAgX2NsYXNzQXBwbHlEZXNjcmlwdG9yU2V0KHJlY2VpdmVyLCBkZXNjcmlwdG9yLCB2YWx1ZSk7XG4gIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIF9jbGFzc1ByaXZhdGVGaWVsZERlc3RydWN0dXJlU2V0KHJlY2VpdmVyLCBwcml2YXRlTWFwKSB7XG4gIHZhciBkZXNjcmlwdG9yID0gX2NsYXNzRXh0cmFjdEZpZWxkRGVzY3JpcHRvcihyZWNlaXZlciwgcHJpdmF0ZU1hcCwgXCJzZXRcIik7XG4gIHJldHVybiBfY2xhc3NBcHBseURlc2NyaXB0b3JEZXN0cnVjdHVyZVNldChyZWNlaXZlciwgZGVzY3JpcHRvcik7XG59XG5mdW5jdGlvbiBfY2xhc3NFeHRyYWN0RmllbGREZXNjcmlwdG9yKHJlY2VpdmVyLCBwcml2YXRlTWFwLCBhY3Rpb24pIHtcbiAgaWYgKCFwcml2YXRlTWFwLmhhcyhyZWNlaXZlcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIFwiICsgYWN0aW9uICsgXCIgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7XG4gIH1cbiAgcmV0dXJuIHByaXZhdGVNYXAuZ2V0KHJlY2VpdmVyKTtcbn1cbmZ1bmN0aW9uIF9jbGFzc1N0YXRpY1ByaXZhdGVGaWVsZFNwZWNHZXQocmVjZWl2ZXIsIGNsYXNzQ29uc3RydWN0b3IsIGRlc2NyaXB0b3IpIHtcbiAgX2NsYXNzQ2hlY2tQcml2YXRlU3RhdGljQWNjZXNzKHJlY2VpdmVyLCBjbGFzc0NvbnN0cnVjdG9yKTtcbiAgX2NsYXNzQ2hlY2tQcml2YXRlU3RhdGljRmllbGREZXNjcmlwdG9yKGRlc2NyaXB0b3IsIFwiZ2V0XCIpO1xuICByZXR1cm4gX2NsYXNzQXBwbHlEZXNjcmlwdG9yR2V0KHJlY2VpdmVyLCBkZXNjcmlwdG9yKTtcbn1cbmZ1bmN0aW9uIF9jbGFzc1N0YXRpY1ByaXZhdGVGaWVsZFNwZWNTZXQocmVjZWl2ZXIsIGNsYXNzQ29uc3RydWN0b3IsIGRlc2NyaXB0b3IsIHZhbHVlKSB7XG4gIF9jbGFzc0NoZWNrUHJpdmF0ZVN0YXRpY0FjY2VzcyhyZWNlaXZlciwgY2xhc3NDb25zdHJ1Y3Rvcik7XG4gIF9jbGFzc0NoZWNrUHJpdmF0ZVN0YXRpY0ZpZWxkRGVzY3JpcHRvcihkZXNjcmlwdG9yLCBcInNldFwiKTtcbiAgX2NsYXNzQXBwbHlEZXNjcmlwdG9yU2V0KHJlY2VpdmVyLCBkZXNjcmlwdG9yLCB2YWx1ZSk7XG4gIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIF9jbGFzc1N0YXRpY1ByaXZhdGVNZXRob2RHZXQocmVjZWl2ZXIsIGNsYXNzQ29uc3RydWN0b3IsIG1ldGhvZCkge1xuICBfY2xhc3NDaGVja1ByaXZhdGVTdGF0aWNBY2Nlc3MocmVjZWl2ZXIsIGNsYXNzQ29uc3RydWN0b3IpO1xuICByZXR1cm4gbWV0aG9kO1xufVxuZnVuY3Rpb24gX2NsYXNzU3RhdGljUHJpdmF0ZU1ldGhvZFNldCgpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBzZXQgcmVhZCBvbmx5IHN0YXRpYyBwcml2YXRlIGZpZWxkXCIpO1xufVxuZnVuY3Rpb24gX2NsYXNzQXBwbHlEZXNjcmlwdG9yR2V0KHJlY2VpdmVyLCBkZXNjcmlwdG9yKSB7XG4gIGlmIChkZXNjcmlwdG9yLmdldCkge1xuICAgIHJldHVybiBkZXNjcmlwdG9yLmdldC5jYWxsKHJlY2VpdmVyKTtcbiAgfVxuICByZXR1cm4gZGVzY3JpcHRvci52YWx1ZTtcbn1cbmZ1bmN0aW9uIF9jbGFzc0FwcGx5RGVzY3JpcHRvclNldChyZWNlaXZlciwgZGVzY3JpcHRvciwgdmFsdWUpIHtcbiAgaWYgKGRlc2NyaXB0b3Iuc2V0KSB7XG4gICAgZGVzY3JpcHRvci5zZXQuY2FsbChyZWNlaXZlciwgdmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIGlmICghZGVzY3JpcHRvci53cml0YWJsZSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBzZXQgcmVhZCBvbmx5IHByaXZhdGUgZmllbGRcIik7XG4gICAgfVxuICAgIGRlc2NyaXB0b3IudmFsdWUgPSB2YWx1ZTtcbiAgfVxufVxuZnVuY3Rpb24gX2NsYXNzQXBwbHlEZXNjcmlwdG9yRGVzdHJ1Y3R1cmVTZXQocmVjZWl2ZXIsIGRlc2NyaXB0b3IpIHtcbiAgaWYgKGRlc2NyaXB0b3Iuc2V0KSB7XG4gICAgaWYgKCEoXCJfX2Rlc3RyT2JqXCIgaW4gZGVzY3JpcHRvcikpIHtcbiAgICAgIGRlc2NyaXB0b3IuX19kZXN0ck9iaiA9IHtcbiAgICAgICAgc2V0IHZhbHVlKHYpIHtcbiAgICAgICAgICBkZXNjcmlwdG9yLnNldC5jYWxsKHJlY2VpdmVyLCB2KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGRlc2NyaXB0b3IuX19kZXN0ck9iajtcbiAgfSBlbHNlIHtcbiAgICBpZiAoIWRlc2NyaXB0b3Iud3JpdGFibGUpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gc2V0IHJlYWQgb25seSBwcml2YXRlIGZpZWxkXCIpO1xuICAgIH1cbiAgICByZXR1cm4gZGVzY3JpcHRvcjtcbiAgfVxufVxuZnVuY3Rpb24gX2NsYXNzU3RhdGljUHJpdmF0ZUZpZWxkRGVzdHJ1Y3R1cmVTZXQocmVjZWl2ZXIsIGNsYXNzQ29uc3RydWN0b3IsIGRlc2NyaXB0b3IpIHtcbiAgX2NsYXNzQ2hlY2tQcml2YXRlU3RhdGljQWNjZXNzKHJlY2VpdmVyLCBjbGFzc0NvbnN0cnVjdG9yKTtcbiAgX2NsYXNzQ2hlY2tQcml2YXRlU3RhdGljRmllbGREZXNjcmlwdG9yKGRlc2NyaXB0b3IsIFwic2V0XCIpO1xuICByZXR1cm4gX2NsYXNzQXBwbHlEZXNjcmlwdG9yRGVzdHJ1Y3R1cmVTZXQocmVjZWl2ZXIsIGRlc2NyaXB0b3IpO1xufVxuZnVuY3Rpb24gX2NsYXNzQ2hlY2tQcml2YXRlU3RhdGljQWNjZXNzKHJlY2VpdmVyLCBjbGFzc0NvbnN0cnVjdG9yKSB7XG4gIGlmIChyZWNlaXZlciAhPT0gY2xhc3NDb25zdHJ1Y3Rvcikge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIHN0YXRpYyBhY2Nlc3Mgb2Ygd3JvbmcgcHJvdmVuYW5jZVwiKTtcbiAgfVxufVxuZnVuY3Rpb24gX2NsYXNzQ2hlY2tQcml2YXRlU3RhdGljRmllbGREZXNjcmlwdG9yKGRlc2NyaXB0b3IsIGFjdGlvbikge1xuICBpZiAoZGVzY3JpcHRvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBcIiArIGFjdGlvbiArIFwiIHByaXZhdGUgc3RhdGljIGZpZWxkIGJlZm9yZSBpdHMgZGVjbGFyYXRpb25cIik7XG4gIH1cbn1cbmZ1bmN0aW9uIF9kZWNvcmF0ZShkZWNvcmF0b3JzLCBmYWN0b3J5LCBzdXBlckNsYXNzLCBtaXhpbnMpIHtcbiAgdmFyIGFwaSA9IF9nZXREZWNvcmF0b3JzQXBpKCk7XG4gIGlmIChtaXhpbnMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1peGlucy5sZW5ndGg7IGkrKykge1xuICAgICAgYXBpID0gbWl4aW5zW2ldKGFwaSk7XG4gICAgfVxuICB9XG4gIHZhciByID0gZmFjdG9yeShmdW5jdGlvbiBpbml0aWFsaXplKE8pIHtcbiAgICBhcGkuaW5pdGlhbGl6ZUluc3RhbmNlRWxlbWVudHMoTywgZGVjb3JhdGVkLmVsZW1lbnRzKTtcbiAgfSwgc3VwZXJDbGFzcyk7XG4gIHZhciBkZWNvcmF0ZWQgPSBhcGkuZGVjb3JhdGVDbGFzcyhfY29hbGVzY2VDbGFzc0VsZW1lbnRzKHIuZC5tYXAoX2NyZWF0ZUVsZW1lbnREZXNjcmlwdG9yKSksIGRlY29yYXRvcnMpO1xuICBhcGkuaW5pdGlhbGl6ZUNsYXNzRWxlbWVudHMoci5GLCBkZWNvcmF0ZWQuZWxlbWVudHMpO1xuICByZXR1cm4gYXBpLnJ1bkNsYXNzRmluaXNoZXJzKHIuRiwgZGVjb3JhdGVkLmZpbmlzaGVycyk7XG59XG5mdW5jdGlvbiBfZ2V0RGVjb3JhdG9yc0FwaSgpIHtcbiAgX2dldERlY29yYXRvcnNBcGkgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGFwaTtcbiAgfTtcbiAgdmFyIGFwaSA9IHtcbiAgICBlbGVtZW50c0RlZmluaXRpb25PcmRlcjogW1tcIm1ldGhvZFwiXSwgW1wiZmllbGRcIl1dLFxuICAgIGluaXRpYWxpemVJbnN0YW5jZUVsZW1lbnRzOiBmdW5jdGlvbiAoTywgZWxlbWVudHMpIHtcbiAgICAgIFtcIm1ldGhvZFwiLCBcImZpZWxkXCJdLmZvckVhY2goZnVuY3Rpb24gKGtpbmQpIHtcbiAgICAgICAgZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgIGlmIChlbGVtZW50LmtpbmQgPT09IGtpbmQgJiYgZWxlbWVudC5wbGFjZW1lbnQgPT09IFwib3duXCIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVmaW5lQ2xhc3NFbGVtZW50KE8sIGVsZW1lbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgdGhpcyk7XG4gICAgICB9LCB0aGlzKTtcbiAgICB9LFxuICAgIGluaXRpYWxpemVDbGFzc0VsZW1lbnRzOiBmdW5jdGlvbiAoRiwgZWxlbWVudHMpIHtcbiAgICAgIHZhciBwcm90byA9IEYucHJvdG90eXBlO1xuICAgICAgW1wibWV0aG9kXCIsIFwiZmllbGRcIl0uZm9yRWFjaChmdW5jdGlvbiAoa2luZCkge1xuICAgICAgICBlbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgdmFyIHBsYWNlbWVudCA9IGVsZW1lbnQucGxhY2VtZW50O1xuICAgICAgICAgIGlmIChlbGVtZW50LmtpbmQgPT09IGtpbmQgJiYgKHBsYWNlbWVudCA9PT0gXCJzdGF0aWNcIiB8fCBwbGFjZW1lbnQgPT09IFwicHJvdG90eXBlXCIpKSB7XG4gICAgICAgICAgICB2YXIgcmVjZWl2ZXIgPSBwbGFjZW1lbnQgPT09IFwic3RhdGljXCIgPyBGIDogcHJvdG87XG4gICAgICAgICAgICB0aGlzLmRlZmluZUNsYXNzRWxlbWVudChyZWNlaXZlciwgZWxlbWVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzKTtcbiAgICAgIH0sIHRoaXMpO1xuICAgIH0sXG4gICAgZGVmaW5lQ2xhc3NFbGVtZW50OiBmdW5jdGlvbiAocmVjZWl2ZXIsIGVsZW1lbnQpIHtcbiAgICAgIHZhciBkZXNjcmlwdG9yID0gZWxlbWVudC5kZXNjcmlwdG9yO1xuICAgICAgaWYgKGVsZW1lbnQua2luZCA9PT0gXCJmaWVsZFwiKSB7XG4gICAgICAgIHZhciBpbml0aWFsaXplciA9IGVsZW1lbnQuaW5pdGlhbGl6ZXI7XG4gICAgICAgIGRlc2NyaXB0b3IgPSB7XG4gICAgICAgICAgZW51bWVyYWJsZTogZGVzY3JpcHRvci5lbnVtZXJhYmxlLFxuICAgICAgICAgIHdyaXRhYmxlOiBkZXNjcmlwdG9yLndyaXRhYmxlLFxuICAgICAgICAgIGNvbmZpZ3VyYWJsZTogZGVzY3JpcHRvci5jb25maWd1cmFibGUsXG4gICAgICAgICAgdmFsdWU6IGluaXRpYWxpemVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpbml0aWFsaXplci5jYWxsKHJlY2VpdmVyKVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJlY2VpdmVyLCBlbGVtZW50LmtleSwgZGVzY3JpcHRvcik7XG4gICAgfSxcbiAgICBkZWNvcmF0ZUNsYXNzOiBmdW5jdGlvbiAoZWxlbWVudHMsIGRlY29yYXRvcnMpIHtcbiAgICAgIHZhciBuZXdFbGVtZW50cyA9IFtdO1xuICAgICAgdmFyIGZpbmlzaGVycyA9IFtdO1xuICAgICAgdmFyIHBsYWNlbWVudHMgPSB7XG4gICAgICAgIHN0YXRpYzogW10sXG4gICAgICAgIHByb3RvdHlwZTogW10sXG4gICAgICAgIG93bjogW11cbiAgICAgIH07XG4gICAgICBlbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuYWRkRWxlbWVudFBsYWNlbWVudChlbGVtZW50LCBwbGFjZW1lbnRzKTtcbiAgICAgIH0sIHRoaXMpO1xuICAgICAgZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICBpZiAoIV9oYXNEZWNvcmF0b3JzKGVsZW1lbnQpKSByZXR1cm4gbmV3RWxlbWVudHMucHVzaChlbGVtZW50KTtcbiAgICAgICAgdmFyIGVsZW1lbnRGaW5pc2hlcnNFeHRyYXMgPSB0aGlzLmRlY29yYXRlRWxlbWVudChlbGVtZW50LCBwbGFjZW1lbnRzKTtcbiAgICAgICAgbmV3RWxlbWVudHMucHVzaChlbGVtZW50RmluaXNoZXJzRXh0cmFzLmVsZW1lbnQpO1xuICAgICAgICBuZXdFbGVtZW50cy5wdXNoLmFwcGx5KG5ld0VsZW1lbnRzLCBlbGVtZW50RmluaXNoZXJzRXh0cmFzLmV4dHJhcyk7XG4gICAgICAgIGZpbmlzaGVycy5wdXNoLmFwcGx5KGZpbmlzaGVycywgZWxlbWVudEZpbmlzaGVyc0V4dHJhcy5maW5pc2hlcnMpO1xuICAgICAgfSwgdGhpcyk7XG4gICAgICBpZiAoIWRlY29yYXRvcnMpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBlbGVtZW50czogbmV3RWxlbWVudHMsXG4gICAgICAgICAgZmluaXNoZXJzOiBmaW5pc2hlcnNcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRlY29yYXRlQ29uc3RydWN0b3IobmV3RWxlbWVudHMsIGRlY29yYXRvcnMpO1xuICAgICAgZmluaXNoZXJzLnB1c2guYXBwbHkoZmluaXNoZXJzLCByZXN1bHQuZmluaXNoZXJzKTtcbiAgICAgIHJlc3VsdC5maW5pc2hlcnMgPSBmaW5pc2hlcnM7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sXG4gICAgYWRkRWxlbWVudFBsYWNlbWVudDogZnVuY3Rpb24gKGVsZW1lbnQsIHBsYWNlbWVudHMsIHNpbGVudCkge1xuICAgICAgdmFyIGtleXMgPSBwbGFjZW1lbnRzW2VsZW1lbnQucGxhY2VtZW50XTtcbiAgICAgIGlmICghc2lsZW50ICYmIGtleXMuaW5kZXhPZihlbGVtZW50LmtleSkgIT09IC0xKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJEdXBsaWNhdGVkIGVsZW1lbnQgKFwiICsgZWxlbWVudC5rZXkgKyBcIilcIik7XG4gICAgICB9XG4gICAgICBrZXlzLnB1c2goZWxlbWVudC5rZXkpO1xuICAgIH0sXG4gICAgZGVjb3JhdGVFbGVtZW50OiBmdW5jdGlvbiAoZWxlbWVudCwgcGxhY2VtZW50cykge1xuICAgICAgdmFyIGV4dHJhcyA9IFtdO1xuICAgICAgdmFyIGZpbmlzaGVycyA9IFtdO1xuICAgICAgZm9yICh2YXIgZGVjb3JhdG9ycyA9IGVsZW1lbnQuZGVjb3JhdG9ycywgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgdmFyIGtleXMgPSBwbGFjZW1lbnRzW2VsZW1lbnQucGxhY2VtZW50XTtcbiAgICAgICAga2V5cy5zcGxpY2Uoa2V5cy5pbmRleE9mKGVsZW1lbnQua2V5KSwgMSk7XG4gICAgICAgIHZhciBlbGVtZW50T2JqZWN0ID0gdGhpcy5mcm9tRWxlbWVudERlc2NyaXB0b3IoZWxlbWVudCk7XG4gICAgICAgIHZhciBlbGVtZW50RmluaXNoZXJFeHRyYXMgPSB0aGlzLnRvRWxlbWVudEZpbmlzaGVyRXh0cmFzKCgwLCBkZWNvcmF0b3JzW2ldKShlbGVtZW50T2JqZWN0KSB8fCBlbGVtZW50T2JqZWN0KTtcbiAgICAgICAgZWxlbWVudCA9IGVsZW1lbnRGaW5pc2hlckV4dHJhcy5lbGVtZW50O1xuICAgICAgICB0aGlzLmFkZEVsZW1lbnRQbGFjZW1lbnQoZWxlbWVudCwgcGxhY2VtZW50cyk7XG4gICAgICAgIGlmIChlbGVtZW50RmluaXNoZXJFeHRyYXMuZmluaXNoZXIpIHtcbiAgICAgICAgICBmaW5pc2hlcnMucHVzaChlbGVtZW50RmluaXNoZXJFeHRyYXMuZmluaXNoZXIpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBuZXdFeHRyYXMgPSBlbGVtZW50RmluaXNoZXJFeHRyYXMuZXh0cmFzO1xuICAgICAgICBpZiAobmV3RXh0cmFzKSB7XG4gICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBuZXdFeHRyYXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIHRoaXMuYWRkRWxlbWVudFBsYWNlbWVudChuZXdFeHRyYXNbal0sIHBsYWNlbWVudHMpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBleHRyYXMucHVzaC5hcHBseShleHRyYXMsIG5ld0V4dHJhcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsXG4gICAgICAgIGZpbmlzaGVyczogZmluaXNoZXJzLFxuICAgICAgICBleHRyYXM6IGV4dHJhc1xuICAgICAgfTtcbiAgICB9LFxuICAgIGRlY29yYXRlQ29uc3RydWN0b3I6IGZ1bmN0aW9uIChlbGVtZW50cywgZGVjb3JhdG9ycykge1xuICAgICAgdmFyIGZpbmlzaGVycyA9IFtdO1xuICAgICAgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgdmFyIG9iaiA9IHRoaXMuZnJvbUNsYXNzRGVzY3JpcHRvcihlbGVtZW50cyk7XG4gICAgICAgIHZhciBlbGVtZW50c0FuZEZpbmlzaGVyID0gdGhpcy50b0NsYXNzRGVzY3JpcHRvcigoMCwgZGVjb3JhdG9yc1tpXSkob2JqKSB8fCBvYmopO1xuICAgICAgICBpZiAoZWxlbWVudHNBbmRGaW5pc2hlci5maW5pc2hlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgZmluaXNoZXJzLnB1c2goZWxlbWVudHNBbmRGaW5pc2hlci5maW5pc2hlcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVsZW1lbnRzQW5kRmluaXNoZXIuZWxlbWVudHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGVsZW1lbnRzID0gZWxlbWVudHNBbmRGaW5pc2hlci5lbGVtZW50cztcbiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGVsZW1lbnRzLmxlbmd0aCAtIDE7IGorKykge1xuICAgICAgICAgICAgZm9yICh2YXIgayA9IGogKyAxOyBrIDwgZWxlbWVudHMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgICAgaWYgKGVsZW1lbnRzW2pdLmtleSA9PT0gZWxlbWVudHNba10ua2V5ICYmIGVsZW1lbnRzW2pdLnBsYWNlbWVudCA9PT0gZWxlbWVudHNba10ucGxhY2VtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkR1cGxpY2F0ZWQgZWxlbWVudCAoXCIgKyBlbGVtZW50c1tqXS5rZXkgKyBcIilcIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGVsZW1lbnRzOiBlbGVtZW50cyxcbiAgICAgICAgZmluaXNoZXJzOiBmaW5pc2hlcnNcbiAgICAgIH07XG4gICAgfSxcbiAgICBmcm9tRWxlbWVudERlc2NyaXB0b3I6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICB2YXIgb2JqID0ge1xuICAgICAgICBraW5kOiBlbGVtZW50LmtpbmQsXG4gICAgICAgIGtleTogZWxlbWVudC5rZXksXG4gICAgICAgIHBsYWNlbWVudDogZWxlbWVudC5wbGFjZW1lbnQsXG4gICAgICAgIGRlc2NyaXB0b3I6IGVsZW1lbnQuZGVzY3JpcHRvclxuICAgICAgfTtcbiAgICAgIHZhciBkZXNjID0ge1xuICAgICAgICB2YWx1ZTogXCJEZXNjcmlwdG9yXCIsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIFN5bWJvbC50b1N0cmluZ1RhZywgZGVzYyk7XG4gICAgICBpZiAoZWxlbWVudC5raW5kID09PSBcImZpZWxkXCIpIG9iai5pbml0aWFsaXplciA9IGVsZW1lbnQuaW5pdGlhbGl6ZXI7XG4gICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgdG9FbGVtZW50RGVzY3JpcHRvcnM6IGZ1bmN0aW9uIChlbGVtZW50T2JqZWN0cykge1xuICAgICAgaWYgKGVsZW1lbnRPYmplY3RzID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICAgIHJldHVybiBfdG9BcnJheShlbGVtZW50T2JqZWN0cykubWFwKGZ1bmN0aW9uIChlbGVtZW50T2JqZWN0KSB7XG4gICAgICAgIHZhciBlbGVtZW50ID0gdGhpcy50b0VsZW1lbnREZXNjcmlwdG9yKGVsZW1lbnRPYmplY3QpO1xuICAgICAgICB0aGlzLmRpc2FsbG93UHJvcGVydHkoZWxlbWVudE9iamVjdCwgXCJmaW5pc2hlclwiLCBcIkFuIGVsZW1lbnQgZGVzY3JpcHRvclwiKTtcbiAgICAgICAgdGhpcy5kaXNhbGxvd1Byb3BlcnR5KGVsZW1lbnRPYmplY3QsIFwiZXh0cmFzXCIsIFwiQW4gZWxlbWVudCBkZXNjcmlwdG9yXCIpO1xuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICAgIH0sIHRoaXMpO1xuICAgIH0sXG4gICAgdG9FbGVtZW50RGVzY3JpcHRvcjogZnVuY3Rpb24gKGVsZW1lbnRPYmplY3QpIHtcbiAgICAgIHZhciBraW5kID0gU3RyaW5nKGVsZW1lbnRPYmplY3Qua2luZCk7XG4gICAgICBpZiAoa2luZCAhPT0gXCJtZXRob2RcIiAmJiBraW5kICE9PSBcImZpZWxkXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQW4gZWxlbWVudCBkZXNjcmlwdG9yXFwncyAua2luZCBwcm9wZXJ0eSBtdXN0IGJlIGVpdGhlciBcIm1ldGhvZFwiIG9yJyArICcgXCJmaWVsZFwiLCBidXQgYSBkZWNvcmF0b3IgY3JlYXRlZCBhbiBlbGVtZW50IGRlc2NyaXB0b3Igd2l0aCcgKyAnIC5raW5kIFwiJyArIGtpbmQgKyAnXCInKTtcbiAgICAgIH1cbiAgICAgIHZhciBrZXkgPSBfdG9Qcm9wZXJ0eUtleShlbGVtZW50T2JqZWN0LmtleSk7XG4gICAgICB2YXIgcGxhY2VtZW50ID0gU3RyaW5nKGVsZW1lbnRPYmplY3QucGxhY2VtZW50KTtcbiAgICAgIGlmIChwbGFjZW1lbnQgIT09IFwic3RhdGljXCIgJiYgcGxhY2VtZW50ICE9PSBcInByb3RvdHlwZVwiICYmIHBsYWNlbWVudCAhPT0gXCJvd25cIikge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBbiBlbGVtZW50IGRlc2NyaXB0b3JcXCdzIC5wbGFjZW1lbnQgcHJvcGVydHkgbXVzdCBiZSBvbmUgb2YgXCJzdGF0aWNcIiwnICsgJyBcInByb3RvdHlwZVwiIG9yIFwib3duXCIsIGJ1dCBhIGRlY29yYXRvciBjcmVhdGVkIGFuIGVsZW1lbnQgZGVzY3JpcHRvcicgKyAnIHdpdGggLnBsYWNlbWVudCBcIicgKyBwbGFjZW1lbnQgKyAnXCInKTtcbiAgICAgIH1cbiAgICAgIHZhciBkZXNjcmlwdG9yID0gZWxlbWVudE9iamVjdC5kZXNjcmlwdG9yO1xuICAgICAgdGhpcy5kaXNhbGxvd1Byb3BlcnR5KGVsZW1lbnRPYmplY3QsIFwiZWxlbWVudHNcIiwgXCJBbiBlbGVtZW50IGRlc2NyaXB0b3JcIik7XG4gICAgICB2YXIgZWxlbWVudCA9IHtcbiAgICAgICAga2luZDoga2luZCxcbiAgICAgICAga2V5OiBrZXksXG4gICAgICAgIHBsYWNlbWVudDogcGxhY2VtZW50LFxuICAgICAgICBkZXNjcmlwdG9yOiBPYmplY3QuYXNzaWduKHt9LCBkZXNjcmlwdG9yKVxuICAgICAgfTtcbiAgICAgIGlmIChraW5kICE9PSBcImZpZWxkXCIpIHtcbiAgICAgICAgdGhpcy5kaXNhbGxvd1Byb3BlcnR5KGVsZW1lbnRPYmplY3QsIFwiaW5pdGlhbGl6ZXJcIiwgXCJBIG1ldGhvZCBkZXNjcmlwdG9yXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5kaXNhbGxvd1Byb3BlcnR5KGRlc2NyaXB0b3IsIFwiZ2V0XCIsIFwiVGhlIHByb3BlcnR5IGRlc2NyaXB0b3Igb2YgYSBmaWVsZCBkZXNjcmlwdG9yXCIpO1xuICAgICAgICB0aGlzLmRpc2FsbG93UHJvcGVydHkoZGVzY3JpcHRvciwgXCJzZXRcIiwgXCJUaGUgcHJvcGVydHkgZGVzY3JpcHRvciBvZiBhIGZpZWxkIGRlc2NyaXB0b3JcIik7XG4gICAgICAgIHRoaXMuZGlzYWxsb3dQcm9wZXJ0eShkZXNjcmlwdG9yLCBcInZhbHVlXCIsIFwiVGhlIHByb3BlcnR5IGRlc2NyaXB0b3Igb2YgYSBmaWVsZCBkZXNjcmlwdG9yXCIpO1xuICAgICAgICBlbGVtZW50LmluaXRpYWxpemVyID0gZWxlbWVudE9iamVjdC5pbml0aWFsaXplcjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH0sXG4gICAgdG9FbGVtZW50RmluaXNoZXJFeHRyYXM6IGZ1bmN0aW9uIChlbGVtZW50T2JqZWN0KSB7XG4gICAgICB2YXIgZWxlbWVudCA9IHRoaXMudG9FbGVtZW50RGVzY3JpcHRvcihlbGVtZW50T2JqZWN0KTtcbiAgICAgIHZhciBmaW5pc2hlciA9IF9vcHRpb25hbENhbGxhYmxlUHJvcGVydHkoZWxlbWVudE9iamVjdCwgXCJmaW5pc2hlclwiKTtcbiAgICAgIHZhciBleHRyYXMgPSB0aGlzLnRvRWxlbWVudERlc2NyaXB0b3JzKGVsZW1lbnRPYmplY3QuZXh0cmFzKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsXG4gICAgICAgIGZpbmlzaGVyOiBmaW5pc2hlcixcbiAgICAgICAgZXh0cmFzOiBleHRyYXNcbiAgICAgIH07XG4gICAgfSxcbiAgICBmcm9tQ2xhc3NEZXNjcmlwdG9yOiBmdW5jdGlvbiAoZWxlbWVudHMpIHtcbiAgICAgIHZhciBvYmogPSB7XG4gICAgICAgIGtpbmQ6IFwiY2xhc3NcIixcbiAgICAgICAgZWxlbWVudHM6IGVsZW1lbnRzLm1hcCh0aGlzLmZyb21FbGVtZW50RGVzY3JpcHRvciwgdGhpcylcbiAgICAgIH07XG4gICAgICB2YXIgZGVzYyA9IHtcbiAgICAgICAgdmFsdWU6IFwiRGVzY3JpcHRvclwiLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH07XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBTeW1ib2wudG9TdHJpbmdUYWcsIGRlc2MpO1xuICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIHRvQ2xhc3NEZXNjcmlwdG9yOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICB2YXIga2luZCA9IFN0cmluZyhvYmoua2luZCk7XG4gICAgICBpZiAoa2luZCAhPT0gXCJjbGFzc1wiKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0EgY2xhc3MgZGVzY3JpcHRvclxcJ3MgLmtpbmQgcHJvcGVydHkgbXVzdCBiZSBcImNsYXNzXCIsIGJ1dCBhIGRlY29yYXRvcicgKyAnIGNyZWF0ZWQgYSBjbGFzcyBkZXNjcmlwdG9yIHdpdGggLmtpbmQgXCInICsga2luZCArICdcIicpO1xuICAgICAgfVxuICAgICAgdGhpcy5kaXNhbGxvd1Byb3BlcnR5KG9iaiwgXCJrZXlcIiwgXCJBIGNsYXNzIGRlc2NyaXB0b3JcIik7XG4gICAgICB0aGlzLmRpc2FsbG93UHJvcGVydHkob2JqLCBcInBsYWNlbWVudFwiLCBcIkEgY2xhc3MgZGVzY3JpcHRvclwiKTtcbiAgICAgIHRoaXMuZGlzYWxsb3dQcm9wZXJ0eShvYmosIFwiZGVzY3JpcHRvclwiLCBcIkEgY2xhc3MgZGVzY3JpcHRvclwiKTtcbiAgICAgIHRoaXMuZGlzYWxsb3dQcm9wZXJ0eShvYmosIFwiaW5pdGlhbGl6ZXJcIiwgXCJBIGNsYXNzIGRlc2NyaXB0b3JcIik7XG4gICAgICB0aGlzLmRpc2FsbG93UHJvcGVydHkob2JqLCBcImV4dHJhc1wiLCBcIkEgY2xhc3MgZGVzY3JpcHRvclwiKTtcbiAgICAgIHZhciBmaW5pc2hlciA9IF9vcHRpb25hbENhbGxhYmxlUHJvcGVydHkob2JqLCBcImZpbmlzaGVyXCIpO1xuICAgICAgdmFyIGVsZW1lbnRzID0gdGhpcy50b0VsZW1lbnREZXNjcmlwdG9ycyhvYmouZWxlbWVudHMpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZWxlbWVudHM6IGVsZW1lbnRzLFxuICAgICAgICBmaW5pc2hlcjogZmluaXNoZXJcbiAgICAgIH07XG4gICAgfSxcbiAgICBydW5DbGFzc0ZpbmlzaGVyczogZnVuY3Rpb24gKGNvbnN0cnVjdG9yLCBmaW5pc2hlcnMpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmluaXNoZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBuZXdDb25zdHJ1Y3RvciA9ICgwLCBmaW5pc2hlcnNbaV0pKGNvbnN0cnVjdG9yKTtcbiAgICAgICAgaWYgKG5ld0NvbnN0cnVjdG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIG5ld0NvbnN0cnVjdG9yICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJGaW5pc2hlcnMgbXVzdCByZXR1cm4gYSBjb25zdHJ1Y3Rvci5cIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0cnVjdG9yID0gbmV3Q29uc3RydWN0b3I7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBjb25zdHJ1Y3RvcjtcbiAgICB9LFxuICAgIGRpc2FsbG93UHJvcGVydHk6IGZ1bmN0aW9uIChvYmosIG5hbWUsIG9iamVjdFR5cGUpIHtcbiAgICAgIGlmIChvYmpbbmFtZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKG9iamVjdFR5cGUgKyBcIiBjYW4ndCBoYXZlIGEgLlwiICsgbmFtZSArIFwiIHByb3BlcnR5LlwiKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIHJldHVybiBhcGk7XG59XG5mdW5jdGlvbiBfY3JlYXRlRWxlbWVudERlc2NyaXB0b3IoZGVmKSB7XG4gIHZhciBrZXkgPSBfdG9Qcm9wZXJ0eUtleShkZWYua2V5KTtcbiAgdmFyIGRlc2NyaXB0b3I7XG4gIGlmIChkZWYua2luZCA9PT0gXCJtZXRob2RcIikge1xuICAgIGRlc2NyaXB0b3IgPSB7XG4gICAgICB2YWx1ZTogZGVmLnZhbHVlLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZVxuICAgIH07XG4gIH0gZWxzZSBpZiAoZGVmLmtpbmQgPT09IFwiZ2V0XCIpIHtcbiAgICBkZXNjcmlwdG9yID0ge1xuICAgICAgZ2V0OiBkZWYudmFsdWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZVxuICAgIH07XG4gIH0gZWxzZSBpZiAoZGVmLmtpbmQgPT09IFwic2V0XCIpIHtcbiAgICBkZXNjcmlwdG9yID0ge1xuICAgICAgc2V0OiBkZWYudmFsdWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZVxuICAgIH07XG4gIH0gZWxzZSBpZiAoZGVmLmtpbmQgPT09IFwiZmllbGRcIikge1xuICAgIGRlc2NyaXB0b3IgPSB7XG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIGVudW1lcmFibGU6IHRydWVcbiAgICB9O1xuICB9XG4gIHZhciBlbGVtZW50ID0ge1xuICAgIGtpbmQ6IGRlZi5raW5kID09PSBcImZpZWxkXCIgPyBcImZpZWxkXCIgOiBcIm1ldGhvZFwiLFxuICAgIGtleToga2V5LFxuICAgIHBsYWNlbWVudDogZGVmLnN0YXRpYyA/IFwic3RhdGljXCIgOiBkZWYua2luZCA9PT0gXCJmaWVsZFwiID8gXCJvd25cIiA6IFwicHJvdG90eXBlXCIsXG4gICAgZGVzY3JpcHRvcjogZGVzY3JpcHRvclxuICB9O1xuICBpZiAoZGVmLmRlY29yYXRvcnMpIGVsZW1lbnQuZGVjb3JhdG9ycyA9IGRlZi5kZWNvcmF0b3JzO1xuICBpZiAoZGVmLmtpbmQgPT09IFwiZmllbGRcIikgZWxlbWVudC5pbml0aWFsaXplciA9IGRlZi52YWx1ZTtcbiAgcmV0dXJuIGVsZW1lbnQ7XG59XG5mdW5jdGlvbiBfY29hbGVzY2VHZXR0ZXJTZXR0ZXIoZWxlbWVudCwgb3RoZXIpIHtcbiAgaWYgKGVsZW1lbnQuZGVzY3JpcHRvci5nZXQgIT09IHVuZGVmaW5lZCkge1xuICAgIG90aGVyLmRlc2NyaXB0b3IuZ2V0ID0gZWxlbWVudC5kZXNjcmlwdG9yLmdldDtcbiAgfSBlbHNlIHtcbiAgICBvdGhlci5kZXNjcmlwdG9yLnNldCA9IGVsZW1lbnQuZGVzY3JpcHRvci5zZXQ7XG4gIH1cbn1cbmZ1bmN0aW9uIF9jb2FsZXNjZUNsYXNzRWxlbWVudHMoZWxlbWVudHMpIHtcbiAgdmFyIG5ld0VsZW1lbnRzID0gW107XG4gIHZhciBpc1NhbWVFbGVtZW50ID0gZnVuY3Rpb24gKG90aGVyKSB7XG4gICAgcmV0dXJuIG90aGVyLmtpbmQgPT09IFwibWV0aG9kXCIgJiYgb3RoZXIua2V5ID09PSBlbGVtZW50LmtleSAmJiBvdGhlci5wbGFjZW1lbnQgPT09IGVsZW1lbnQucGxhY2VtZW50O1xuICB9O1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGVsZW1lbnQgPSBlbGVtZW50c1tpXTtcbiAgICB2YXIgb3RoZXI7XG4gICAgaWYgKGVsZW1lbnQua2luZCA9PT0gXCJtZXRob2RcIiAmJiAob3RoZXIgPSBuZXdFbGVtZW50cy5maW5kKGlzU2FtZUVsZW1lbnQpKSkge1xuICAgICAgaWYgKF9pc0RhdGFEZXNjcmlwdG9yKGVsZW1lbnQuZGVzY3JpcHRvcikgfHwgX2lzRGF0YURlc2NyaXB0b3Iob3RoZXIuZGVzY3JpcHRvcikpIHtcbiAgICAgICAgaWYgKF9oYXNEZWNvcmF0b3JzKGVsZW1lbnQpIHx8IF9oYXNEZWNvcmF0b3JzKG90aGVyKSkge1xuICAgICAgICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcIkR1cGxpY2F0ZWQgbWV0aG9kcyAoXCIgKyBlbGVtZW50LmtleSArIFwiKSBjYW4ndCBiZSBkZWNvcmF0ZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIG90aGVyLmRlc2NyaXB0b3IgPSBlbGVtZW50LmRlc2NyaXB0b3I7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoX2hhc0RlY29yYXRvcnMoZWxlbWVudCkpIHtcbiAgICAgICAgICBpZiAoX2hhc0RlY29yYXRvcnMob3RoZXIpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJEZWNvcmF0b3JzIGNhbid0IGJlIHBsYWNlZCBvbiBkaWZmZXJlbnQgYWNjZXNzb3JzIHdpdGggZm9yIFwiICsgXCJ0aGUgc2FtZSBwcm9wZXJ0eSAoXCIgKyBlbGVtZW50LmtleSArIFwiKS5cIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIG90aGVyLmRlY29yYXRvcnMgPSBlbGVtZW50LmRlY29yYXRvcnM7XG4gICAgICAgIH1cbiAgICAgICAgX2NvYWxlc2NlR2V0dGVyU2V0dGVyKGVsZW1lbnQsIG90aGVyKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbmV3RWxlbWVudHMucHVzaChlbGVtZW50KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5ld0VsZW1lbnRzO1xufVxuZnVuY3Rpb24gX2hhc0RlY29yYXRvcnMoZWxlbWVudCkge1xuICByZXR1cm4gZWxlbWVudC5kZWNvcmF0b3JzICYmIGVsZW1lbnQuZGVjb3JhdG9ycy5sZW5ndGg7XG59XG5mdW5jdGlvbiBfaXNEYXRhRGVzY3JpcHRvcihkZXNjKSB7XG4gIHJldHVybiBkZXNjICE9PSB1bmRlZmluZWQgJiYgIShkZXNjLnZhbHVlID09PSB1bmRlZmluZWQgJiYgZGVzYy53cml0YWJsZSA9PT0gdW5kZWZpbmVkKTtcbn1cbmZ1bmN0aW9uIF9vcHRpb25hbENhbGxhYmxlUHJvcGVydHkob2JqLCBuYW1lKSB7XG4gIHZhciB2YWx1ZSA9IG9ialtuYW1lXTtcbiAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHZhbHVlICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRXhwZWN0ZWQgJ1wiICsgbmFtZSArIFwiJyB0byBiZSBhIGZ1bmN0aW9uXCIpO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIF9jbGFzc1ByaXZhdGVNZXRob2RHZXQocmVjZWl2ZXIsIHByaXZhdGVTZXQsIGZuKSB7XG4gIGlmICghcHJpdmF0ZVNldC5oYXMocmVjZWl2ZXIpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBnZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7XG4gIH1cbiAgcmV0dXJuIGZuO1xufVxuZnVuY3Rpb24gX2NoZWNrUHJpdmF0ZVJlZGVjbGFyYXRpb24ob2JqLCBwcml2YXRlQ29sbGVjdGlvbikge1xuICBpZiAocHJpdmF0ZUNvbGxlY3Rpb24uaGFzKG9iaikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGluaXRpYWxpemUgdGhlIHNhbWUgcHJpdmF0ZSBlbGVtZW50cyB0d2ljZSBvbiBhbiBvYmplY3RcIik7XG4gIH1cbn1cbmZ1bmN0aW9uIF9jbGFzc1ByaXZhdGVGaWVsZEluaXRTcGVjKG9iaiwgcHJpdmF0ZU1hcCwgdmFsdWUpIHtcbiAgX2NoZWNrUHJpdmF0ZVJlZGVjbGFyYXRpb24ob2JqLCBwcml2YXRlTWFwKTtcbiAgcHJpdmF0ZU1hcC5zZXQob2JqLCB2YWx1ZSk7XG59XG5mdW5jdGlvbiBfY2xhc3NQcml2YXRlTWV0aG9kSW5pdFNwZWMob2JqLCBwcml2YXRlU2V0KSB7XG4gIF9jaGVja1ByaXZhdGVSZWRlY2xhcmF0aW9uKG9iaiwgcHJpdmF0ZVNldCk7XG4gIHByaXZhdGVTZXQuYWRkKG9iaik7XG59XG5mdW5jdGlvbiBfY2xhc3NQcml2YXRlTWV0aG9kU2V0KCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHJlYXNzaWduIHByaXZhdGUgbWV0aG9kXCIpO1xufVxuZnVuY3Rpb24gX2lkZW50aXR5KHgpIHtcbiAgcmV0dXJuIHg7XG59IiwiaW1wb3J0IHsgX2RlY29yYXRvciwgQ29tcG9uZW50LCBOb2RlLCBVSU9wYWNpdHksIHR3ZWVuLCBWZWMzIH0gZnJvbSBcImNjXCI7XHJcbmNvbnN0IHsgY2NjbGFzcywgcHJvcGVydHkgfSA9IF9kZWNvcmF0b3I7XHJcbmltcG9ydCB7IEF1ZGlvSGVscGVyIH0gZnJvbSBcIi4uLy4uLy4uL1V0aWxzL0F1ZGlvSGVscGVyXCI7XHJcblxyXG5AY2NjbGFzcyhcIlNjZW5lU3dpdGNoQW5pbWF0aW9uXCIpXHJcbmV4cG9ydCBjbGFzcyBTY2VuZVN3aXRjaEFuaW1hdGlvbiBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBAcHJvcGVydHkoTm9kZSlcclxuICAgIHJvb3ROb2RlOiBOb2RlID0gbnVsbDsgLy8g5oyH5ZCR5pW05Liq55WM6Z2i5qC56IqC54K577yM5q+U5aaCIENhbnZhcyDmiJYgbWFpblBhbmVsXHJcblxyXG4gICAgc3RhcnQoKSB7fVxyXG5cclxuICAgIHVwZGF0ZShkZWx0YVRpbWU6IG51bWJlcikge31cclxuXHJcbiAgICBzd2l0Y2goKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICAgIEF1ZGlvSGVscGVyLmluc3RhbmNlLnBsYXlTRlgoXCJzd2lzaFwiKTtcclxuXHJcbiAgICAgICAgICAgIGxldCB1aU9wYWNpdHkgPSB0aGlzLnJvb3ROb2RlLmdldENvbXBvbmVudChVSU9wYWNpdHkpO1xyXG4gICAgICAgICAgICBpZiAoIXVpT3BhY2l0eSkge1xyXG4gICAgICAgICAgICAgICAgdWlPcGFjaXR5ID0gdGhpcy5yb290Tm9kZS5hZGRDb21wb25lbnQoVUlPcGFjaXR5KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8g5Yqo55S75pWI5p6c77ya57yp5pS+ICsg5reh5Ye6ICsg5YiH5o2i5Zy65pmvXHJcbiAgICAgICAgICAgIHR3ZWVuKHRoaXMucm9vdE5vZGUpXHJcbiAgICAgICAgICAgICAgICAudG8oXHJcbiAgICAgICAgICAgICAgICAgICAgMC41LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IG5ldyBWZWMzKDAuMywgMC4zLCAxKSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsgZWFzaW5nOiBcInF1YWRJbk91dFwiIH1cclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIC5zdGFydCgpO1xyXG5cclxuICAgICAgICAgICAgdHdlZW4odWlPcGFjaXR5KVxyXG4gICAgICAgICAgICAgICAgLnRvKDAuNSwgeyBvcGFjaXR5OiAwIH0sIHsgZWFzaW5nOiBcInF1YWRJbk91dFwiIH0pXHJcbiAgICAgICAgICAgICAgICAuY2FsbCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5zdGFydCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IF9kZWNvcmF0b3IsIENvbXBvbmVudCwgZGlyZWN0b3IgfSBmcm9tIFwiY2NcIjtcclxuY29uc3QgeyBjY2NsYXNzLCBwcm9wZXJ0eSB9ID0gX2RlY29yYXRvcjtcclxuXHJcbmltcG9ydCB7IFNjZW5lU3dpdGNoQW5pbWF0aW9uIH0gZnJvbSBcIi4vRlgvU2NlbmVTd2l0Y2hBbmltYXRpb25cIjtcclxuXHJcbkBjY2NsYXNzKFwiU3RhcnRNYW5hZ2VyXCIpXHJcbmV4cG9ydCBjbGFzcyBTdGFydE1hbmFnZXIgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgQHByb3BlcnR5KFNjZW5lU3dpdGNoQW5pbWF0aW9uKVxyXG4gICAgc2NlbmVBbmltYXRpb246IFNjZW5lU3dpdGNoQW5pbWF0aW9uID0gbnVsbDtcclxuXHJcbiAgICBzdGFydCgpIHt9XHJcblxyXG4gICAgdXBkYXRlKGRlbHRhVGltZTogbnVtYmVyKSB7fVxyXG5cclxuICAgIGFzeW5jIG9uU3RhcnRHYW1lKCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2NlbmVBbmltYXRpb24uc3dpdGNoKCk7XHJcbiAgICAgICAgZGlyZWN0b3IubG9hZFNjZW5lKFwiZGFuZGVsaW9uXCIpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IF9kZWNvcmF0b3IsIENvbXBvbmVudCwgTm9kZSwgdHdlZW4sIFZlYzMgfSBmcm9tIFwiY2NcIjtcclxuaW1wb3J0IHsgQXVkaW9IZWxwZXIgfSBmcm9tIFwiLi4vLi4vLi4vVXRpbHMvQXVkaW9IZWxwZXJcIjtcclxuY29uc3QgeyBjY2NsYXNzLCBwcm9wZXJ0eSB9ID0gX2RlY29yYXRvcjtcclxuaW1wb3J0IHsgRWZmZWN0c0hlbHBlciB9IGZyb20gXCIuLi8uLi8uLi9FZmZlY3RzL0VmZmVjdHNIZWxwZXJcIjtcclxuXHJcbkBjY2NsYXNzKFwiVGlsZUFuaW1hdGlvblwiKVxyXG5leHBvcnQgY2xhc3MgVGlsZUFuaW1hdGlvbiBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBhc3luYyBzd2l0Y2hUb0Zsb3dlcihub2RlOiBOb2RlKSB7XHJcbiAgICAgICAgQXVkaW9IZWxwZXIuaW5zdGFuY2UucGxheVNGWChcInNwYXJrbGVcIik7XHJcbiAgICAgICAgYXdhaXQgRWZmZWN0c0hlbHBlci5ib3VuY2VTY2FsZShub2RlKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBfZGVjb3JhdG9yLCBDb21wb25lbnQsIE5vZGUsIFNwcml0ZUZyYW1lLCBTcHJpdGUsIGRpcmVjdG9yIH0gZnJvbSBcImNjXCI7XHJcbmNvbnN0IHsgY2NjbGFzcywgcHJvcGVydHkgfSA9IF9kZWNvcmF0b3I7XHJcbmltcG9ydCB7IFRpbGVBbmltYXRpb24gfSBmcm9tIFwiLi4vRlgvVGlsZUFuaW1hdGlvblwiO1xyXG5cclxuZW51bSBDZWxsU3RhdGUge1xyXG4gICAgRW1wdHksXHJcbiAgICBEYW5kZWxpb24sXHJcbiAgICBTZWVkLFxyXG59XHJcblxyXG5AY2NjbGFzcyhcIlRpbGVDb250cm9sbGVyXCIpXHJcbmV4cG9ydCBjbGFzcyBUaWxlQ29udHJvbGxlciBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBAcHJvcGVydHkoVGlsZUFuaW1hdGlvbilcclxuICAgIHRpbGVBbmltYXRpb246IFRpbGVBbmltYXRpb24gPSBudWxsO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0ZSA9IENlbGxTdGF0ZS5FbXB0eTtcclxuXHJcbiAgICBwcml2YXRlIG1hc2tTcHJpdGVOb2RlOiBOb2RlID0gbnVsbDtcclxuICAgIHByaXZhdGUgZmxvd2VyU3ByaXRlTm9kZTogTm9kZSA9IG51bGw7XHJcbiAgICBwcml2YXRlIHNlZWRTcHJpdGVOb2RlOiBOb2RlID0gbnVsbDtcclxuICAgIHByaXZhdGUgZGFuZGVsaW9uU3ByaXRlTm9kZTogTm9kZSA9IG51bGw7XHJcblxyXG4gICAgb25Mb2FkKCkge1xyXG4gICAgICAgIHRoaXMubWFza1Nwcml0ZU5vZGUgPSB0aGlzLm5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJNYXNrU3ByaXRlXCIpO1xyXG4gICAgICAgIHRoaXMuZmxvd2VyU3ByaXRlTm9kZSA9IHRoaXMubm9kZS5nZXRDaGlsZEJ5TmFtZShcIkZsb3dlck5vZGVcIik7XHJcbiAgICAgICAgdGhpcy5zZWVkU3ByaXRlTm9kZSA9IHRoaXMubm9kZS5nZXRDaGlsZEJ5TmFtZShcIlNlZWROb2RlXCIpO1xyXG4gICAgICAgIHRoaXMuZGFuZGVsaW9uU3ByaXRlTm9kZSA9IHRoaXMubm9kZS5nZXRDaGlsZEJ5TmFtZShcIkRhbmRlbGlvbk5vZGVcIik7XHJcbiAgICAgICAgdGhpcy51cGRhdGVWaXN1YWwoKTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0KGk6IG51bWJlciwgajogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5ub2RlLm9uKE5vZGUuRXZlbnRUeXBlLlRPVUNIX0VORCwgdGhpcy5vbkNsaWNrLCB0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNsaWNrKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBDZWxsU3RhdGUuRW1wdHkgfHwgdGhpcy5zdGF0ZSA9PT0gQ2VsbFN0YXRlLlNlZWQpIHtcclxuICAgICAgICAgICAgZGlyZWN0b3IuZW1pdChcIlRJTEVfQ0xJQ0tFRFwiLCB0aGlzLm5vZGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVWaXN1YWwoKSB7XHJcbiAgICAgICAgLy8g5YWI5YWo6YOo6ZqQ6JePXHJcbiAgICAgICAgdGhpcy5tYXNrU3ByaXRlTm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmZsb3dlclNwcml0ZU5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zZWVkU3ByaXRlTm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmRhbmRlbGlvblNwcml0ZU5vZGUuYWN0aXZlID0gZmFsc2U7XHJcblxyXG4gICAgICAgIC8vIOWGjeaYvuekuuWvueW6lOeahOmCo+S4qlxyXG4gICAgICAgIHN3aXRjaCAodGhpcy5zdGF0ZSkge1xyXG4gICAgICAgICAgICBjYXNlIENlbGxTdGF0ZS5FbXB0eTpcclxuICAgICAgICAgICAgICAgIHRoaXMubWFza1Nwcml0ZU5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDZWxsU3RhdGUuRGFuZGVsaW9uOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXNrU3ByaXRlTm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYW5kZWxpb25TcHJpdGVOb2RlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDZWxsU3RhdGUuU2VlZDpcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VlZFNwcml0ZU5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRGbG93ZXIoKSB7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IENlbGxTdGF0ZS5EYW5kZWxpb247XHJcbiAgICAgICAgdGhpcy51cGRhdGVWaXN1YWwoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRTZWVkKCkge1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBDZWxsU3RhdGUuU2VlZDtcclxuICAgICAgICB0aGlzLnVwZGF0ZVZpc3VhbCgpO1xyXG4gICAgICAgIC8vIFRPRE86IOaYvuekuuenjeWtkOWbvu+8jOavlOWmguWQr+eUqCBzcHJpdGXvvIzmjaLotLTlm77nrYlcclxuICAgIH1cclxuXHJcbiAgICBzZXRFbXB0eSgpIHtcclxuICAgICAgICB0aGlzLnN0YXRlID0gQ2VsbFN0YXRlLkVtcHR5O1xyXG4gICAgICAgIHRoaXMudXBkYXRlVmlzdWFsKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RmluYWxGbG93ZXIoKSB7XHJcbiAgICAgICAgdGhpcy5zZWVkU3ByaXRlTm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm1hc2tTcHJpdGVOb2RlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5kYW5kZWxpb25TcHJpdGVOb2RlLmFjdGl2ZSA9IHRydWU7XHJcblxyXG4gICAgICAgIHRoaXMudGlsZUFuaW1hdGlvbi5zd2l0Y2hUb0Zsb3dlcih0aGlzLm5vZGUpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzRmxvd2VyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlID09IENlbGxTdGF0ZS5EYW5kZWxpb247XHJcbiAgICB9XHJcblxyXG4gICAgaXNFbXB0eSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZSA9PSBDZWxsU3RhdGUuRW1wdHk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNTZWVkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlID09IENlbGxTdGF0ZS5TZWVkO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vIGFzc2V0cy9TY3JpcHRzL1V0aWxzL1RpbWVsaW5lSGVscGVyLnRzXHJcblxyXG5leHBvcnQgY2xhc3MgVGltZWxpbmVIZWxwZXIge1xyXG4gICAgc3RhdGljIGFzeW5jIHJ1bihcclxuICAgICAgICBzdGVwczogKCgpID0+IHZvaWQgfCBQcm9taXNlPHZvaWQ+KVtdLFxyXG4gICAgICAgIGRlbGF5QmV0d2VlblN0ZXBzOiBudW1iZXIgPSAwXHJcbiAgICApIHtcclxuICAgICAgICBmb3IgKGNvbnN0IHN0ZXAgb2Ygc3RlcHMpIHtcclxuICAgICAgICAgICAgYXdhaXQgc3RlcCgpO1xyXG4gICAgICAgICAgICBpZiAoZGVsYXlCZXR3ZWVuU3RlcHMgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLndhaXQoZGVsYXlCZXR3ZWVuU3RlcHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyB3YWl0KG1zOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgYXN5bmMgcnVuV2l0aERlbGF5cyhcclxuICAgICAgICBzdGVwVHVwbGVzOiBbKCkgPT4gdm9pZCB8IFByb21pc2U8dm9pZD4sIG51bWJlcj9dW11cclxuICAgICkge1xyXG4gICAgICAgIGZvciAoY29uc3QgW3N0ZXAsIGRlbGF5XSBvZiBzdGVwVHVwbGVzKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHN0ZXAoKTtcclxuICAgICAgICAgICAgaWYgKGRlbGF5ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMud2FpdChkZWxheSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFNjcmlwdHMvVXRpbHMvVGltZVV0aWwudHNcclxuZXhwb3J0IGZ1bmN0aW9uIHdhaXQobXM6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XHJcbn1cclxuIl19